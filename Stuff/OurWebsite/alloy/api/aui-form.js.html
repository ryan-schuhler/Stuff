<!DOCTYPE>
<html class="ltr" xmlns:yui="http://yuilibrary.com/rdf/1.0/yui.rdf#">
<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
	<title>API: aui-event   aui-form.js  (YUI Library)</title>

	<link rel="stylesheet" href="../build/aui-skin-classic/css/aui-skin-classic-all-min.css" type="text/css" media="screen" />
	<link rel="stylesheet" type="text/css" href="assets/custom.css" />

    <script type="text/javascript" src="assets/api-js"></script>
    <script type="text/javascript" src="assets/ac-js"></script>
</head>

<body>

<div id="wrapper">
	<div class="aui-header">
		<h1>
			<a class="aui-header-text" href="http://alloy.liferay.com/deploy/api" title="Alloy UI">Alloy UI</a>
		</h1>

		<h3>
			aui-event&nbsp; <span class="subtitle">1.0.1</span>
		</h3>

		<p class="breadcrumbs">
			<a href="./index.html" title="Alloy UI">Alloy UI</a>

	            <span class="separator">&gt;</span>

				<a class="modulename" href="./module_aui-event.html" title="aui-event">aui-event</a>

	                

	                 <span class="separator">&gt;</span> <span class="filename">aui-form.js (source view)</span> 
		</p>

		<form onsubmit="return false;">
            <div id="propertysearch">
				<span class="aui-field aui-field-text aui-field-labels-inline aui-field-labels-right">
					<span class="aui-field-content">
						<label class="aui-field-label" for="searchinput">Search:</label>
						<input class="aui-field-input aui-field-input-text" id="searchinput" name="searchinput" type="text" value="" />
					</span>
				</span>
                <div id="searchresults">
                    &nbsp;
                </div>
            </div>
        </form>
	</div>

	<div class="aui-body">
		<form action="#" name="classOptions" id="classOptions">
			<fieldset>
				<legend>Filters</legend>

				<span class="aui-field aui-field-checkbox aui-field-choice aui-field-inline">
					<span class="aui-field-content">
						<label class="aui-field-label" for="show_private">
							<input class="aui-field-input aui-field-input-checkbox aui-field-input-choice" id="show_private" name="show_private" type="checkbox" value="" />
						Show Private</label>
					</span>
				</span>

				<span class="aui-field aui-field-checkbox aui-field-choice aui-field-inline">
					<span class="aui-field-content">
						<label class="aui-field-label" for="show_protected">
							<input class="aui-field-input aui-field-input-checkbox aui-field-input-choice" id="show_protected" name="show_protected" type="checkbox" value="" />
						Show Protected</label>
					</span>
				</span>

				<span class="aui-field aui-field-checkbox aui-field-choice aui-field-inline">
					<span class="aui-field-content">
						<label class="aui-field-label" for="show_deprecated">
							<input class="aui-field-input aui-field-input-checkbox aui-field-input-choice" id="show_deprecated" name="show_deprecated" type="checkbox" value="" />
						Show Deprecated</label>
					</span>
				</span>
			</fieldset>
		</form>

		<div class="aui-layout">
			<div class="aui-layout-content">
				<div class="aui-column aui-w25 aui-column-first">
					<div class="aui-column-content aui-column-content-first">

						<div class="aui-widget aui-list aui-list-modules">
							<div class="aui-widget-content">
								<div class="aui-widget-hd aui-list-hd aui-list-modules-hd">
									<span class="aui-widget-hd-text">Modules</span>
								</div>

								<div class="aui-widget-bd aui-list-bd">
									<h4 class="aui-module-section-heading">Alloy Modules</h4>
									<ul class="content">



				                                <li class=""><a href="module_aui-autocomplete.html" title="aui-autocomplete">aui-autocomplete</a></li>



				                                <li class=""><a href="module_aui-button-item.html" title="aui-button-item">aui-button-item</a></li>



				                                <li class=""><a href="module_aui-calendar.html" title="aui-calendar">aui-calendar</a></li>



				                                <li class=""><a href="module_aui-char-counter.html" title="aui-char-counter">aui-char-counter</a></li>



				                                <li class=""><a href="module_aui-color-picker.html" title="aui-color-picker">aui-color-picker</a></li>



				                                <li class=""><a href="module_aui-component.html" title="aui-component">aui-component</a></li>



				                                <li class=""><a href="module_aui-datatype.html" title="aui-datatype">aui-datatype</a></li>



				                                <li class=""><a href="module_aui-delayed-task.html" title="aui-delayed-task">aui-delayed-task</a></li>



				                                <li class=""><a href="module_aui-dialog.html" title="aui-dialog">aui-dialog</a></li>



				                                <li class=""><a href="module_aui-editable.html" title="aui-editable">aui-editable</a></li>



				                                <li class="selected"><a href="module_aui-event.html" title="aui-event">aui-event</a></li>



				                                <li class=""><a href="module_aui-image-viewer.html" title="aui-image-viewer">aui-image-viewer</a></li>



				                                <li class=""><a href="module_aui-io.html" title="aui-io">aui-io</a></li>



				                                <li class=""><a href="module_aui-live-search.html" title="aui-live-search">aui-live-search</a></li>



				                                <li class=""><a href="module_aui-loading-mask.html" title="aui-loading-mask">aui-loading-mask</a></li>



				                                <li class=""><a href="module_aui-nested-list.html" title="aui-nested-list">aui-nested-list</a></li>



				                                <li class=""><a href="module_aui-node.html" title="aui-node">aui-node</a></li>



				                                <li class=""><a href="module_aui-overlay.html" title="aui-overlay">aui-overlay</a></li>



				                                <li class=""><a href="module_aui-paginator.html" title="aui-paginator">aui-paginator</a></li>



				                                <li class=""><a href="module_aui-panel.html" title="aui-panel">aui-panel</a></li>



				                                <li class=""><a href="module_aui-parse-content.html" title="aui-parse-content">aui-parse-content</a></li>



				                                <li class=""><a href="module_aui-portal-layout.html" title="aui-portal-layout">aui-portal-layout</a></li>



				                                <li class=""><a href="module_aui-progressbar.html" title="aui-progressbar">aui-progressbar</a></li>



				                                <li class=""><a href="module_aui-rating.html" title="aui-rating">aui-rating</a></li>



				                                <li class=""><a href="module_aui-resize.html" title="aui-resize">aui-resize</a></li>



				                                <li class=""><a href="module_aui-textboxlist.html" title="aui-textboxlist">aui-textboxlist</a></li>



				                                <li class=""><a href="module_aui-toolbar.html" title="aui-toolbar">aui-toolbar</a></li>



				                                <li class=""><a href="module_aui-tooltip.html" title="aui-tooltip">aui-tooltip</a></li>



				                                <li class=""><a href="module_aui-tree.html" title="aui-tree">aui-tree</a></li>
			                        </ul>

									<h4 class="aui-module-section-heading">YUI Modules</h4>
									<ul class="content">



			                                
													<li class=""><a href="module_align-plugin.html" title="align-plugin">align-plugin</a></li>



			                                
													<li class=""><a href="module_anim.html" title="anim">anim</a></li>



			                                
													<li class=""><a href="module_async-queue.html" title="async-queue">async-queue</a></li>



			                                
													<li class=""><a href="module_attribute.html" title="attribute">attribute</a></li>



			                                
													<li class=""><a href="module_base.html" title="base">base</a></li>



			                                
													<li class=""><a href="module_cache.html" title="cache">cache</a></li>



			                                
													<li class=""><a href="module_classnamemanager.html" title="classnamemanager">classnamemanager</a></li>



			                                
													<li class=""><a href="module_collection.html" title="collection">collection</a></li>



			                                
													<li class=""><a href="module_console.html" title="console">console</a></li>



			                                
													<li class=""><a href="module_console-filters.html" title="console-filters">console-filters</a></li>



			                                
													<li class=""><a href="module_cookie.html" title="cookie">cookie</a></li>



			                                
													<li class=""><a href="module_dataschema.html" title="dataschema">dataschema</a></li>



			                                
													<li class=""><a href="module_datasource.html" title="datasource">datasource</a></li>



			                                
													<li class=""><a href="module_datatype.html" title="datatype">datatype</a></li>



			                                
													<li class=""><a href="module_dd.html" title="dd">dd</a></li>



			                                
													<li class=""><a href="module_dom.html" title="dom">dom</a></li>



			                                
													<li class=""><a href="module_dump.html" title="dump">dump</a></li>



			                                
													<li class=""><a href="module_event.html" title="event">event</a></li>



			                                
													<li class=""><a href="module_event-custom.html" title="event-custom">event-custom</a></li>



			                                
													<li class=""><a href="module_event-simulate.html" title="event-simulate">event-simulate</a></li>



			                                
													<li class=""><a href="module_history.html" title="history">history</a></li>



			                                
													<li class=""><a href="module_imageloader.html" title="imageloader">imageloader</a></li>



			                                
													<li class=""><a href="module_intl.html" title="intl">intl</a></li>



			                                
													<li class=""><a href="module_io.html" title="io">io</a></li>



			                                
													<li class=""><a href="module_json.html" title="json">json</a></li>



			                                
													<li class=""><a href="module_loader.html" title="loader">loader</a></li>



			                                
													<li class=""><a href="module_node.html" title="node">node</a></li>



			                                
													<li class=""><a href="module_node-focusmanager.html" title="node-focusmanager">node-focusmanager</a></li>



			                                
													<li class=""><a href="module_node-menunav.html" title="node-menunav">node-menunav</a></li>



			                                
													<li class=""><a href="module_oop.html" title="oop">oop</a></li>



			                                
													<li class=""><a href="module_overlay.html" title="overlay">overlay</a></li>



			                                
													<li class=""><a href="module_plugin.html" title="plugin">plugin</a></li>



			                                
													<li class=""><a href="module_pluginhost.html" title="pluginhost">pluginhost</a></li>



			                                
													<li class=""><a href="module_profiler.html" title="profiler">profiler</a></li>



			                                
													<li class=""><a href="module_querystring.html" title="querystring">querystring</a></li>



			                                
													<li class=""><a href="module_queue-promote.html" title="queue-promote">queue-promote</a></li>



			                                
													<li class=""><a href="module_shim-plugin.html" title="shim-plugin">shim-plugin</a></li>



			                                
													<li class=""><a href="module_slider.html" title="slider">slider</a></li>



			                                
													<li class=""><a href="module_sortable.html" title="sortable">sortable</a></li>



			                                
													<li class=""><a href="module_stylesheet.html" title="stylesheet">stylesheet</a></li>



			                                
													<li class=""><a href="module_substitute.html" title="substitute">substitute</a></li>



			                                
													<li class=""><a href="module_swf.html" title="swf">swf</a></li>



			                                
													<li class=""><a href="module_swfdetect.html" title="swfdetect">swfdetect</a></li>



			                                
													<li class=""><a href="module_tabview.html" title="tabview">tabview</a></li>



			                                
													<li class=""><a href="module_test.html" title="test">test</a></li>



			                                
													<li class=""><a href="module_widget.html" title="widget">widget</a></li>



			                                
													<li class=""><a href="module_widget-anim.html" title="widget-anim">widget-anim</a></li>



			                                
													<li class=""><a href="module_widget-parent.html" title="widget-parent">widget-parent</a></li>



			                                
													<li class=""><a href="module_widget-position.html" title="widget-position">widget-position</a></li>



			                                
													<li class=""><a href="module_widget-position-align.html" title="widget-position-align">widget-position-align</a></li>



			                                
													<li class=""><a href="module_widget-position-constrain.html" title="widget-position-constrain">widget-position-constrain</a></li>



			                                
													<li class=""><a href="module_widget-stack.html" title="widget-stack">widget-stack</a></li>



			                                
													<li class=""><a href="module_widget-stdmod.html" title="widget-stdmod">widget-stdmod</a></li>



			                                
													<li class=""><a href="module_yui.html" title="yui">yui</a></li>
			                        </ul>
								</div>
							</div>
						</div>

							<div class="aui-widget aui-list aui-list-classes">
								<div class="aui-widget-content">
									<div class="aui-widget-hd aui-list-hd aui-list-classes-hd">
										<span class="aui-widget-hd-text">Classes</span>
									</div>

									<div class="aui-widget-bd aui-list-bd">
										<ul class="content">


				                                <li class=""><a href="AUI~event~input.html" title="AUI~event~input">AUI~event~input</a></li>
				                        </ul>
									</div>
								</div>
							</div>




					</div>

						<div class="aui-widget aui-list aui-list-files">
							<div class="aui-widget-content">
								<div class="aui-widget-hd aui-list-hd aui-list-files-hd">
									<span class="aui-widget-hd-text">Files</span>
								</div>

								<div class="aui-widget-bd aui-list-bd">
									<ul class="content">


			                                <li class=""><a href="aui-event-debug.js.html" title="aui-event-debug.js">aui-event-debug.js</a></li>


			                                <li class=""><a href="aui-event-input-debug.js.html" title="aui-event-input-debug.js">aui-event-input-debug.js</a></li>


			                                <li class=""><a href="aui-event-input-min.js.html" title="aui-event-input-min.js">aui-event-input-min.js</a></li>


			                                <li class=""><a href="aui-event-input.js.html" title="aui-event-input.js">aui-event-input.js</a></li>


			                                <li class=""><a href="aui-event-min.js.html" title="aui-event-min.js">aui-event-min.js</a></li>


			                                <li class=""><a href="aui-event.js.html" title="aui-event.js">aui-event.js</a></li>


			                                <li class=""><a href="aui-form-base-debug.js.html" title="aui-form-base-debug.js">aui-form-base-debug.js</a></li>


			                                <li class=""><a href="aui-form-base-min.js.html" title="aui-form-base-min.js">aui-form-base-min.js</a></li>


			                                <li class=""><a href="aui-form-base.js.html" title="aui-form-base.js">aui-form-base.js</a></li>


			                                <li class=""><a href="aui-form-combobox-debug.js.html" title="aui-form-combobox-debug.js">aui-form-combobox-debug.js</a></li>


			                                <li class=""><a href="aui-form-combobox-min.js.html" title="aui-form-combobox-min.js">aui-form-combobox-min.js</a></li>


			                                <li class=""><a href="aui-form-combobox.js.html" title="aui-form-combobox.js">aui-form-combobox.js</a></li>


			                                <li class=""><a href="aui-form-debug.js.html" title="aui-form-debug.js">aui-form-debug.js</a></li>


			                                <li class=""><a href="aui-form-field-debug.js.html" title="aui-form-field-debug.js">aui-form-field-debug.js</a></li>


			                                <li class=""><a href="aui-form-field-min.js.html" title="aui-form-field-min.js">aui-form-field-min.js</a></li>


			                                <li class=""><a href="aui-form-field.js.html" title="aui-form-field.js">aui-form-field.js</a></li>


			                                <li class=""><a href="aui-form-min.js.html" title="aui-form-min.js">aui-form-min.js</a></li>


			                                <li class=""><a href="aui-form-textarea-debug.js.html" title="aui-form-textarea-debug.js">aui-form-textarea-debug.js</a></li>


			                                <li class=""><a href="aui-form-textarea-min.js.html" title="aui-form-textarea-min.js">aui-form-textarea-min.js</a></li>


			                                <li class=""><a href="aui-form-textarea.js.html" title="aui-form-textarea.js">aui-form-textarea.js</a></li>


			                                <li class=""><a href="aui-form-textfield-debug.js.html" title="aui-form-textfield-debug.js">aui-form-textfield-debug.js</a></li>


			                                <li class=""><a href="aui-form-textfield-min.js.html" title="aui-form-textfield-min.js">aui-form-textfield-min.js</a></li>


			                                <li class=""><a href="aui-form-textfield.js.html" title="aui-form-textfield.js">aui-form-textfield.js</a></li>


			                                <li class=""><a href="aui-form-validator-debug.js.html" title="aui-form-validator-debug.js">aui-form-validator-debug.js</a></li>


			                                <li class=""><a href="aui-form-validator-min.js.html" title="aui-form-validator-min.js">aui-form-validator-min.js</a></li>


			                                <li class=""><a href="aui-form-validator.js.html" title="aui-form-validator.js">aui-form-validator.js</a></li>


			                                <li class="selected"><a href="aui-form.js.html" title="aui-form.js">aui-form.js</a></li>
			                        </ul>
								</div>
							</div>
						</div>
				</div>
				<div class="aui-column aui-w75 aui-column-last">
					<div class="aui-column-content aui-column-content-last">


							<div id="srcout">
								<style>
									#doc3 .classopts { display:none; }
								</style>
								<div class="highlight"><pre><span class="nx">AUI</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="s1">&#39;aui-form-base&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">A</span><span class="p">)</span> <span class="p">{</span>
<span class="kd">var</span> <span class="nx">Lang</span> <span class="o">=</span> <span class="nx">A</span><span class="p">.</span><span class="nx">Lang</span><span class="p">,</span>

	<span class="nx">getClassName</span> <span class="o">=</span> <span class="nx">A</span><span class="p">.</span><span class="nx">ClassNameManager</span><span class="p">.</span><span class="nx">getClassName</span><span class="p">,</span>

	<span class="nx">NAME</span> <span class="o">=</span> <span class="s1">&#39;form&#39;</span><span class="p">,</span>

	<span class="nx">CSS_FORM</span> <span class="o">=</span> <span class="nx">getClassName</span><span class="p">(</span><span class="nx">NAME</span><span class="p">),</span>
	<span class="nx">CSS_LABELS</span> <span class="o">=</span> <span class="nx">getClassName</span><span class="p">(</span><span class="s1">&#39;field&#39;</span><span class="p">,</span> <span class="s1">&#39;labels&#39;</span><span class="p">),</span>
	<span class="nx">CSS_LABELS_INLINE</span> <span class="o">=</span> <span class="nx">getClassName</span><span class="p">(</span><span class="s1">&#39;field&#39;</span><span class="p">,</span> <span class="s1">&#39;labels&#39;</span><span class="p">,</span> <span class="s1">&#39;inline&#39;</span><span class="p">),</span>

	<span class="nx">CSS_LABEL_ALIGN</span> <span class="o">=</span> <span class="p">{</span>
		<span class="nx">left</span><span class="o">:</span> <span class="p">[</span><span class="nx">CSS_LABELS</span><span class="p">,</span> <span class="s1">&#39;left&#39;</span><span class="p">].</span><span class="nx">join</span><span class="p">(</span><span class="s1">&#39;-&#39;</span><span class="p">),</span>
		<span class="nx">right</span><span class="o">:</span> <span class="p">[</span><span class="nx">CSS_LABELS</span><span class="p">,</span> <span class="s1">&#39;right&#39;</span><span class="p">].</span><span class="nx">join</span><span class="p">(</span><span class="s1">&#39;-&#39;</span><span class="p">),</span>
		<span class="nx">top</span><span class="o">:</span> <span class="p">[</span><span class="nx">CSS_LABELS</span><span class="p">,</span> <span class="s1">&#39;top&#39;</span><span class="p">].</span><span class="nx">join</span><span class="p">(</span><span class="s1">&#39;-&#39;</span><span class="p">)</span>
	<span class="p">};</span>

<span class="kd">var</span> <span class="nx">Form</span> <span class="o">=</span> <span class="nx">A</span><span class="p">.</span><span class="nx">Component</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span>
	<span class="p">{</span>
		<span class="nx">NAME</span><span class="o">:</span> <span class="nx">NAME</span><span class="p">,</span>

		<span class="nx">ATTRS</span><span class="o">:</span> <span class="p">{</span>
			<span class="nx">action</span><span class="o">:</span> <span class="p">{</span>
				<span class="nx">value</span><span class="o">:</span> <span class="nx">location</span><span class="p">.</span><span class="nx">href</span><span class="p">,</span>
				<span class="nx">getter</span><span class="o">:</span> <span class="s1">&#39;_attributeGetter&#39;</span><span class="p">,</span>
				<span class="nx">setter</span><span class="o">:</span> <span class="s1">&#39;_attributeSetter&#39;</span>
			<span class="p">},</span>
			<span class="nx">id</span><span class="o">:</span> <span class="p">{},</span>
			<span class="nx">method</span><span class="o">:</span> <span class="p">{</span>
				<span class="nx">value</span><span class="o">:</span> <span class="s1">&#39;POST&#39;</span><span class="p">,</span>
				<span class="nx">getter</span><span class="o">:</span> <span class="s1">&#39;_attributeGetter&#39;</span><span class="p">,</span>
				<span class="nx">setter</span><span class="o">:</span> <span class="s1">&#39;_attributeSetter&#39;</span>
			<span class="p">},</span>
			<span class="nx">monitorChanges</span><span class="o">:</span> <span class="p">{</span>
				<span class="nx">value</span><span class="o">:</span> <span class="kc">false</span>
			<span class="p">},</span>
			<span class="nx">nativeSubmit</span><span class="o">:</span> <span class="p">{</span>
				<span class="nx">value</span><span class="o">:</span> <span class="kc">false</span>
			<span class="p">},</span>

			<span class="nx">values</span><span class="o">:</span> <span class="p">{</span>
				<span class="nx">getter</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
					<span class="kd">var</span> <span class="nx">instance</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>

					<span class="kd">var</span> <span class="nx">values</span> <span class="o">=</span> <span class="nx">A</span><span class="p">.</span><span class="nx">io</span><span class="p">.</span><span class="nx">_serialize</span><span class="p">(</span><span class="nx">instance</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;contentBox&#39;</span><span class="p">).</span><span class="nx">getDOM</span><span class="p">());</span>

					<span class="k">return</span> <span class="nx">A</span><span class="p">.</span><span class="nx">QueryString</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">values</span><span class="p">);</span>
				<span class="p">},</span>

				<span class="nx">setter</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
					<span class="kd">var</span> <span class="nx">instance</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>

					<span class="kd">var</span> <span class="nx">setFields</span> <span class="o">=</span> <span class="nx">instance</span><span class="p">.</span><span class="nx">_setFieldsObject</span><span class="p">;</span>

					<span class="kd">var</span> <span class="nx">monitorChanges</span> <span class="o">=</span> <span class="nx">instance</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;monitorChanges&#39;</span><span class="p">);</span>

					<span class="k">if</span> <span class="p">(</span><span class="nx">Lang</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="nx">value</span><span class="p">))</span> <span class="p">{</span>
						<span class="nx">setFields</span> <span class="o">=</span> <span class="nx">instance</span><span class="p">.</span><span class="nx">_setFieldsArray</span><span class="p">;</span>
					<span class="p">}</span>

					<span class="nx">A</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">value</span><span class="p">,</span> <span class="nx">A</span><span class="p">.</span><span class="nx">rbind</span><span class="p">(</span><span class="nx">setFields</span><span class="p">,</span> <span class="nx">instance</span><span class="p">,</span> <span class="nx">monitorChanges</span><span class="p">));</span>

					<span class="k">return</span> <span class="nx">A</span><span class="p">.</span><span class="nx">Attribute</span><span class="p">.</span><span class="nx">INVALID_VALUE</span><span class="p">;</span>
				<span class="p">}</span>
			<span class="p">},</span>

			<span class="nx">fieldValues</span><span class="o">:</span> <span class="p">{</span>
				<span class="nx">getter</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
					<span class="kd">var</span> <span class="nx">instance</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>

					<span class="kd">var</span> <span class="nx">obj</span> <span class="o">=</span> <span class="p">{};</span>

					<span class="nx">instance</span><span class="p">.</span><span class="nx">fields</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span>
						<span class="kd">function</span><span class="p">(</span><span class="nx">item</span><span class="p">,</span> <span class="nx">index</span><span class="p">,</span> <span class="nx">collection</span><span class="p">)</span> <span class="p">{</span>
							<span class="nx">obj</span><span class="p">[</span><span class="nx">item</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">)]</span> <span class="o">=</span> <span class="nx">item</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;value&#39;</span><span class="p">);</span>
						<span class="p">}</span>
					<span class="p">);</span>

					<span class="k">return</span> <span class="nx">obj</span><span class="p">;</span>
				<span class="p">}</span>
			<span class="p">},</span>

			<span class="nx">labelAlign</span><span class="o">:</span> <span class="p">{</span>
				<span class="nx">value</span><span class="o">:</span> <span class="s1">&#39;&#39;</span>
			<span class="p">}</span>
		<span class="p">},</span>

		<span class="nx">HTML_PARSER</span><span class="o">:</span> <span class="p">{</span>
			<span class="nx">action</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">contentBox</span><span class="p">)</span> <span class="p">{</span>
				<span class="kd">var</span> <span class="nx">instance</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>

				<span class="k">return</span> <span class="nx">instance</span><span class="p">.</span><span class="nx">_attributeGetter</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="s1">&#39;action&#39;</span><span class="p">);</span>
			<span class="p">},</span>

			<span class="nx">method</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">contentBox</span><span class="p">)</span> <span class="p">{</span>
				<span class="kd">var</span> <span class="nx">instance</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>

				<span class="k">return</span> <span class="nx">instance</span><span class="p">.</span><span class="nx">_attributeGetter</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="s1">&#39;method&#39;</span><span class="p">);</span>
			<span class="p">}</span>
		<span class="p">},</span>

		<span class="nx">prototype</span><span class="o">:</span> <span class="p">{</span>
			<span class="nx">CONTENT_TEMPLATE</span><span class="o">:</span> <span class="s1">&#39;&lt;form&gt;&lt;/form&gt;&#39;</span><span class="p">,</span>

			<span class="nx">initializer</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
				<span class="kd">var</span> <span class="nx">instance</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>

				<span class="nx">instance</span><span class="p">.</span><span class="nx">fields</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">A</span><span class="p">.</span><span class="nx">DataSet</span><span class="p">(</span>
					<span class="p">{</span>
						<span class="nx">getKey</span><span class="o">:</span> <span class="nx">instance</span><span class="p">.</span><span class="nx">_getNodeId</span>
					<span class="p">}</span>
				<span class="p">);</span>
			<span class="p">},</span>

			<span class="nx">renderUI</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
				<span class="kd">var</span> <span class="nx">instance</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>

				<span class="nx">instance</span><span class="p">.</span><span class="nx">_renderForm</span><span class="p">();</span>
			<span class="p">},</span>

			<span class="nx">bindUI</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
				<span class="kd">var</span> <span class="nx">instance</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>

				<span class="kd">var</span> <span class="nx">nativeSubmit</span> <span class="o">=</span> <span class="nx">instance</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;nativeSubmit&#39;</span><span class="p">);</span>

				<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">nativeSubmit</span><span class="p">)</span> <span class="p">{</span>
					<span class="nx">instance</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;contentBox&#39;</span><span class="p">).</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;submit&#39;</span><span class="p">,</span> <span class="nx">instance</span><span class="p">.</span><span class="nx">_onSubmit</span><span class="p">);</span>
				<span class="p">}</span>

				<span class="nx">instance</span><span class="p">.</span><span class="nx">after</span><span class="p">(</span><span class="s1">&#39;disabledChange&#39;</span><span class="p">,</span> <span class="nx">instance</span><span class="p">.</span><span class="nx">_afterDisabledChange</span><span class="p">);</span>
				<span class="nx">instance</span><span class="p">.</span><span class="nx">after</span><span class="p">(</span><span class="s1">&#39;labelAlignChange&#39;</span><span class="p">,</span> <span class="nx">instance</span><span class="p">.</span><span class="nx">_afterLabelAlignChange</span><span class="p">);</span>
				<span class="nx">instance</span><span class="p">.</span><span class="nx">after</span><span class="p">(</span><span class="s1">&#39;nativeSubmitChange&#39;</span><span class="p">,</span> <span class="nx">instance</span><span class="p">.</span><span class="nx">_afterNativeSubmitChange</span><span class="p">);</span>
			<span class="p">},</span>

			<span class="nx">syncUI</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
				<span class="kd">var</span> <span class="nx">instance</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>

				<span class="kd">var</span> <span class="nx">node</span> <span class="o">=</span> <span class="nx">instance</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;contentBox&#39;</span><span class="p">);</span>

				<span class="nx">instance</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="nx">node</span><span class="p">.</span><span class="nx">guid</span><span class="p">());</span>

				<span class="nx">instance</span><span class="p">.</span><span class="nx">_uiSetLabelAlign</span><span class="p">(</span><span class="nx">instance</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;labelAlign&#39;</span><span class="p">));</span>
			<span class="p">},</span>

			<span class="nx">add</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">fields</span><span class="p">,</span> <span class="nx">render</span><span class="p">)</span> <span class="p">{</span>
				<span class="kd">var</span> <span class="nx">instance</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>

				<span class="kd">var</span> <span class="nx">args</span> <span class="o">=</span> <span class="nx">A</span><span class="p">.</span><span class="nb">Array</span><span class="p">(</span><span class="nx">fields</span><span class="p">);</span>
				<span class="kd">var</span> <span class="nx">length</span> <span class="o">=</span> <span class="nx">args</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
				<span class="kd">var</span> <span class="nx">field</span><span class="p">;</span>

				<span class="kd">var</span> <span class="nx">fields</span> <span class="o">=</span> <span class="nx">instance</span><span class="p">.</span><span class="nx">fields</span><span class="p">;</span>

				<span class="kd">var</span> <span class="nx">contentBox</span> <span class="o">=</span> <span class="nx">instance</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;contentBox&#39;</span><span class="p">);</span>

				<span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">args</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
					<span class="nx">field</span> <span class="o">=</span> <span class="nx">args</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>

					<span class="nx">field</span> <span class="o">=</span> <span class="nx">A</span><span class="p">.</span><span class="nx">Field</span><span class="p">.</span><span class="nx">getField</span><span class="p">(</span><span class="nx">field</span><span class="p">);</span>

					<span class="k">if</span> <span class="p">(</span><span class="nx">field</span> <span class="o">&amp;&amp;</span> <span class="nx">fields</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="nx">field</span><span class="p">)</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
						<span class="nx">fields</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">field</span><span class="p">);</span>

						<span class="k">if</span> <span class="p">(</span><span class="nx">render</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">field</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;rendered&#39;</span><span class="p">))</span> <span class="p">{</span>
							<span class="kd">var</span> <span class="nx">node</span> <span class="o">=</span> <span class="nx">field</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;node&#39;</span><span class="p">);</span>

							<span class="kd">var</span> <span class="nx">location</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>

							<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">node</span><span class="p">.</span><span class="nx">inDoc</span><span class="p">())</span> <span class="p">{</span>
								<span class="nx">location</span> <span class="o">=</span> <span class="nx">contentBox</span><span class="p">;</span>
							<span class="p">}</span>

							<span class="nx">field</span><span class="p">.</span><span class="nx">render</span><span class="p">(</span><span class="nx">location</span><span class="p">);</span>
						<span class="p">}</span>
					<span class="p">}</span>
				<span class="p">}</span>
			<span class="p">},</span>

			<span class="nx">clearInvalid</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
				<span class="kd">var</span> <span class="nx">instance</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>

				<span class="nx">instance</span><span class="p">.</span><span class="nx">fields</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span>
					<span class="kd">function</span><span class="p">(</span><span class="nx">item</span><span class="p">,</span> <span class="nx">index</span><span class="p">,</span> <span class="nx">collection</span><span class="p">)</span> <span class="p">{</span>
						<span class="nx">item</span><span class="p">.</span><span class="nx">clearInvalid</span><span class="p">();</span>
					<span class="p">}</span>
				<span class="p">);</span>
			<span class="p">},</span>

			<span class="nx">getField</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">id</span><span class="p">)</span> <span class="p">{</span>
				<span class="kd">var</span> <span class="nx">instance</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>

				<span class="kd">var</span> <span class="nx">field</span><span class="p">;</span>

				<span class="k">if</span> <span class="p">(</span><span class="nx">id</span><span class="p">)</span> <span class="p">{</span>
					<span class="kd">var</span> <span class="nx">fields</span> <span class="o">=</span> <span class="nx">instance</span><span class="p">.</span><span class="nx">fields</span><span class="p">;</span>

					<span class="nx">field</span> <span class="o">=</span> <span class="nx">fields</span><span class="p">.</span><span class="nx">item</span><span class="p">(</span><span class="nx">id</span><span class="p">);</span>

					<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">Lang</span><span class="p">.</span><span class="nx">isObject</span><span class="p">(</span><span class="nx">field</span><span class="p">))</span> <span class="p">{</span>
						<span class="nx">fields</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span>
							<span class="kd">function</span><span class="p">(</span><span class="nx">item</span><span class="p">,</span> <span class="nx">index</span><span class="p">,</span> <span class="nx">collection</span><span class="p">)</span> <span class="p">{</span>
								<span class="k">if</span> <span class="p">(</span><span class="nx">item</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="nx">id</span> <span class="o">||</span> <span class="nx">item</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="nx">id</span><span class="p">)</span> <span class="p">{</span>
									<span class="nx">field</span> <span class="o">=</span> <span class="nx">item</span><span class="p">;</span>

									<span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
								<span class="p">}</span>
							<span class="p">}</span>
						<span class="p">);</span>
					<span class="p">}</span>
				<span class="p">}</span>

				<span class="k">return</span> <span class="nx">field</span><span class="p">;</span>
			<span class="p">},</span>

			<span class="nx">invoke</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">method</span><span class="p">,</span> <span class="nx">args</span><span class="p">)</span> <span class="p">{</span>
				<span class="kd">var</span> <span class="nx">instance</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>

				<span class="k">return</span> <span class="nx">instance</span><span class="p">.</span><span class="nx">fields</span><span class="p">.</span><span class="nx">invoke</span><span class="p">(</span><span class="nx">method</span><span class="p">,</span> <span class="nx">args</span><span class="p">);</span>
			<span class="p">},</span>

			<span class="nx">isDirty</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
				<span class="kd">var</span> <span class="nx">instance</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>

				<span class="kd">var</span> <span class="nx">dirty</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>

				<span class="nx">instance</span><span class="p">.</span><span class="nx">fields</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span>
					<span class="kd">function</span><span class="p">(</span><span class="nx">item</span><span class="p">,</span> <span class="nx">index</span><span class="p">,</span> <span class="nx">collection</span><span class="p">)</span> <span class="p">{</span>
						<span class="k">if</span> <span class="p">(</span><span class="nx">item</span><span class="p">.</span><span class="nx">isDirty</span><span class="p">())</span> <span class="p">{</span>
							<span class="nx">dirty</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>

							<span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
						<span class="p">}</span>
					<span class="p">}</span>
				<span class="p">);</span>

				<span class="k">return</span> <span class="nx">dirty</span><span class="p">;</span>
			<span class="p">},</span>

			<span class="nx">isValid</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
				<span class="kd">var</span> <span class="nx">instance</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>

				<span class="kd">var</span> <span class="nx">valid</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>

				<span class="nx">instance</span><span class="p">.</span><span class="nx">fields</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span>
					<span class="kd">function</span><span class="p">(</span><span class="nx">item</span><span class="p">,</span> <span class="nx">index</span><span class="p">,</span> <span class="nx">collection</span><span class="p">)</span> <span class="p">{</span>
						<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">item</span><span class="p">.</span><span class="nx">isValid</span><span class="p">())</span> <span class="p">{</span>
							<span class="nx">valid</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>

							<span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
						<span class="p">}</span>
					<span class="p">}</span>
				<span class="p">);</span>

				<span class="k">return</span> <span class="nx">valid</span><span class="p">;</span>
			<span class="p">},</span>

			<span class="nx">markInvalid</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
				<span class="kd">var</span> <span class="nx">instance</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>

				<span class="kd">var</span> <span class="nx">markFields</span> <span class="o">=</span> <span class="nx">instance</span><span class="p">.</span><span class="nx">_markInvalidObject</span><span class="p">;</span>

				<span class="k">if</span> <span class="p">(</span><span class="nx">Lang</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="nx">value</span><span class="p">))</span> <span class="p">{</span>
					<span class="nx">markFields</span> <span class="o">=</span> <span class="nx">instance</span><span class="p">.</span><span class="nx">_markInvalidArray</span><span class="p">;</span>
				<span class="p">}</span>

				<span class="nx">A</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">value</span><span class="p">,</span> <span class="nx">markFields</span><span class="p">,</span> <span class="nx">instance</span><span class="p">);</span>

				<span class="k">return</span> <span class="nx">instance</span><span class="p">;</span>
			<span class="p">},</span>

			<span class="nx">remove</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">field</span><span class="p">,</span> <span class="nx">fromMarkup</span><span class="p">)</span> <span class="p">{</span>
				<span class="kd">var</span> <span class="nx">instance</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>

				<span class="nx">instance</span><span class="p">.</span><span class="nx">fields</span><span class="p">.</span><span class="nx">remove</span><span class="p">(</span><span class="nx">field</span><span class="p">);</span>

				<span class="k">if</span> <span class="p">(</span><span class="nx">fromMarkup</span><span class="p">)</span> <span class="p">{</span>
					<span class="nx">field</span> <span class="o">=</span> <span class="nx">instance</span><span class="p">.</span><span class="nx">getField</span><span class="p">(</span><span class="nx">field</span><span class="p">);</span>

					<span class="k">if</span> <span class="p">(</span><span class="nx">field</span><span class="p">)</span> <span class="p">{</span>
						<span class="nx">field</span><span class="p">.</span><span class="nx">destroy</span><span class="p">();</span>
					<span class="p">}</span>
				<span class="p">}</span>

				<span class="k">return</span> <span class="nx">instance</span><span class="p">;</span>
			<span class="p">},</span>

			<span class="nx">resetValues</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
				<span class="kd">var</span> <span class="nx">instance</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>

				<span class="nx">instance</span><span class="p">.</span><span class="nx">fields</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span>
					<span class="kd">function</span><span class="p">(</span><span class="nx">item</span><span class="p">,</span> <span class="nx">index</span><span class="p">,</span> <span class="nx">collection</span><span class="p">)</span> <span class="p">{</span>
						<span class="nx">item</span><span class="p">.</span><span class="nx">resetValue</span><span class="p">();</span>
					<span class="p">}</span>
				<span class="p">);</span>
			<span class="p">},</span>

			<span class="nx">submit</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">config</span><span class="p">)</span> <span class="p">{</span>
				<span class="kd">var</span> <span class="nx">instance</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>

				<span class="kd">var</span> <span class="nx">valid</span> <span class="o">=</span> <span class="nx">instance</span><span class="p">.</span><span class="nx">isValid</span><span class="p">();</span>

				<span class="k">if</span> <span class="p">(</span><span class="nx">valid</span><span class="p">)</span> <span class="p">{</span>
					<span class="k">if</span> <span class="p">(</span><span class="nx">instance</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;nativeSubmit&#39;</span><span class="p">))</span> <span class="p">{</span>
						<span class="nx">instance</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;contentBox&#39;</span><span class="p">).</span><span class="nx">submit</span><span class="p">();</span>
					<span class="p">}</span>
					<span class="k">else</span> <span class="p">{</span>
						<span class="nx">config</span> <span class="o">=</span> <span class="nx">config</span> <span class="o">||</span> <span class="p">{};</span>

						<span class="nx">A</span><span class="p">.</span><span class="nx">mix</span><span class="p">(</span>
							<span class="nx">config</span><span class="p">,</span>
							<span class="p">{</span>
								<span class="nx">id</span><span class="o">:</span> <span class="nx">instance</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">)</span>
							<span class="p">}</span>
						<span class="p">);</span>

						<span class="nx">A</span><span class="p">.</span><span class="nx">io</span><span class="p">(</span>
							<span class="nx">instance</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;action&#39;</span><span class="p">),</span>
							<span class="p">{</span>
								<span class="nx">form</span><span class="o">:</span> <span class="nx">config</span><span class="p">,</span>
								<span class="nx">method</span><span class="o">:</span> <span class="nx">instance</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;method&#39;</span><span class="p">),</span>
								<span class="nx">on</span><span class="o">:</span> <span class="p">{</span>
									<span class="nx">complete</span><span class="o">:</span> <span class="nx">A</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="nx">instance</span><span class="p">.</span><span class="nx">_onSubmitComplete</span><span class="p">,</span> <span class="nx">instance</span><span class="p">),</span>
									<span class="nx">end</span><span class="o">:</span> <span class="nx">A</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="nx">instance</span><span class="p">.</span><span class="nx">_onSubmitEnd</span><span class="p">,</span> <span class="nx">instance</span><span class="p">),</span>
									<span class="nx">failure</span><span class="o">:</span> <span class="nx">A</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="nx">instance</span><span class="p">.</span><span class="nx">_onSubmitFailure</span><span class="p">,</span> <span class="nx">instance</span><span class="p">),</span>
									<span class="nx">start</span><span class="o">:</span> <span class="nx">A</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="nx">instance</span><span class="p">.</span><span class="nx">_onSubmitStart</span><span class="p">,</span> <span class="nx">instance</span><span class="p">),</span>
									<span class="nx">success</span><span class="o">:</span> <span class="nx">A</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="nx">instance</span><span class="p">.</span><span class="nx">_onSubmitSuccess</span><span class="p">,</span> <span class="nx">instance</span><span class="p">)</span>
								<span class="p">}</span>
							<span class="p">}</span>
						<span class="p">);</span>
					<span class="p">}</span>
				<span class="p">}</span>

				<span class="k">return</span> <span class="nx">valid</span><span class="p">;</span>
			<span class="p">},</span>

			<span class="nx">_afterDisabledChange</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
				<span class="kd">var</span> <span class="nx">instance</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>

				<span class="kd">var</span> <span class="nx">action</span> <span class="o">=</span> <span class="s1">&#39;disable&#39;</span><span class="p">;</span>

				<span class="k">if</span> <span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">newVal</span><span class="p">)</span> <span class="p">{</span>
					<span class="nx">action</span> <span class="o">=</span> <span class="s1">&#39;enable&#39;</span><span class="p">;</span>
				<span class="p">}</span>

				<span class="nx">instance</span><span class="p">.</span><span class="nx">fields</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span>
					<span class="kd">function</span><span class="p">(</span><span class="nx">item</span><span class="p">,</span> <span class="nx">index</span><span class="p">,</span> <span class="nx">collection</span><span class="p">)</span> <span class="p">{</span>
						<span class="nx">item</span><span class="p">[</span><span class="nx">action</span><span class="p">];</span>
					<span class="p">}</span>
				<span class="p">);</span>
			<span class="p">},</span>

			<span class="nx">_afterLabelAlignChange</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
				<span class="kd">var</span> <span class="nx">instance</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>

				<span class="nx">instance</span><span class="p">.</span><span class="nx">_uiSetLabelAlign</span><span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">newVal</span><span class="p">,</span> <span class="nx">event</span><span class="p">.</span><span class="nx">prevVal</span><span class="p">)</span>
			<span class="p">},</span>

			<span class="nx">_afterNativeSubmitChange</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
				<span class="kd">var</span> <span class="nx">instance</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>

				<span class="kd">var</span> <span class="nx">contentBox</span> <span class="o">=</span> <span class="nx">instance</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;contentBox&#39;</span><span class="p">);</span>

				<span class="kd">var</span> <span class="nx">action</span> <span class="o">=</span> <span class="s1">&#39;on&#39;</span><span class="p">;</span>

				<span class="k">if</span> <span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">newVal</span><span class="p">)</span> <span class="p">{</span>
					<span class="nx">action</span> <span class="o">=</span> <span class="s1">&#39;detach&#39;</span><span class="p">;</span>
				<span class="p">}</span>

				<span class="nx">contentBox</span><span class="p">[</span><span class="nx">action</span><span class="p">](</span><span class="s1">&#39;submit&#39;</span><span class="p">,</span> <span class="nx">instance</span><span class="p">.</span><span class="nx">_onSubmit</span><span class="p">);</span>
			<span class="p">},</span>

			<span class="nx">_attributeGetter</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">,</span> <span class="nx">key</span><span class="p">)</span> <span class="p">{</span>
				<span class="kd">var</span> <span class="nx">instance</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>

				<span class="k">return</span> <span class="nx">instance</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;contentBox&#39;</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="nx">key</span><span class="p">);</span>
			<span class="p">},</span>

			<span class="nx">_attributeSetter</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">,</span> <span class="nx">key</span><span class="p">)</span> <span class="p">{</span>
				<span class="kd">var</span> <span class="nx">instance</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>

				<span class="nx">instance</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;contentBox&#39;</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="nx">key</span><span class="p">,</span> <span class="nx">value</span><span class="p">);</span>

				<span class="k">return</span> <span class="nx">value</span><span class="p">;</span>
			<span class="p">},</span>

			<span class="nx">_getNodeId</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">obj</span><span class="p">)</span> <span class="p">{</span>
				<span class="kd">var</span> <span class="nx">node</span><span class="p">;</span>

				<span class="k">if</span> <span class="p">(</span><span class="nx">obj</span> <span class="k">instanceof</span> <span class="nx">A</span><span class="p">.</span><span class="nx">Field</span><span class="p">)</span> <span class="p">{</span>
					<span class="nx">node</span> <span class="o">=</span> <span class="nx">obj</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;node&#39;</span><span class="p">);</span>
				<span class="p">}</span>
				<span class="k">else</span> <span class="p">{</span>
					<span class="nx">node</span> <span class="o">=</span> <span class="nx">A</span><span class="p">.</span><span class="nx">one</span><span class="p">(</span><span class="nx">obj</span><span class="p">);</span>
				<span class="p">}</span>
				<span class="kd">var</span> <span class="nx">guid</span> <span class="o">=</span> <span class="nx">node</span> <span class="o">&amp;&amp;</span> <span class="nx">node</span><span class="p">.</span><span class="nx">guid</span><span class="p">();</span>

				<span class="k">return</span> <span class="nx">guid</span><span class="p">;</span>
			<span class="p">},</span>

			<span class="nx">_onSubmit</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
				<span class="nx">event</span><span class="p">.</span><span class="nx">halt</span><span class="p">();</span>
			<span class="p">},</span>

			<span class="nx">_onSubmitComplete</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
				<span class="kd">var</span> <span class="nx">instance</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>

				<span class="nx">instance</span><span class="p">.</span><span class="nx">fire</span><span class="p">(</span>
					<span class="s1">&#39;complete&#39;</span><span class="p">,</span>
					 <span class="p">{</span>
					 	<span class="nx">ioEvent</span><span class="o">:</span> <span class="nx">event</span>
					 <span class="p">}</span>
				<span class="p">);</span>
			<span class="p">},</span>

			<span class="nx">_onSubmitEnd</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
				<span class="kd">var</span> <span class="nx">instance</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>

				<span class="nx">instance</span><span class="p">.</span><span class="nx">fire</span><span class="p">(</span>
					<span class="s1">&#39;end&#39;</span><span class="p">,</span>
					 <span class="p">{</span>
					 	<span class="nx">ioEvent</span><span class="o">:</span> <span class="nx">event</span>
					 <span class="p">}</span>
				<span class="p">);</span>
			<span class="p">},</span>

			<span class="nx">_onSubmitFailure</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
				<span class="kd">var</span> <span class="nx">instance</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>

				<span class="nx">instance</span><span class="p">.</span><span class="nx">fire</span><span class="p">(</span>
					<span class="s1">&#39;failure&#39;</span><span class="p">,</span>
					 <span class="p">{</span>
					 	<span class="nx">ioEvent</span><span class="o">:</span> <span class="nx">event</span>
					 <span class="p">}</span>
				<span class="p">);</span>
			<span class="p">},</span>

			<span class="nx">_onSubmitStart</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
				<span class="kd">var</span> <span class="nx">instance</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>

				<span class="nx">instance</span><span class="p">.</span><span class="nx">fire</span><span class="p">(</span>
					<span class="s1">&#39;start&#39;</span><span class="p">,</span>
					 <span class="p">{</span>
					 	<span class="nx">ioEvent</span><span class="o">:</span> <span class="nx">event</span>
					 <span class="p">}</span>
				<span class="p">);</span>
			<span class="p">},</span>

			<span class="nx">_onSubmitSuccess</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
				<span class="kd">var</span> <span class="nx">instance</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>

				<span class="nx">instance</span><span class="p">.</span><span class="nx">fire</span><span class="p">(</span>
					<span class="s1">&#39;success&#39;</span><span class="p">,</span>
					 <span class="p">{</span>
					 	<span class="nx">ioEvent</span><span class="o">:</span> <span class="nx">event</span>
					 <span class="p">}</span>
				<span class="p">);</span>
			<span class="p">},</span>

			<span class="nx">_renderForm</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
				<span class="kd">var</span> <span class="nx">instance</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>

				<span class="nx">instance</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;contentBox&#39;</span><span class="p">).</span><span class="nx">removeClass</span><span class="p">(</span><span class="nx">CSS_FORM</span><span class="p">);</span>
			<span class="p">},</span>

			<span class="nx">_markInvalidArray</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">item</span><span class="p">,</span> <span class="nx">index</span><span class="p">,</span> <span class="nx">collection</span><span class="p">)</span> <span class="p">{</span>
				<span class="kd">var</span> <span class="nx">instance</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>

				<span class="kd">var</span> <span class="nx">field</span> <span class="o">=</span> <span class="nx">instance</span><span class="p">.</span><span class="nx">getField</span><span class="p">(</span><span class="nx">item</span><span class="p">.</span><span class="nx">id</span><span class="p">);</span>

				<span class="k">if</span> <span class="p">(</span><span class="nx">field</span><span class="p">)</span> <span class="p">{</span>
					<span class="nx">field</span><span class="p">.</span><span class="nx">markInvalid</span><span class="p">(</span><span class="nx">item</span><span class="p">.</span><span class="nx">message</span><span class="p">);</span>
				<span class="p">}</span>
			<span class="p">},</span>

			<span class="nx">_markInvalidObject</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">item</span><span class="p">,</span> <span class="nx">index</span><span class="p">,</span> <span class="nx">collection</span><span class="p">)</span> <span class="p">{</span>
				<span class="kd">var</span> <span class="nx">instance</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>

				<span class="kd">var</span> <span class="nx">field</span> <span class="o">=</span> <span class="p">(</span><span class="o">!</span><span class="nx">Lang</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span><span class="nx">item</span><span class="p">))</span> <span class="o">&amp;&amp;</span> <span class="nx">instance</span><span class="p">.</span><span class="nx">getField</span><span class="p">(</span><span class="nx">index</span><span class="p">);</span>

				<span class="k">if</span> <span class="p">(</span><span class="nx">field</span><span class="p">)</span> <span class="p">{</span>
					<span class="nx">field</span><span class="p">.</span><span class="nx">markInvalid</span><span class="p">(</span><span class="nx">item</span><span class="p">);</span>
				<span class="p">}</span>
			<span class="p">},</span>

			<span class="nx">_setFieldsArray</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">item</span><span class="p">,</span> <span class="nx">index</span><span class="p">,</span> <span class="nx">collection</span><span class="p">,</span> <span class="nx">monitorChanges</span><span class="p">)</span> <span class="p">{</span>
				<span class="kd">var</span> <span class="nx">instance</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>

				<span class="kd">var</span> <span class="nx">field</span> <span class="o">=</span> <span class="nx">instance</span><span class="p">.</span><span class="nx">getField</span><span class="p">(</span><span class="nx">item</span><span class="p">.</span><span class="nx">id</span><span class="p">);</span>

				<span class="k">if</span> <span class="p">(</span><span class="nx">field</span><span class="p">)</span> <span class="p">{</span>
					<span class="nx">field</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s1">&#39;value&#39;</span><span class="p">,</span> <span class="nx">item</span><span class="p">.</span><span class="nx">value</span><span class="p">);</span>

					<span class="k">if</span> <span class="p">(</span><span class="nx">monitorChanges</span><span class="p">)</span> <span class="p">{</span>
						<span class="nx">field</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s1">&#39;prevVal&#39;</span><span class="p">,</span> <span class="nx">field</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;value&#39;</span><span class="p">));</span>
					<span class="p">}</span>
				<span class="p">}</span>
			<span class="p">},</span>

			<span class="nx">_setFieldsObject</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">item</span><span class="p">,</span> <span class="nx">index</span><span class="p">,</span> <span class="nx">collection</span><span class="p">,</span> <span class="nx">monitorChanges</span><span class="p">)</span> <span class="p">{</span>
				<span class="kd">var</span> <span class="nx">instance</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>

				<span class="kd">var</span> <span class="nx">field</span> <span class="o">=</span> <span class="p">(</span><span class="o">!</span><span class="nx">Lang</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span><span class="nx">item</span><span class="p">))</span> <span class="o">&amp;&amp;</span> <span class="nx">instance</span><span class="p">.</span><span class="nx">getField</span><span class="p">(</span><span class="nx">index</span><span class="p">);</span>

				<span class="k">if</span> <span class="p">(</span><span class="nx">field</span><span class="p">)</span> <span class="p">{</span>
					<span class="nx">field</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s1">&#39;value&#39;</span><span class="p">,</span> <span class="nx">item</span><span class="p">);</span>

					<span class="k">if</span> <span class="p">(</span><span class="nx">monitorChanges</span><span class="p">)</span> <span class="p">{</span>
						<span class="nx">field</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s1">&#39;prevVal&#39;</span><span class="p">,</span> <span class="nx">field</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;value&#39;</span><span class="p">));</span>
					<span class="p">}</span>
				<span class="p">}</span>
			<span class="p">},</span>

			<span class="nx">_uiSetLabelAlign</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">newVal</span><span class="p">,</span> <span class="nx">prevVal</span><span class="p">)</span> <span class="p">{</span>
				<span class="kd">var</span> <span class="nx">instance</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>

				<span class="kd">var</span> <span class="nx">contentBox</span> <span class="o">=</span> <span class="nx">instance</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;contentBox&#39;</span><span class="p">);</span>

				<span class="nx">contentBox</span><span class="p">.</span><span class="nx">replaceClass</span><span class="p">(</span><span class="nx">CSS_LABEL_ALIGN</span><span class="p">[</span><span class="nx">prevVal</span><span class="p">],</span> <span class="nx">CSS_LABEL_ALIGN</span><span class="p">[</span><span class="nx">newVal</span><span class="p">]);</span>

				<span class="kd">var</span> <span class="nx">action</span> <span class="o">=</span> <span class="s1">&#39;removeClass&#39;</span><span class="p">;</span>

				<span class="k">if</span> <span class="p">(</span><span class="sr">/right|left/</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">newVal</span><span class="p">))</span> <span class="p">{</span>
					<span class="nx">action</span> <span class="o">=</span> <span class="s1">&#39;addClass&#39;</span><span class="p">;</span>
				<span class="p">}</span>

				<span class="nx">contentBox</span><span class="p">[</span><span class="nx">action</span><span class="p">](</span><span class="nx">CSS_LABELS_INLINE</span><span class="p">);</span>
			<span class="p">}</span>
		<span class="p">}</span>
	<span class="p">}</span>
<span class="p">);</span>

<span class="nx">A</span><span class="p">.</span><span class="nx">Form</span> <span class="o">=</span> <span class="nx">Form</span><span class="p">;</span>

<span class="p">},</span> <span class="s1">&#39;@VERSION@&#39;</span> <span class="p">,{</span><span class="nx">requires</span><span class="o">:</span><span class="p">[</span><span class="s1">&#39;aui-base&#39;</span><span class="p">,</span><span class="s1">&#39;aui-data-set&#39;</span><span class="p">,</span><span class="s1">&#39;aui-form-field&#39;</span><span class="p">,</span><span class="s1">&#39;querystring-parse&#39;</span><span class="p">]});</span>
<span class="nx">AUI</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="s1">&#39;aui-form-combobox&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">A</span><span class="p">)</span> <span class="p">{</span>
<span class="kd">var</span> <span class="nx">Lang</span> <span class="o">=</span> <span class="nx">A</span><span class="p">.</span><span class="nx">Lang</span><span class="p">,</span>

	<span class="nx">getClassName</span> <span class="o">=</span> <span class="nx">A</span><span class="p">.</span><span class="nx">ClassNameManager</span><span class="p">.</span><span class="nx">getClassName</span><span class="p">,</span>

	<span class="nx">NAME</span> <span class="o">=</span> <span class="s1">&#39;combobox&#39;</span><span class="p">,</span>

	<span class="nx">CSS_COMBOBOX</span> <span class="o">=</span> <span class="nx">getClassName</span><span class="p">(</span><span class="nx">NAME</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">Combobox</span> <span class="o">=</span> <span class="nx">A</span><span class="p">.</span><span class="nx">Component</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span>
	<span class="p">{</span>
		<span class="nx">NAME</span><span class="o">:</span> <span class="nx">NAME</span><span class="p">,</span>

		<span class="nx">ATTRS</span><span class="o">:</span> <span class="p">{</span>
			<span class="nx">field</span><span class="o">:</span> <span class="p">{</span>
			<span class="p">},</span>

			<span class="nx">fieldWidget</span><span class="o">:</span> <span class="p">{</span>
				<span class="nx">value</span><span class="o">:</span> <span class="nx">A</span><span class="p">.</span><span class="nx">Textfield</span>
			<span class="p">},</span>

			<span class="nx">node</span><span class="o">:</span> <span class="p">{</span>
				<span class="nx">getter</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
					<span class="kd">var</span> <span class="nx">instance</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>

					<span class="k">if</span> <span class="p">(</span><span class="nx">instance</span><span class="p">.</span><span class="nx">_field</span><span class="p">)</span> <span class="p">{</span>
						<span class="k">return</span> <span class="nx">instance</span><span class="p">.</span><span class="nx">_field</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;node&#39;</span><span class="p">);</span>
					<span class="p">}</span>
				<span class="p">}</span>
			<span class="p">},</span>

			<span class="nx">icons</span><span class="o">:</span> <span class="p">{</span>
				<span class="nx">value</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;circle-triangle-b&#39;</span><span class="p">],</span>
				<span class="nx">validator</span><span class="o">:</span> <span class="nx">Lang</span><span class="p">.</span><span class="nx">isArray</span>
			<span class="p">}</span>
		<span class="p">},</span>

		<span class="nx">prototype</span><span class="o">:</span> <span class="p">{</span>
			<span class="nx">renderUI</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
				<span class="kd">var</span> <span class="nx">instance</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>

				<span class="nx">Combobox</span><span class="p">.</span><span class="nx">superclass</span><span class="p">.</span><span class="nx">renderUI</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">instance</span><span class="p">);</span>

				<span class="nx">instance</span><span class="p">.</span><span class="nx">_renderField</span><span class="p">();</span>
				<span class="nx">instance</span><span class="p">.</span><span class="nx">_renderIcons</span><span class="p">();</span>
			<span class="p">},</span>

			<span class="nx">_renderField</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
				<span class="kd">var</span> <span class="nx">instance</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>

				<span class="kd">var</span> <span class="nx">contentBox</span> <span class="o">=</span> <span class="nx">instance</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;contentBox&#39;</span><span class="p">);</span>

				<span class="kd">var</span> <span class="nx">field</span> <span class="o">=</span> <span class="nx">instance</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;field&#39;</span><span class="p">);</span>
				<span class="kd">var</span> <span class="nx">fieldWidget</span> <span class="o">=</span> <span class="nx">instance</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;fieldWidget&#39;</span><span class="p">);</span>

				<span class="nx">instance</span><span class="p">.</span><span class="nx">_field</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">fieldWidget</span><span class="p">(</span><span class="nx">field</span><span class="p">).</span><span class="nx">render</span><span class="p">();</span>

				<span class="nx">contentBox</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">instance</span><span class="p">.</span><span class="nx">_field</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;boundingBox&#39;</span><span class="p">));</span>
			<span class="p">},</span>

			<span class="nx">_renderIcons</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
				<span class="kd">var</span> <span class="nx">instance</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>

				<span class="kd">var</span> <span class="nx">icons</span> <span class="o">=</span> <span class="nx">instance</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;icons&#39;</span><span class="p">);</span>

				<span class="k">if</span> <span class="p">(</span><span class="nx">icons</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="p">{</span>
					<span class="kd">var</span> <span class="nx">toolbar</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">A</span><span class="p">.</span><span class="nx">Toolbar</span><span class="p">(</span>
						<span class="p">{</span>
							<span class="nx">children</span><span class="o">:</span> <span class="nx">icons</span>
						<span class="p">}</span>
					<span class="p">).</span><span class="nx">render</span><span class="p">(</span><span class="nx">instance</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;contentBox&#39;</span><span class="p">));</span>

					<span class="nx">instance</span><span class="p">.</span><span class="nx">icons</span> <span class="o">=</span> <span class="nx">toolbar</span><span class="p">;</span>
				<span class="p">}</span>
			<span class="p">}</span>
		<span class="p">}</span>
	<span class="p">}</span>
<span class="p">);</span>

<span class="nx">A</span><span class="p">.</span><span class="nx">Combobox</span> <span class="o">=</span> <span class="nx">Combobox</span><span class="p">;</span>

<span class="p">},</span> <span class="s1">&#39;@VERSION@&#39;</span> <span class="p">,{</span><span class="nx">skinnable</span><span class="o">:</span><span class="kc">true</span><span class="p">,</span> <span class="nx">requires</span><span class="o">:</span><span class="p">[</span><span class="s1">&#39;aui-form-textarea&#39;</span><span class="p">,</span><span class="s1">&#39;aui-toolbar&#39;</span><span class="p">]});</span>
<span class="nx">AUI</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="s1">&#39;aui-form-field&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">A</span><span class="p">)</span> <span class="p">{</span>
<span class="kd">var</span> <span class="nx">Lang</span> <span class="o">=</span> <span class="nx">A</span><span class="p">.</span><span class="nx">Lang</span><span class="p">,</span>

	<span class="nx">getClassName</span> <span class="o">=</span> <span class="nx">A</span><span class="p">.</span><span class="nx">ClassNameManager</span><span class="p">.</span><span class="nx">getClassName</span><span class="p">,</span>

	<span class="nx">NAME</span> <span class="o">=</span> <span class="s1">&#39;field&#39;</span><span class="p">,</span>

	<span class="nx">getTypeClassName</span> <span class="o">=</span> <span class="nx">A</span><span class="p">.</span><span class="nx">cached</span><span class="p">(</span>
		<span class="kd">function</span><span class="p">(</span><span class="nx">type</span><span class="p">,</span> <span class="nx">prefix</span><span class="p">)</span> <span class="p">{</span>
			<span class="kd">var</span> <span class="nx">base</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;field&#39;</span><span class="p">];</span>

			<span class="k">if</span> <span class="p">(</span><span class="nx">prefix</span><span class="p">)</span> <span class="p">{</span>
				<span class="nx">base</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">prefix</span><span class="p">);</span>
			<span class="p">}</span>

			<span class="nx">base</span> <span class="o">=</span> <span class="nx">base</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s1">&#39;-&#39;</span><span class="p">);</span>

			<span class="kd">var</span> <span class="nx">className</span> <span class="o">=</span> <span class="p">[</span><span class="nx">getClassName</span><span class="p">(</span><span class="nx">base</span><span class="p">,</span> <span class="nx">type</span><span class="p">)];</span>

			<span class="k">if</span> <span class="p">(</span><span class="nx">type</span> <span class="o">==</span> <span class="s1">&#39;password&#39;</span><span class="p">)</span> <span class="p">{</span>
				<span class="nx">className</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">getClassName</span><span class="p">(</span><span class="nx">base</span><span class="p">,</span> <span class="s1">&#39;text&#39;</span><span class="p">));</span>
			<span class="p">}</span>

			<span class="k">return</span> <span class="nx">className</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">);</span>
		<span class="p">}</span>
	<span class="p">),</span>

	<span class="nx">CSS_FIELD</span> <span class="o">=</span> <span class="nx">getClassName</span><span class="p">(</span><span class="nx">NAME</span><span class="p">),</span>
	<span class="nx">CSS_FIELD_CONTENT</span> <span class="o">=</span> <span class="nx">getClassName</span><span class="p">(</span><span class="nx">NAME</span><span class="p">,</span> <span class="s1">&#39;content&#39;</span><span class="p">),</span>
	<span class="nx">CSS_FIELD_INPUT</span> <span class="o">=</span> <span class="nx">getClassName</span><span class="p">(</span><span class="nx">NAME</span><span class="p">,</span> <span class="s1">&#39;input&#39;</span><span class="p">),</span>
	<span class="nx">CSS_FIELD_HINT</span> <span class="o">=</span> <span class="nx">getClassName</span><span class="p">(</span><span class="nx">NAME</span><span class="p">,</span> <span class="s1">&#39;hint&#39;</span><span class="p">),</span>
	<span class="nx">CSS_FIELD_INVALID</span> <span class="o">=</span> <span class="nx">getClassName</span><span class="p">(</span><span class="nx">NAME</span><span class="p">,</span> <span class="s1">&#39;invalid&#39;</span><span class="p">),</span>
	<span class="nx">CSS_FIELD_LABEL</span> <span class="o">=</span> <span class="nx">getClassName</span><span class="p">(</span><span class="nx">NAME</span><span class="p">,</span> <span class="s1">&#39;label&#39;</span><span class="p">),</span>

	<span class="nx">CSS_LABELS</span> <span class="o">=</span> <span class="nx">getClassName</span><span class="p">(</span><span class="nx">NAME</span><span class="p">,</span> <span class="s1">&#39;labels&#39;</span><span class="p">),</span>
	<span class="nx">CSS_LABELS_INLINE</span> <span class="o">=</span> <span class="nx">getClassName</span><span class="p">(</span><span class="nx">NAME</span><span class="p">,</span> <span class="s1">&#39;labels&#39;</span><span class="p">,</span> <span class="s1">&#39;inline&#39;</span><span class="p">),</span>

	<span class="nx">CSS_LABEL_ALIGN</span> <span class="o">=</span> <span class="p">{</span>
		<span class="nx">left</span><span class="o">:</span> <span class="p">[</span><span class="nx">CSS_LABELS</span><span class="p">,</span> <span class="s1">&#39;left&#39;</span><span class="p">].</span><span class="nx">join</span><span class="p">(</span><span class="s1">&#39;-&#39;</span><span class="p">),</span>
		<span class="nx">right</span><span class="o">:</span> <span class="p">[</span><span class="nx">CSS_LABELS</span><span class="p">,</span> <span class="s1">&#39;right&#39;</span><span class="p">].</span><span class="nx">join</span><span class="p">(</span><span class="s1">&#39;-&#39;</span><span class="p">),</span>
		<span class="nx">top</span><span class="o">:</span> <span class="p">[</span><span class="nx">CSS_LABELS</span><span class="p">,</span> <span class="s1">&#39;top&#39;</span><span class="p">].</span><span class="nx">join</span><span class="p">(</span><span class="s1">&#39;-&#39;</span><span class="p">)</span>
	<span class="p">},</span>

	<span class="nx">REGEX_INLINE_LABEL</span> <span class="o">=</span> <span class="sr">/left|right/</span><span class="p">,</span>

	<span class="nx">TPL_BOUNDING_BOX</span> <span class="o">=</span> <span class="s1">&#39;&lt;span class=&quot;&#39;</span> <span class="o">+</span> <span class="nx">CSS_FIELD</span> <span class="o">+</span> <span class="s1">&#39;&quot;&gt;&lt;/span&gt;&#39;</span><span class="p">,</span>
	<span class="nx">TPL_CONTENT_BOX</span> <span class="o">=</span> <span class="s1">&#39;&lt;span class=&quot;&#39;</span> <span class="o">+</span> <span class="nx">CSS_FIELD_CONTENT</span> <span class="o">+</span> <span class="s1">&#39;&quot;&gt;&lt;/span&gt;&#39;</span><span class="p">,</span>
	<span class="nx">TPL_FIELD_HINT</span> <span class="o">=</span> <span class="s1">&#39;&lt;span class=&quot;&#39;</span> <span class="o">+</span> <span class="nx">CSS_FIELD_HINT</span> <span class="o">+</span> <span class="s1">&#39;&quot;&gt;&lt;/span&gt;&#39;</span><span class="p">,</span>
	<span class="nx">TPL_INPUT</span> <span class="o">=</span> <span class="s1">&#39;&lt;input autocomplete=&quot;off&quot; class=&quot;{cssClass}&quot; id=&quot;{id}&quot; name=&quot;{name}&quot; type=&quot;{type}&quot; /&gt;&#39;</span><span class="p">,</span>
	<span class="nx">TPL_LABEL</span> <span class="o">=</span> <span class="s1">&#39;&lt;label class=&quot;&#39;</span> <span class="o">+</span> <span class="nx">CSS_FIELD_LABEL</span> <span class="o">+</span> <span class="s1">&#39;&quot;&gt;&lt;/label&gt;&#39;</span><span class="p">,</span>

	<span class="nx">_FIELD_INSTANCES</span> <span class="o">=</span> <span class="p">{};</span>

<span class="kd">var</span> <span class="nx">Field</span> <span class="o">=</span> <span class="nx">A</span><span class="p">.</span><span class="nx">Component</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span>
	<span class="p">{</span>
		<span class="nx">NAME</span><span class="o">:</span> <span class="nx">NAME</span><span class="p">,</span>

		<span class="nx">ATTRS</span><span class="o">:</span> <span class="p">{</span>
			<span class="nx">readOnly</span><span class="o">:</span> <span class="p">{</span>
				<span class="nx">value</span><span class="o">:</span> <span class="kc">false</span>
			<span class="p">},</span>

			<span class="nx">name</span><span class="o">:</span> <span class="p">{</span>
				<span class="nx">value</span><span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
				<span class="nx">getter</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
					<span class="kd">var</span> <span class="nx">instance</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>

					<span class="k">return</span> <span class="nx">value</span> <span class="o">||</span> <span class="nx">instance</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">);</span>
				<span class="p">}</span>
			<span class="p">},</span>

			<span class="nx">id</span><span class="o">:</span> <span class="p">{</span>
				<span class="nx">getter</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
					<span class="kd">var</span> <span class="nx">instance</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>

					<span class="kd">var</span> <span class="nx">node</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;node&#39;</span><span class="p">);</span>

					<span class="k">if</span> <span class="p">(</span><span class="nx">node</span><span class="p">)</span> <span class="p">{</span>
						<span class="nx">value</span> <span class="o">=</span> <span class="nx">node</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">);</span>
					<span class="p">}</span>

					<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
						<span class="nx">value</span> <span class="o">=</span> <span class="nx">A</span><span class="p">.</span><span class="nx">guid</span><span class="p">();</span>
					<span class="p">}</span>

					<span class="k">return</span> <span class="nx">value</span><span class="p">;</span>
				<span class="p">}</span>
			<span class="p">},</span>

			<span class="nx">type</span><span class="o">:</span> <span class="p">{</span>
				<span class="nx">value</span><span class="o">:</span> <span class="s1">&#39;text&#39;</span><span class="p">,</span>
				<span class="nx">writeOnce</span><span class="o">:</span> <span class="kc">true</span>
			<span class="p">},</span>

			<span class="nx">labelAlign</span><span class="o">:</span> <span class="p">{</span>
				<span class="nx">value</span><span class="o">:</span> <span class="s1">&#39;&#39;</span>
			<span class="p">},</span>

			<span class="nx">labelNode</span><span class="o">:</span> <span class="p">{</span>
				<span class="nx">valueFn</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
					<span class="kd">var</span> <span class="nx">instance</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>

					<span class="k">return</span> <span class="nx">A</span><span class="p">.</span><span class="nx">Node</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="nx">TPL_LABEL</span><span class="p">);</span>
				<span class="p">}</span>
			<span class="p">},</span>

			<span class="nx">labelText</span><span class="o">:</span> <span class="p">{</span>
				<span class="nx">valueFn</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
					<span class="kd">var</span> <span class="nx">instance</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>

					<span class="k">return</span> <span class="nx">instance</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;labelNode&#39;</span><span class="p">).</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;innerHTML&#39;</span><span class="p">);</span>
				<span class="p">},</span>

				<span class="nx">setter</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
					<span class="kd">var</span> <span class="nx">instance</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>

					<span class="nx">instance</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;labelNode&#39;</span><span class="p">).</span><span class="nx">set</span><span class="p">(</span><span class="s1">&#39;innerHTML&#39;</span><span class="p">,</span> <span class="nx">value</span><span class="p">);</span>

					<span class="k">return</span> <span class="nx">value</span><span class="p">;</span>
				<span class="p">}</span>
			<span class="p">},</span>

			<span class="nx">node</span><span class="o">:</span> <span class="p">{</span>
				<span class="nx">value</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
				<span class="nx">setter</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
					<span class="kd">var</span> <span class="nx">instance</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>

					<span class="k">return</span> <span class="nx">A</span><span class="p">.</span><span class="nx">one</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="o">||</span> <span class="nx">instance</span><span class="p">.</span><span class="nx">_createFieldNode</span><span class="p">();</span>
				<span class="p">}</span>
			<span class="p">},</span>

			<span class="nx">fieldHint</span><span class="o">:</span> <span class="p">{</span>
				<span class="nx">value</span><span class="o">:</span> <span class="s1">&#39;&#39;</span>
			<span class="p">},</span>

			<span class="nx">fieldHintNode</span><span class="o">:</span> <span class="p">{</span>
				<span class="nx">value</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
				<span class="nx">setter</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
					<span class="kd">var</span> <span class="nx">instance</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>

					<span class="k">return</span> <span class="nx">A</span><span class="p">.</span><span class="nx">one</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="o">||</span> <span class="nx">instance</span><span class="p">.</span><span class="nx">_createFieldHint</span><span class="p">();</span>
				<span class="p">}</span>
			<span class="p">},</span>

			<span class="nx">prevVal</span><span class="o">:</span> <span class="p">{</span>
				<span class="nx">value</span><span class="o">:</span> <span class="s1">&#39;&#39;</span>
			<span class="p">},</span>

			<span class="nx">valid</span><span class="o">:</span> <span class="p">{</span>
				<span class="nx">value</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
				<span class="nx">getter</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
					<span class="kd">var</span> <span class="nx">instance</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>

					<span class="kd">var</span> <span class="nx">validator</span> <span class="o">=</span> <span class="nx">instance</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;validator&#39;</span><span class="p">);</span>

					<span class="kd">var</span> <span class="nx">valid</span> <span class="o">=</span> <span class="nx">instance</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;disabled&#39;</span><span class="p">)</span> <span class="o">||</span> <span class="nx">validator</span><span class="p">(</span><span class="nx">instance</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;value&#39;</span><span class="p">));</span>

					<span class="k">return</span> <span class="nx">valid</span><span class="p">;</span>
				<span class="p">}</span>
			<span class="p">},</span>

			<span class="nx">dirty</span><span class="o">:</span> <span class="p">{</span>
				<span class="nx">value</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
				<span class="nx">getter</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
					<span class="kd">var</span> <span class="nx">instance</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>

					<span class="k">if</span> <span class="p">(</span><span class="nx">instance</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;disabled&#39;</span><span class="p">))</span> <span class="p">{</span>
						<span class="nx">value</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
					<span class="p">}</span>
					<span class="k">else</span> <span class="p">{</span>
						<span class="kd">var</span> <span class="nx">currentVal</span> <span class="o">=</span> <span class="nb">String</span><span class="p">(</span><span class="nx">instance</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;value&#39;</span><span class="p">));</span>
						<span class="kd">var</span> <span class="nx">prevVal</span> <span class="o">=</span> <span class="nb">String</span><span class="p">(</span><span class="nx">instance</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;prevVal&#39;</span><span class="p">));</span>

						<span class="nx">value</span> <span class="o">=</span> <span class="p">(</span><span class="nx">currentVal</span> <span class="o">!==</span> <span class="nx">prevVal</span><span class="p">);</span>
					<span class="p">}</span>

					<span class="k">return</span> <span class="nx">value</span><span class="p">;</span>
				<span class="p">}</span>
			<span class="p">},</span>

			<span class="nx">size</span><span class="o">:</span> <span class="p">{},</span>

			<span class="nx">validator</span><span class="o">:</span> <span class="p">{</span>
				<span class="nx">valueFn</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
					<span class="kd">var</span> <span class="nx">instance</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>

					<span class="k">return</span> <span class="nx">instance</span><span class="p">.</span><span class="nx">fieldValidator</span><span class="p">;</span>
				<span class="p">},</span>
				<span class="nx">validator</span><span class="o">:</span> <span class="nx">Lang</span><span class="p">.</span><span class="nx">isFunction</span>
			<span class="p">},</span>

			<span class="nx">value</span><span class="o">:</span> <span class="p">{</span>
				<span class="nx">getter</span><span class="o">:</span> <span class="s1">&#39;_getNodeValue&#39;</span><span class="p">,</span>
				<span class="nx">setter</span><span class="o">:</span> <span class="s1">&#39;_setNodeValue&#39;</span><span class="p">,</span>
				<span class="nx">validator</span><span class="o">:</span> <span class="s1">&#39;fieldValidator&#39;</span>
			<span class="p">}</span>
		<span class="p">},</span>

		<span class="nx">HTML_PARSER</span><span class="o">:</span> <span class="p">{</span>
			<span class="nx">labelNode</span><span class="o">:</span> <span class="s1">&#39;label&#39;</span><span class="p">,</span>
			<span class="nx">node</span><span class="o">:</span> <span class="s1">&#39;input, textarea, select&#39;</span>
		<span class="p">},</span>

		<span class="nx">BIND_UI_ATTRS</span><span class="o">:</span> <span class="p">[</span>
			<span class="s1">&#39;id&#39;</span><span class="p">,</span>
			<span class="s1">&#39;readOnly&#39;</span><span class="p">,</span>
			<span class="s1">&#39;name&#39;</span><span class="p">,</span>
			<span class="s1">&#39;size&#39;</span><span class="p">,</span>
			<span class="s1">&#39;tabIndex&#39;</span><span class="p">,</span>
			<span class="s1">&#39;type&#39;</span><span class="p">,</span>
			<span class="s1">&#39;value&#39;</span>
		<span class="p">],</span>

		<span class="nx">getTypeClassName</span><span class="o">:</span> <span class="nx">getTypeClassName</span><span class="p">,</span>

		<span class="nx">getField</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">field</span><span class="p">)</span> <span class="p">{</span>
			<span class="kd">var</span> <span class="nx">fieldWidget</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>

			<span class="k">if</span> <span class="p">(</span><span class="nx">field</span> <span class="k">instanceof</span> <span class="nx">A</span><span class="p">.</span><span class="nx">Field</span><span class="p">)</span> <span class="p">{</span>
				<span class="nx">fieldWidget</span> <span class="o">=</span> <span class="nx">field</span><span class="p">;</span>
			<span class="p">}</span>
			<span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">field</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">Lang</span><span class="p">.</span><span class="nx">isString</span><span class="p">(</span><span class="nx">field</span><span class="p">)</span> <span class="o">||</span> <span class="nx">field</span> <span class="k">instanceof</span> <span class="nx">A</span><span class="p">.</span><span class="nx">Node</span> <span class="o">||</span> <span class="nx">field</span><span class="p">.</span><span class="nx">nodeName</span><span class="p">))</span> <span class="p">{</span>
				<span class="kd">var</span> <span class="nx">fieldId</span> <span class="o">=</span> <span class="nx">A</span><span class="p">.</span><span class="nx">one</span><span class="p">(</span><span class="nx">field</span><span class="p">).</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">);</span>

				<span class="nx">fieldWidget</span> <span class="o">=</span> <span class="nx">_FIELD_INSTANCES</span><span class="p">[</span><span class="nx">fieldId</span><span class="p">];</span>

				<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">fieldWidget</span><span class="p">)</span> <span class="p">{</span>
					<span class="kd">var</span> <span class="nx">boundingBox</span> <span class="o">=</span> <span class="nx">field</span><span class="p">.</span><span class="nx">ancestor</span><span class="p">(</span><span class="s1">&#39;.aui-field&#39;</span><span class="p">);</span>
					<span class="kd">var</span> <span class="nx">contentBox</span> <span class="o">=</span> <span class="nx">field</span><span class="p">.</span><span class="nx">ancestor</span><span class="p">(</span><span class="s1">&#39;.aui-field-content&#39;</span><span class="p">);</span>

					<span class="nx">fieldWidget</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Field</span><span class="p">(</span>
						<span class="p">{</span>
							<span class="nx">boundingBox</span><span class="o">:</span> <span class="nx">boundingBox</span><span class="p">,</span>
							<span class="nx">contentBox</span><span class="o">:</span> <span class="nx">contentBox</span><span class="p">,</span>
							<span class="nx">node</span><span class="o">:</span> <span class="nx">field</span>
						<span class="p">}</span>
					<span class="p">);</span>
				<span class="p">}</span>
			<span class="p">}</span>
			<span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">Lang</span><span class="p">.</span><span class="nx">isObject</span><span class="p">(</span><span class="nx">field</span><span class="p">))</span> <span class="p">{</span>
				<span class="nx">fieldWidget</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Field</span><span class="p">(</span><span class="nx">field</span><span class="p">);</span>
			<span class="p">}</span>

			<span class="k">return</span> <span class="nx">fieldWidget</span><span class="p">;</span>
		<span class="p">},</span>

		<span class="nx">prototype</span><span class="o">:</span> <span class="p">{</span>
			<span class="nx">BOUNDING_TEMPLATE</span><span class="o">:</span> <span class="nx">TPL_BOUNDING_BOX</span><span class="p">,</span>
			<span class="nx">CONTENT_TEMPLATE</span><span class="o">:</span> <span class="nx">TPL_CONTENT_BOX</span><span class="p">,</span>
			<span class="nx">FIELD_TEMPLATE</span><span class="o">:</span> <span class="nx">TPL_INPUT</span><span class="p">,</span>
			<span class="nx">FIELD_TYPE</span><span class="o">:</span> <span class="s1">&#39;text&#39;</span><span class="p">,</span>

			<span class="nx">initializer</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
				<span class="kd">var</span> <span class="nx">instance</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>

				<span class="kd">var</span> <span class="nx">id</span> <span class="o">=</span> <span class="nx">instance</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;node&#39;</span><span class="p">).</span><span class="nx">guid</span><span class="p">();</span>

				<span class="nx">_FIELD_INSTANCES</span><span class="p">[</span><span class="nx">id</span><span class="p">]</span> <span class="o">=</span> <span class="nx">instance</span><span class="p">;</span>
			<span class="p">},</span>

			<span class="nx">renderUI</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
				<span class="kd">var</span> <span class="nx">instance</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>

				<span class="nx">instance</span><span class="p">.</span><span class="nx">_renderField</span><span class="p">();</span>
				<span class="nx">instance</span><span class="p">.</span><span class="nx">_renderLabel</span><span class="p">();</span>
				<span class="nx">instance</span><span class="p">.</span><span class="nx">_renderFieldHint</span><span class="p">();</span>
			<span class="p">},</span>

			<span class="nx">bindUI</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
				<span class="kd">var</span> <span class="nx">instance</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>

				<span class="nx">instance</span><span class="p">.</span><span class="nx">after</span><span class="p">(</span><span class="s1">&#39;labelAlignChange&#39;</span><span class="p">,</span> <span class="nx">instance</span><span class="p">.</span><span class="nx">_afterLabelAlignChange</span><span class="p">);</span>
				<span class="nx">instance</span><span class="p">.</span><span class="nx">after</span><span class="p">(</span><span class="s1">&#39;fieldHintChange&#39;</span><span class="p">,</span> <span class="nx">instance</span><span class="p">.</span><span class="nx">_afterFieldHintChange</span><span class="p">);</span>
			<span class="p">},</span>

			<span class="nx">syncUI</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
				<span class="kd">var</span> <span class="nx">instance</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>

				<span class="nx">instance</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s1">&#39;prevVal&#39;</span><span class="p">,</span> <span class="nx">instance</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;value&#39;</span><span class="p">));</span>
			<span class="p">},</span>

			<span class="nx">fieldValidator</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
				<span class="kd">var</span> <span class="nx">instance</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>

				<span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
			<span class="p">},</span>

			<span class="nx">isValid</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
				<span class="kd">var</span> <span class="nx">instance</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>

				<span class="k">return</span> <span class="nx">instance</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;valid&#39;</span><span class="p">);</span>
			<span class="p">},</span>

			<span class="nx">isDirty</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
				<span class="kd">var</span> <span class="nx">instance</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>

				<span class="k">return</span> <span class="nx">instance</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;dirty&#39;</span><span class="p">);</span>
			<span class="p">},</span>

			<span class="nx">resetValue</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
				<span class="kd">var</span> <span class="nx">instance</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>

				<span class="nx">instance</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s1">&#39;value&#39;</span><span class="p">,</span> <span class="nx">instance</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;prevVal&#39;</span><span class="p">));</span>

				<span class="nx">instance</span><span class="p">.</span><span class="nx">clearInvalid</span><span class="p">();</span>
			<span class="p">},</span>

			<span class="nx">markInvalid</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">message</span><span class="p">)</span> <span class="p">{</span>
				<span class="kd">var</span> <span class="nx">instance</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>

				<span class="nx">instance</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s1">&#39;fieldHint&#39;</span><span class="p">,</span> <span class="nx">message</span><span class="p">);</span>
				<span class="nx">instance</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;fieldHintNode&#39;</span><span class="p">).</span><span class="nx">show</span><span class="p">();</span>

				<span class="nx">instance</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;boundingBox&#39;</span><span class="p">).</span><span class="nx">addClass</span><span class="p">(</span><span class="nx">CSS_FIELD_INVALID</span><span class="p">);</span>
			<span class="p">},</span>

			<span class="nx">clearInvalid</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
				<span class="kd">var</span> <span class="nx">instance</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>

				<span class="nx">instance</span><span class="p">.</span><span class="nx">reset</span><span class="p">(</span><span class="s1">&#39;fieldHint&#39;</span><span class="p">);</span>

				<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">instance</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;fieldHint&#39;</span><span class="p">))</span> <span class="p">{</span>
					<span class="nx">instance</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;fieldHintNode&#39;</span><span class="p">).</span><span class="nx">hide</span><span class="p">();</span>
				<span class="p">}</span>

				<span class="nx">instance</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;boundingBox&#39;</span><span class="p">).</span><span class="nx">removeClass</span><span class="p">(</span><span class="nx">CSS_FIELD_INVALID</span><span class="p">);</span>
			<span class="p">},</span>

			<span class="nx">validate</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
				<span class="kd">var</span> <span class="nx">instance</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>

				<span class="kd">var</span> <span class="nx">valid</span> <span class="o">=</span> <span class="nx">instance</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;valid&#39;</span><span class="p">);</span>

				<span class="k">if</span> <span class="p">(</span><span class="nx">valid</span><span class="p">)</span> <span class="p">{</span>
					<span class="nx">instance</span><span class="p">.</span><span class="nx">clearInvalid</span><span class="p">();</span>
				<span class="p">}</span>

				<span class="k">return</span> <span class="nx">valid</span><span class="p">;</span>
			<span class="p">},</span>

			<span class="nx">_afterFieldHintChange</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
				<span class="kd">var</span> <span class="nx">instance</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>

				<span class="nx">instance</span><span class="p">.</span><span class="nx">_uiSetFieldHint</span><span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">newVal</span><span class="p">,</span> <span class="nx">event</span><span class="p">.</span><span class="nx">prevVal</span><span class="p">);</span>
			<span class="p">},</span>

			<span class="nx">_afterLabelAlignChange</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
				<span class="kd">var</span> <span class="nx">instance</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>

				<span class="nx">instance</span><span class="p">.</span><span class="nx">_uiSetLabelAlign</span><span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">newVal</span><span class="p">,</span> <span class="nx">event</span><span class="p">.</span><span class="nx">prevVal</span><span class="p">);</span>
			<span class="p">},</span>

			<span class="nx">_createFieldHint</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
				<span class="kd">var</span> <span class="nx">instance</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>

				<span class="kd">var</span> <span class="nx">fieldHint</span> <span class="o">=</span> <span class="nx">A</span><span class="p">.</span><span class="nx">Node</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="nx">TPL_FIELD_HINT</span><span class="p">);</span>

				<span class="nx">instance</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;contentBox&#39;</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="nx">fieldHint</span><span class="p">);</span>

				<span class="k">return</span> <span class="nx">fieldHint</span><span class="p">;</span>
			<span class="p">},</span>

			<span class="nx">_createFieldNode</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
				<span class="kd">var</span> <span class="nx">instance</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>

				<span class="kd">var</span> <span class="nx">fieldTemplate</span> <span class="o">=</span> <span class="nx">instance</span><span class="p">.</span><span class="nx">FIELD_TEMPLATE</span><span class="p">;</span>

				<span class="nx">instance</span><span class="p">.</span><span class="nx">FIELD_TEMPLATE</span> <span class="o">=</span> <span class="nx">A</span><span class="p">.</span><span class="nx">substitute</span><span class="p">(</span>
					<span class="nx">fieldTemplate</span><span class="p">,</span>
					<span class="p">{</span>
						<span class="nx">cssClass</span><span class="o">:</span> <span class="nx">CSS_FIELD_INPUT</span><span class="p">,</span>
						<span class="nx">id</span><span class="o">:</span> <span class="nx">instance</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">),</span>
						<span class="nx">name</span><span class="o">:</span> <span class="nx">instance</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">),</span>
						<span class="nx">type</span><span class="o">:</span> <span class="nx">instance</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;type&#39;</span><span class="p">)</span>
					<span class="p">}</span>
				<span class="p">);</span>

				<span class="k">return</span> <span class="nx">A</span><span class="p">.</span><span class="nx">Node</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="nx">instance</span><span class="p">.</span><span class="nx">FIELD_TEMPLATE</span><span class="p">);</span>
			<span class="p">},</span>

			<span class="nx">_getNodeValue</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
				<span class="kd">var</span> <span class="nx">instance</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>

				<span class="k">return</span> <span class="nx">instance</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;node&#39;</span><span class="p">).</span><span class="nx">val</span><span class="p">();</span>
			<span class="p">},</span>

			<span class="nx">_renderField</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
				<span class="kd">var</span> <span class="nx">instance</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>

				<span class="kd">var</span> <span class="nx">node</span> <span class="o">=</span> <span class="nx">instance</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;node&#39;</span><span class="p">);</span>

				<span class="nx">node</span><span class="p">.</span><span class="nx">val</span><span class="p">(</span><span class="nx">instance</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;value&#39;</span><span class="p">));</span>

				<span class="kd">var</span> <span class="nx">boundingBox</span> <span class="o">=</span> <span class="nx">instance</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;boundingBox&#39;</span><span class="p">);</span>
				<span class="kd">var</span> <span class="nx">contentBox</span> <span class="o">=</span> <span class="nx">instance</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;contentBox&#39;</span><span class="p">);</span>

				<span class="kd">var</span> <span class="nx">type</span> <span class="o">=</span> <span class="nx">instance</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;type&#39;</span><span class="p">);</span>

				<span class="nx">boundingBox</span><span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="nx">getTypeClassName</span><span class="p">(</span><span class="nx">type</span><span class="p">));</span>
				<span class="nx">node</span><span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="nx">getTypeClassName</span><span class="p">(</span><span class="nx">type</span><span class="p">,</span> <span class="s1">&#39;input&#39;</span><span class="p">));</span>

				<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">contentBox</span><span class="p">.</span><span class="nx">contains</span><span class="p">(</span><span class="nx">node</span><span class="p">))</span> <span class="p">{</span>
					<span class="k">if</span> <span class="p">(</span><span class="nx">node</span><span class="p">.</span><span class="nx">inDoc</span><span class="p">())</span> <span class="p">{</span>
						<span class="nx">node</span><span class="p">.</span><span class="nx">placeBefore</span><span class="p">(</span><span class="nx">boundingBox</span><span class="p">);</span>

						<span class="nx">contentBox</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">node</span><span class="p">);</span>
					<span class="p">}</span>
					<span class="k">else</span> <span class="p">{</span>
						<span class="nx">contentBox</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">node</span><span class="p">);</span>
					<span class="p">}</span>
				<span class="p">}</span>

				<span class="nx">boundingBox</span><span class="p">.</span><span class="nx">removeAttribute</span><span class="p">(</span><span class="s1">&#39;tabIndex&#39;</span><span class="p">);</span>
			<span class="p">},</span>

			<span class="nx">_renderFieldHint</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
				<span class="kd">var</span> <span class="nx">instance</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>

				<span class="kd">var</span> <span class="nx">fieldHint</span> <span class="o">=</span> <span class="nx">instance</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;fieldHint&#39;</span><span class="p">);</span>

				<span class="k">if</span> <span class="p">(</span><span class="nx">fieldHint</span><span class="p">)</span> <span class="p">{</span>
					<span class="nx">instance</span><span class="p">.</span><span class="nx">_uiSetFieldHint</span><span class="p">(</span><span class="nx">fieldHint</span><span class="p">);</span>
				<span class="p">}</span>
			<span class="p">},</span>

			<span class="nx">_renderLabel</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
				<span class="kd">var</span> <span class="nx">instance</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>

				<span class="kd">var</span> <span class="nx">labelText</span> <span class="o">=</span> <span class="nx">instance</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;labelText&#39;</span><span class="p">);</span>

				<span class="k">if</span> <span class="p">(</span><span class="nx">labelText</span> <span class="o">!==</span> <span class="kc">false</span><span class="p">)</span> <span class="p">{</span>
					<span class="kd">var</span> <span class="nx">node</span> <span class="o">=</span> <span class="nx">instance</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;node&#39;</span><span class="p">);</span>
					<span class="kd">var</span> <span class="nx">id</span> <span class="o">=</span> <span class="nx">node</span><span class="p">.</span><span class="nx">guid</span><span class="p">();</span>

					<span class="nx">labelText</span> <span class="o">=</span> <span class="nx">instance</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;labelText&#39;</span><span class="p">);</span>

					<span class="kd">var</span> <span class="nx">labelNode</span> <span class="o">=</span> <span class="nx">instance</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;labelNode&#39;</span><span class="p">);</span>

					<span class="nx">labelNode</span><span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="nx">getClassName</span><span class="p">(</span><span class="nx">instance</span><span class="p">.</span><span class="nx">name</span><span class="p">,</span> <span class="s1">&#39;label&#39;</span><span class="p">));</span>
					<span class="nx">labelNode</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="s1">&#39;for&#39;</span><span class="p">,</span> <span class="nx">id</span><span class="p">);</span>
					<span class="nx">labelNode</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s1">&#39;innerHTML&#39;</span><span class="p">,</span> <span class="nx">labelText</span><span class="p">);</span>

					<span class="nx">instance</span><span class="p">.</span><span class="nx">_uiSetLabelAlign</span><span class="p">(</span><span class="nx">instance</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;labelAlign&#39;</span><span class="p">));</span>

					<span class="kd">var</span> <span class="nx">contentBox</span> <span class="o">=</span> <span class="nx">instance</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;contentBox&#39;</span><span class="p">);</span>

					<span class="nx">contentBox</span><span class="p">.</span><span class="nx">prepend</span><span class="p">(</span><span class="nx">labelNode</span><span class="p">);</span>
				<span class="p">}</span>
			<span class="p">},</span>

			<span class="nx">_setNodeValue</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
				<span class="kd">var</span> <span class="nx">instance</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>

				<span class="nx">instance</span><span class="p">.</span><span class="nx">_uiSetValue</span><span class="p">(</span><span class="nx">value</span><span class="p">);</span>

				<span class="k">return</span> <span class="nx">value</span><span class="p">;</span>
			<span class="p">},</span>

			<span class="nx">_uiSetFieldHint</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">newVal</span><span class="p">,</span> <span class="nx">prevVal</span><span class="p">)</span> <span class="p">{</span>
				<span class="kd">var</span> <span class="nx">instance</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>

				<span class="nx">instance</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;fieldHintNode&#39;</span><span class="p">).</span><span class="nx">set</span><span class="p">(</span><span class="s1">&#39;innerHTML&#39;</span><span class="p">,</span> <span class="nx">newVal</span><span class="p">);</span>
			<span class="p">},</span>

			<span class="nx">_uiSetId</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">newVal</span><span class="p">,</span> <span class="nx">src</span><span class="p">)</span> <span class="p">{</span>
				<span class="kd">var</span> <span class="nx">instance</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>

				<span class="nx">instance</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;node&#39;</span><span class="p">).</span><span class="nx">set</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="nx">newVal</span><span class="p">);</span>
			<span class="p">},</span>

			<span class="nx">_uiSetLabelAlign</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">newVal</span><span class="p">,</span> <span class="nx">prevVal</span><span class="p">)</span> <span class="p">{</span>
				<span class="kd">var</span> <span class="nx">instance</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>

				<span class="kd">var</span> <span class="nx">boundingBox</span> <span class="o">=</span> <span class="nx">instance</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;boundingBox&#39;</span><span class="p">);</span>

				<span class="nx">boundingBox</span><span class="p">.</span><span class="nx">replaceClass</span><span class="p">(</span><span class="nx">CSS_LABEL_ALIGN</span><span class="p">[</span><span class="nx">prevVal</span><span class="p">],</span> <span class="nx">CSS_LABEL_ALIGN</span><span class="p">[</span><span class="nx">newVal</span><span class="p">]);</span>

				<span class="kd">var</span> <span class="nx">action</span> <span class="o">=</span> <span class="s1">&#39;removeClass&#39;</span><span class="p">;</span>

				<span class="k">if</span> <span class="p">(</span><span class="nx">REGEX_INLINE_LABEL</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">newVal</span><span class="p">))</span> <span class="p">{</span>
					<span class="nx">action</span> <span class="o">=</span> <span class="s1">&#39;addClass&#39;</span><span class="p">;</span>
				<span class="p">}</span>

				<span class="nx">boundingBox</span><span class="p">[</span><span class="nx">action</span><span class="p">](</span><span class="nx">CSS_LABELS_INLINE</span><span class="p">);</span>
			<span class="p">},</span>

			<span class="nx">_uiSetName</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">newVal</span><span class="p">,</span> <span class="nx">src</span><span class="p">)</span> <span class="p">{</span>
				<span class="kd">var</span> <span class="nx">instance</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>

				<span class="nx">instance</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;node&#39;</span><span class="p">).</span><span class="nx">setAttribute</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="nx">newVal</span><span class="p">);</span>
			<span class="p">},</span>

			<span class="nx">_uiSetReadOnly</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">newVal</span><span class="p">,</span> <span class="nx">src</span><span class="p">)</span> <span class="p">{</span>
				<span class="kd">var</span> <span class="nx">instance</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>

				<span class="nx">instance</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;node&#39;</span><span class="p">).</span><span class="nx">setAttribute</span><span class="p">(</span><span class="s1">&#39;readOnly&#39;</span><span class="p">,</span> <span class="nx">newVal</span><span class="p">);</span>
			<span class="p">},</span>

			<span class="nx">_uiSetSize</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">newVal</span><span class="p">,</span> <span class="nx">src</span><span class="p">)</span> <span class="p">{</span>
				<span class="kd">var</span> <span class="nx">instance</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>

				<span class="nx">instance</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;node&#39;</span><span class="p">).</span><span class="nx">setAttribute</span><span class="p">(</span><span class="s1">&#39;size&#39;</span><span class="p">,</span> <span class="nx">newVal</span><span class="p">);</span>
			<span class="p">},</span>

			<span class="nx">_uiSetTabIndex</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">newVal</span><span class="p">,</span> <span class="nx">src</span><span class="p">)</span> <span class="p">{</span>
				<span class="kd">var</span> <span class="nx">instance</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>

				<span class="nx">instance</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;node&#39;</span><span class="p">).</span><span class="nx">setAttribute</span><span class="p">(</span><span class="s1">&#39;tabIndex&#39;</span><span class="p">,</span> <span class="nx">newVal</span><span class="p">);</span>
			<span class="p">},</span>

			<span class="nx">_uiSetValue</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">newVal</span><span class="p">,</span> <span class="nx">src</span><span class="p">)</span> <span class="p">{</span>
				<span class="kd">var</span> <span class="nx">instance</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>

				<span class="nx">instance</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;node&#39;</span><span class="p">).</span><span class="nx">val</span><span class="p">(</span><span class="nx">newVal</span><span class="p">);</span>
			<span class="p">},</span>

			<span class="nx">_requireAddAttr</span><span class="o">:</span> <span class="kc">false</span>
		<span class="p">}</span>
	<span class="p">}</span>
<span class="p">);</span>

<span class="nx">A</span><span class="p">.</span><span class="nx">Field</span> <span class="o">=</span> <span class="nx">Field</span><span class="p">;</span>

<span class="p">},</span> <span class="s1">&#39;@VERSION@&#39;</span> <span class="p">,{</span><span class="nx">requires</span><span class="o">:</span><span class="p">[</span><span class="s1">&#39;aui-base&#39;</span><span class="p">,</span><span class="s1">&#39;aui-component&#39;</span><span class="p">,</span><span class="s1">&#39;substitute&#39;</span><span class="p">]});</span>
<span class="nx">AUI</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="s1">&#39;aui-form-textarea&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">A</span><span class="p">)</span> <span class="p">{</span>
<span class="kd">var</span> <span class="nx">Lang</span> <span class="o">=</span> <span class="nx">A</span><span class="p">.</span><span class="nx">Lang</span><span class="p">,</span>

	<span class="nx">getClassName</span> <span class="o">=</span> <span class="nx">A</span><span class="p">.</span><span class="nx">ClassNameManager</span><span class="p">.</span><span class="nx">getClassName</span><span class="p">,</span>

	<span class="nx">NAME</span> <span class="o">=</span> <span class="s1">&#39;textarea&#39;</span><span class="p">,</span>

	<span class="nx">CSS_TEXTAREA</span> <span class="o">=</span> <span class="nx">getClassName</span><span class="p">(</span><span class="nx">NAME</span><span class="p">),</span>
	<span class="nx">CSS_HEIGHT_MONITOR</span> <span class="o">=</span> <span class="p">[</span>
		<span class="nx">getClassName</span><span class="p">(</span><span class="nx">NAME</span><span class="p">,</span> <span class="s1">&#39;height&#39;</span><span class="p">,</span> <span class="s1">&#39;monitor&#39;</span><span class="p">),</span>
		<span class="nx">getClassName</span><span class="p">(</span><span class="s1">&#39;field&#39;</span><span class="p">,</span> <span class="s1">&#39;text&#39;</span><span class="p">,</span> <span class="s1">&#39;input&#39;</span><span class="p">),</span>
		<span class="nx">getClassName</span><span class="p">(</span><span class="s1">&#39;helper&#39;</span><span class="p">,</span> <span class="s1">&#39;hidden&#39;</span><span class="p">,</span> <span class="s1">&#39;accessible&#39;</span><span class="p">)</span>
	<span class="p">].</span><span class="nx">join</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">),</span>

	<span class="nx">DEFAULT_EMPTY_CONTENT</span> <span class="o">=</span> <span class="s1">&#39;&amp;nbsp;&amp;nbsp;&#39;</span><span class="p">,</span>
	<span class="nx">DEFAULT_APPEND_CONTENT</span> <span class="o">=</span> <span class="s1">&#39;&amp;nbsp;\n&amp;nbsp;&#39;</span><span class="p">,</span>

	<span class="nx">TPL_HEIGHT_MONITOR_OPEN</span> <span class="o">=</span> <span class="s1">&#39;&lt;pre class=&quot;&#39;</span> <span class="o">+</span> <span class="nx">CSS_HEIGHT_MONITOR</span> <span class="o">+</span> <span class="s1">&#39;&quot;&gt;&#39;</span><span class="p">,</span>
	<span class="nx">TPL_HEIGHT_MONITOR_CLOSE</span> <span class="o">=</span> <span class="s1">&#39;&lt;/pre&gt;&#39;</span><span class="p">,</span>
	<span class="nx">TPL_INPUT</span> <span class="o">=</span> <span class="s1">&#39;&lt;textarea autocomplete=&quot;off&quot; class=&quot;{cssClass}&quot; name=&quot;{name}&quot;&gt;&lt;/textarea&gt;&#39;</span><span class="p">;</span>

<span class="kd">var</span> <span class="nx">Textarea</span> <span class="o">=</span> <span class="nx">A</span><span class="p">.</span><span class="nx">Component</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span>
	<span class="p">{</span>
		<span class="nx">NAME</span><span class="o">:</span> <span class="nx">NAME</span><span class="p">,</span>

		<span class="nx">ATTRS</span><span class="o">:</span> <span class="p">{</span>
			<span class="nx">autoSize</span><span class="o">:</span> <span class="p">{</span>
				<span class="nx">value</span><span class="o">:</span> <span class="kc">true</span>
			<span class="p">},</span>

			<span class="nx">height</span><span class="o">:</span> <span class="p">{</span>
				<span class="nx">value</span><span class="o">:</span> <span class="s1">&#39;auto&#39;</span>
			<span class="p">},</span>

			<span class="nx">maxHeight</span><span class="o">:</span> <span class="p">{</span>
				<span class="nx">value</span><span class="o">:</span> <span class="mi">1000</span><span class="p">,</span>
				<span class="nx">setter</span><span class="o">:</span> <span class="s1">&#39;_setAutoDimension&#39;</span>
			<span class="p">},</span>

			<span class="nx">minHeight</span><span class="o">:</span> <span class="p">{</span>
				<span class="nx">value</span><span class="o">:</span> <span class="mi">45</span><span class="p">,</span>
				<span class="nx">setter</span><span class="o">:</span> <span class="s1">&#39;_setAutoDimension&#39;</span>
			<span class="p">},</span>

			<span class="nx">width</span><span class="o">:</span> <span class="p">{</span>
				<span class="nx">value</span><span class="o">:</span> <span class="s1">&#39;auto&#39;</span><span class="p">,</span>
				<span class="nx">setter</span><span class="o">:</span> <span class="s1">&#39;_setAutoDimension&#39;</span>
			<span class="p">}</span>
		<span class="p">},</span>

		<span class="nx">HTML_PARSER</span><span class="o">:</span> <span class="p">{</span>
			<span class="nx">node</span><span class="o">:</span> <span class="s1">&#39;textarea&#39;</span>
		<span class="p">},</span>

		<span class="nx">EXTENDS</span><span class="o">:</span> <span class="nx">A</span><span class="p">.</span><span class="nx">Textfield</span><span class="p">,</span>

		<span class="nx">prototype</span><span class="o">:</span> <span class="p">{</span>
			<span class="nx">FIELD_TEMPLATE</span><span class="o">:</span> <span class="nx">TPL_INPUT</span><span class="p">,</span>
			<span class="nx">renderUI</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
				<span class="kd">var</span> <span class="nx">instance</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>

				<span class="nx">Textarea</span><span class="p">.</span><span class="nx">superclass</span><span class="p">.</span><span class="nx">renderUI</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">instance</span><span class="p">);</span>

				<span class="k">if</span> <span class="p">(</span><span class="nx">instance</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;autoSize&#39;</span><span class="p">))</span> <span class="p">{</span>
					<span class="nx">instance</span><span class="p">.</span><span class="nx">_renderHeightMonitor</span><span class="p">();</span>
				<span class="p">}</span>
			<span class="p">},</span>

			<span class="nx">bindUI</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
				<span class="kd">var</span> <span class="nx">instance</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>

				<span class="nx">Textarea</span><span class="p">.</span><span class="nx">superclass</span><span class="p">.</span><span class="nx">bindUI</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">instance</span><span class="p">);</span>

				<span class="k">if</span> <span class="p">(</span><span class="nx">instance</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;autoSize&#39;</span><span class="p">))</span> <span class="p">{</span>
					<span class="nx">instance</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;node&#39;</span><span class="p">).</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;keyup&#39;</span><span class="p">,</span> <span class="nx">instance</span><span class="p">.</span><span class="nx">_onKeyup</span><span class="p">,</span> <span class="nx">instance</span><span class="p">);</span>
				<span class="p">}</span>

				<span class="nx">instance</span><span class="p">.</span><span class="nx">after</span><span class="p">(</span><span class="s1">&#39;adjustSize&#39;</span><span class="p">,</span> <span class="nx">instance</span><span class="p">.</span><span class="nx">_uiAutoSize</span><span class="p">);</span>

				<span class="nx">instance</span><span class="p">.</span><span class="nx">after</span><span class="p">(</span><span class="s1">&#39;heightChange&#39;</span><span class="p">,</span> <span class="nx">instance</span><span class="p">.</span><span class="nx">_afterHeightChange</span><span class="p">);</span>
				<span class="nx">instance</span><span class="p">.</span><span class="nx">after</span><span class="p">(</span><span class="s1">&#39;widthChange&#39;</span><span class="p">,</span> <span class="nx">instance</span><span class="p">.</span><span class="nx">_afterWidthChange</span><span class="p">);</span>
			<span class="p">},</span>

			<span class="nx">syncUI</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
				<span class="kd">var</span> <span class="nx">instance</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>

				<span class="nx">Textarea</span><span class="p">.</span><span class="nx">superclass</span><span class="p">.</span><span class="nx">syncUI</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">instance</span><span class="p">);</span>

				<span class="nx">instance</span><span class="p">.</span><span class="nx">_setAutoDimension</span><span class="p">(</span><span class="nx">instance</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;minHeight&#39;</span><span class="p">),</span> <span class="s1">&#39;minHeight&#39;</span><span class="p">);</span>
				<span class="nx">instance</span><span class="p">.</span><span class="nx">_setAutoDimension</span><span class="p">(</span><span class="nx">instance</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;maxHeight&#39;</span><span class="p">),</span> <span class="s1">&#39;maxHeight&#39;</span><span class="p">);</span>

				<span class="kd">var</span> <span class="nx">width</span> <span class="o">=</span> <span class="nx">instance</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;width&#39;</span><span class="p">);</span>
				<span class="kd">var</span> <span class="nx">height</span> <span class="o">=</span> <span class="nx">instance</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;minHeight&#39;</span><span class="p">);</span>

				<span class="nx">instance</span><span class="p">.</span><span class="nx">_setAutoDimension</span><span class="p">(</span><span class="nx">width</span><span class="p">,</span> <span class="s1">&#39;width&#39;</span><span class="p">);</span>

				<span class="nx">instance</span><span class="p">.</span><span class="nx">_uiSetDim</span><span class="p">(</span><span class="s1">&#39;height&#39;</span><span class="p">,</span> <span class="nx">height</span><span class="p">);</span>
				<span class="nx">instance</span><span class="p">.</span><span class="nx">_uiSetDim</span><span class="p">(</span><span class="s1">&#39;width&#39;</span><span class="p">,</span> <span class="nx">width</span><span class="p">);</span>
			<span class="p">},</span>

			<span class="nx">_afterHeightChange</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
				<span class="kd">var</span> <span class="nx">instance</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>

				<span class="nx">instance</span><span class="p">.</span><span class="nx">_uiSetDim</span><span class="p">(</span><span class="s1">&#39;height&#39;</span><span class="p">,</span> <span class="nx">event</span><span class="p">.</span><span class="nx">newVal</span><span class="p">,</span> <span class="nx">event</span><span class="p">.</span><span class="nx">prevVal</span><span class="p">);</span>
			<span class="p">},</span>

			<span class="nx">_afterWidthChange</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
				<span class="kd">var</span> <span class="nx">instance</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>

				<span class="nx">instance</span><span class="p">.</span><span class="nx">_uiSetDim</span><span class="p">(</span><span class="s1">&#39;width&#39;</span><span class="p">,</span> <span class="nx">event</span><span class="p">.</span><span class="nx">newVal</span><span class="p">,</span> <span class="nx">event</span><span class="p">.</span><span class="nx">prevVal</span><span class="p">);</span>
			<span class="p">},</span>

			<span class="nx">_onKeyup</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
				<span class="kd">var</span> <span class="nx">instance</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>

				<span class="nx">instance</span><span class="p">.</span><span class="nx">fire</span><span class="p">(</span><span class="s1">&#39;adjustSize&#39;</span><span class="p">);</span>
			<span class="p">},</span>

			<span class="nx">_renderHeightMonitor</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
				<span class="kd">var</span> <span class="nx">instance</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>

				<span class="kd">var</span> <span class="nx">heightMonitor</span> <span class="o">=</span> <span class="nx">A</span><span class="p">.</span><span class="nx">Node</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="nx">TPL_HEIGHT_MONITOR_OPEN</span> <span class="o">+</span> <span class="nx">TPL_HEIGHT_MONITOR_CLOSE</span><span class="p">);</span>
				<span class="kd">var</span> <span class="nx">node</span> <span class="o">=</span> <span class="nx">instance</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;node&#39;</span><span class="p">);</span>

				<span class="nx">A</span><span class="p">.</span><span class="nx">getBody</span><span class="p">().</span><span class="nx">append</span><span class="p">(</span><span class="nx">heightMonitor</span><span class="p">);</span>

				<span class="nx">instance</span><span class="p">.</span><span class="nx">_heightMonitor</span> <span class="o">=</span> <span class="nx">heightMonitor</span><span class="p">;</span>

				<span class="kd">var</span> <span class="nx">fontFamily</span> <span class="o">=</span> <span class="nx">node</span><span class="p">.</span><span class="nx">getComputedStyle</span><span class="p">(</span><span class="s1">&#39;fontFamily&#39;</span><span class="p">);</span>
				<span class="kd">var</span> <span class="nx">fontSize</span> <span class="o">=</span> <span class="nx">node</span><span class="p">.</span><span class="nx">getComputedStyle</span><span class="p">(</span><span class="s1">&#39;fontSize&#39;</span><span class="p">);</span>
				<span class="kd">var</span> <span class="nx">fontWeight</span> <span class="o">=</span> <span class="nx">node</span><span class="p">.</span><span class="nx">getComputedStyle</span><span class="p">(</span><span class="s1">&#39;fontWeight&#39;</span><span class="p">);</span>
				<span class="kd">var</span> <span class="nx">lineHeight</span> <span class="o">=</span> <span class="nx">node</span><span class="p">.</span><span class="nx">getComputedStyle</span><span class="p">(</span><span class="s1">&#39;fontSize&#39;</span><span class="p">);</span>

				<span class="nx">node</span><span class="p">.</span><span class="nx">setStyle</span><span class="p">(</span><span class="s1">&#39;height&#39;</span><span class="p">,</span> <span class="nx">instance</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;minHeight&#39;</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;px&#39;</span><span class="p">);</span>

				<span class="nx">heightMonitor</span><span class="p">.</span><span class="nx">setStyles</span><span class="p">(</span>
					<span class="p">{</span>
						<span class="nx">fontFamily</span><span class="o">:</span> <span class="nx">fontFamily</span><span class="p">,</span>
						<span class="nx">fontSize</span><span class="o">:</span> <span class="nx">fontSize</span><span class="p">,</span>
						<span class="nx">fontWeight</span><span class="o">:</span> <span class="nx">fontWeight</span>
					<span class="p">}</span>
				<span class="p">);</span>

				<span class="k">if</span> <span class="p">(</span><span class="s1">&#39;outerHTML&#39;</span> <span class="k">in</span> <span class="nx">heightMonitor</span><span class="p">.</span><span class="nx">getDOM</span><span class="p">())</span> <span class="p">{</span>
					<span class="nx">instance</span><span class="p">.</span><span class="nx">_updateContent</span> <span class="o">=</span> <span class="nx">instance</span><span class="p">.</span><span class="nx">_updateOuterContent</span><span class="p">;</span>
				<span class="p">}</span>
				<span class="k">else</span> <span class="p">{</span>
					<span class="nx">instance</span><span class="p">.</span><span class="nx">_updateContent</span> <span class="o">=</span> <span class="nx">instance</span><span class="p">.</span><span class="nx">_updateInnerContent</span><span class="p">;</span>
				<span class="p">}</span>
			<span class="p">},</span>

			<span class="nx">_setAutoDimension</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">,</span> <span class="nx">key</span><span class="p">)</span> <span class="p">{</span>
				<span class="kd">var</span> <span class="nx">instance</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>

				<span class="nx">instance</span><span class="p">[</span><span class="s1">&#39;_&#39;</span> <span class="o">+</span> <span class="nx">key</span><span class="p">]</span> <span class="o">=</span> <span class="nx">value</span><span class="p">;</span>
			<span class="p">},</span>

			<span class="nx">_uiAutoSize</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
				<span class="kd">var</span> <span class="nx">instance</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>

				<span class="kd">var</span> <span class="nx">node</span> <span class="o">=</span> <span class="nx">instance</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;node&#39;</span><span class="p">);</span>
				<span class="kd">var</span> <span class="nx">heightMonitor</span> <span class="o">=</span> <span class="nx">instance</span><span class="p">.</span><span class="nx">_heightMonitor</span><span class="p">;</span>

				<span class="kd">var</span> <span class="nx">minHeight</span> <span class="o">=</span> <span class="nx">instance</span><span class="p">.</span><span class="nx">_minHeight</span><span class="p">;</span>
				<span class="kd">var</span> <span class="nx">maxHeight</span> <span class="o">=</span> <span class="nx">instance</span><span class="p">.</span><span class="nx">_maxHeight</span><span class="p">;</span>

				<span class="kd">var</span> <span class="nx">content</span> <span class="o">=</span> <span class="nx">node</span><span class="p">.</span><span class="nx">val</span><span class="p">();</span>
				<span class="kd">var</span> <span class="nx">textNode</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createTextNode</span><span class="p">(</span><span class="nx">content</span><span class="p">);</span>

				<span class="nx">heightMonitor</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s1">&#39;innerHTML&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">);</span>

				<span class="nx">heightMonitor</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">textNode</span><span class="p">);</span>

				<span class="nx">heightMonitor</span><span class="p">.</span><span class="nx">setStyle</span><span class="p">(</span><span class="s1">&#39;width&#39;</span><span class="p">,</span> <span class="nx">node</span><span class="p">.</span><span class="nx">getComputedStyle</span><span class="p">(</span><span class="s1">&#39;width&#39;</span><span class="p">));</span>

				<span class="nx">content</span> <span class="o">=</span> <span class="nx">heightMonitor</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;innerHTML&#39;</span><span class="p">);</span>

				<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">content</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="p">{</span>
					<span class="nx">content</span> <span class="o">=</span> <span class="nx">DEFAULT_EMPTY_CONTENT</span><span class="p">;</span>
				<span class="p">}</span>
				<span class="k">else</span> <span class="p">{</span>
					<span class="nx">content</span> <span class="o">+=</span> <span class="nx">DEFAULT_APPEND_CONTENT</span><span class="p">;</span>
				<span class="p">}</span>

				<span class="nx">instance</span><span class="p">.</span><span class="nx">_updateContent</span><span class="p">(</span><span class="nx">content</span><span class="p">);</span>

				<span class="kd">var</span> <span class="nx">height</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span><span class="nx">heightMonitor</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;offsetHeight&#39;</span><span class="p">),</span> <span class="nx">minHeight</span><span class="p">);</span>

				<span class="nx">height</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">min</span><span class="p">(</span><span class="nx">height</span><span class="p">,</span> <span class="nx">maxHeight</span><span class="p">);</span>

				<span class="k">if</span> <span class="p">(</span><span class="nx">height</span> <span class="o">!=</span> <span class="nx">instance</span><span class="p">.</span><span class="nx">_lastHeight</span><span class="p">)</span> <span class="p">{</span>
					<span class="nx">instance</span><span class="p">.</span><span class="nx">_lastHeight</span> <span class="o">=</span> <span class="nx">height</span><span class="p">;</span>

					<span class="nx">instance</span><span class="p">.</span><span class="nx">_uiSetDim</span><span class="p">(</span><span class="s1">&#39;height&#39;</span><span class="p">,</span> <span class="nx">height</span><span class="p">);</span>
				<span class="p">}</span>
			<span class="p">},</span>

			<span class="nx">_uiSetDim</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">key</span><span class="p">,</span> <span class="nx">newVal</span><span class="p">)</span> <span class="p">{</span>
				<span class="kd">var</span> <span class="nx">instance</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>

				<span class="kd">var</span> <span class="nx">node</span> <span class="o">=</span> <span class="nx">instance</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;node&#39;</span><span class="p">);</span>

				<span class="k">if</span> <span class="p">(</span><span class="nx">Lang</span><span class="p">.</span><span class="nx">isNumber</span><span class="p">(</span><span class="nx">newVal</span><span class="p">))</span> <span class="p">{</span>
					<span class="nx">newVal</span> <span class="o">+=</span> <span class="s1">&#39;px&#39;</span><span class="p">;</span>
				<span class="p">}</span>

				<span class="nx">node</span><span class="p">.</span><span class="nx">setStyle</span><span class="p">(</span><span class="nx">key</span><span class="p">,</span> <span class="nx">newVal</span><span class="p">);</span>
			<span class="p">},</span>

			<span class="nx">_updateInnerContent</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">content</span><span class="p">)</span> <span class="p">{</span>
				<span class="kd">var</span> <span class="nx">instance</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>

				<span class="k">return</span> <span class="nx">instance</span><span class="p">.</span><span class="nx">_heightMonitor</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s1">&#39;innerHTML&#39;</span><span class="p">,</span> <span class="nx">content</span><span class="p">);</span>
			<span class="p">},</span>

			<span class="nx">_updateOuterContent</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">content</span><span class="p">)</span> <span class="p">{</span>
				<span class="kd">var</span> <span class="nx">instance</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>

				<span class="nx">content</span> <span class="o">=</span> <span class="nx">content</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/\n/g</span><span class="p">,</span> <span class="s1">&#39;&lt;br /&gt;&#39;</span><span class="p">);</span>

				<span class="k">return</span> <span class="nx">instance</span><span class="p">.</span><span class="nx">_updateInnerContent</span><span class="p">(</span><span class="nx">content</span><span class="p">);</span>
			<span class="p">}</span>
		<span class="p">}</span>
	<span class="p">}</span>
<span class="p">);</span>

<span class="nx">A</span><span class="p">.</span><span class="nx">Textarea</span> <span class="o">=</span> <span class="nx">Textarea</span><span class="p">;</span>

<span class="p">},</span> <span class="s1">&#39;@VERSION@&#39;</span> <span class="p">,{</span><span class="nx">skinnable</span><span class="o">:</span><span class="kc">true</span><span class="p">,</span> <span class="nx">requires</span><span class="o">:</span><span class="p">[</span><span class="s1">&#39;aui-form-textfield&#39;</span><span class="p">]});</span>
<span class="nx">AUI</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="s1">&#39;aui-form-textfield&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">A</span><span class="p">)</span> <span class="p">{</span>
<span class="kd">var</span> <span class="nx">Lang</span> <span class="o">=</span> <span class="nx">A</span><span class="p">.</span><span class="nx">Lang</span><span class="p">,</span>

	<span class="nx">getClassName</span> <span class="o">=</span> <span class="nx">A</span><span class="p">.</span><span class="nx">ClassNameManager</span><span class="p">.</span><span class="nx">getClassName</span><span class="p">,</span>

	<span class="nx">NAME</span> <span class="o">=</span> <span class="s1">&#39;textfield&#39;</span><span class="p">,</span>

	<span class="nx">CSS_TEXTFIELD</span> <span class="o">=</span> <span class="nx">getClassName</span><span class="p">(</span><span class="nx">NAME</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">Textfield</span> <span class="o">=</span> <span class="nx">A</span><span class="p">.</span><span class="nx">Component</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span>
	<span class="p">{</span>
		<span class="nx">NAME</span><span class="o">:</span> <span class="nx">NAME</span><span class="p">,</span>

		<span class="nx">ATTRS</span><span class="o">:</span> <span class="p">{</span>
			<span class="nx">selectOnFocus</span><span class="o">:</span> <span class="p">{</span>
				<span class="nx">value</span><span class="o">:</span> <span class="kc">false</span>
			<span class="p">},</span>

			<span class="nx">allowOnly</span><span class="o">:</span> <span class="p">{</span>
				<span class="nx">value</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
				<span class="nx">validator</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
					<span class="kd">var</span> <span class="nx">instance</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>

					<span class="k">return</span> <span class="nx">value</span> <span class="k">instanceof</span> <span class="nb">RegExp</span><span class="p">;</span>
				<span class="p">}</span>
			<span class="p">},</span>

			<span class="nx">defaultValue</span><span class="o">:</span> <span class="p">{</span>
				<span class="nx">value</span><span class="o">:</span> <span class="s1">&#39;&#39;</span>
			<span class="p">},</span>

			<span class="nx">validator</span><span class="o">:</span> <span class="p">{</span>
				<span class="nx">value</span><span class="o">:</span> <span class="kc">null</span>
			<span class="p">}</span>
		<span class="p">},</span>

		<span class="nx">EXTENDS</span><span class="o">:</span> <span class="nx">A</span><span class="p">.</span><span class="nx">Field</span><span class="p">,</span>

		<span class="nx">prototype</span><span class="o">:</span> <span class="p">{</span>
			<span class="nx">bindUI</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
				<span class="kd">var</span> <span class="nx">instance</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>

				<span class="nx">Textfield</span><span class="p">.</span><span class="nx">superclass</span><span class="p">.</span><span class="nx">bindUI</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">instance</span><span class="p">);</span>

				<span class="kd">var</span> <span class="nx">node</span> <span class="o">=</span> <span class="nx">instance</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;node&#39;</span><span class="p">);</span>

				<span class="k">if</span> <span class="p">(</span><span class="nx">instance</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;allowOnly&#39;</span><span class="p">))</span> <span class="p">{</span>
					<span class="nx">node</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;keypress&#39;</span><span class="p">,</span> <span class="nx">instance</span><span class="p">.</span><span class="nx">_filterInputText</span><span class="p">,</span> <span class="nx">instance</span><span class="p">);</span>
				<span class="p">}</span>

				<span class="k">if</span> <span class="p">(</span><span class="nx">instance</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;selectOnFocus&#39;</span><span class="p">))</span> <span class="p">{</span>
					<span class="nx">node</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;focus&#39;</span><span class="p">,</span> <span class="nx">instance</span><span class="p">.</span><span class="nx">_selectInputText</span><span class="p">,</span> <span class="nx">instance</span><span class="p">);</span>
				<span class="p">}</span>

				<span class="kd">var</span> <span class="nx">defaultValue</span> <span class="o">=</span> <span class="nx">instance</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;defaultValue&#39;</span><span class="p">);</span>

				<span class="k">if</span> <span class="p">(</span><span class="nx">defaultValue</span><span class="p">)</span> <span class="p">{</span>
					<span class="nx">node</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;blur&#39;</span><span class="p">,</span> <span class="nx">instance</span><span class="p">.</span><span class="nx">_checkDefaultValue</span><span class="p">,</span> <span class="nx">instance</span><span class="p">);</span>
					<span class="nx">node</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;focus&#39;</span><span class="p">,</span> <span class="nx">instance</span><span class="p">.</span><span class="nx">_checkDefaultValue</span><span class="p">,</span> <span class="nx">instance</span><span class="p">);</span>
				<span class="p">}</span>
			<span class="p">},</span>

			<span class="nx">syncUI</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
				<span class="kd">var</span> <span class="nx">instance</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>

				<span class="kd">var</span> <span class="nx">currentValue</span> <span class="o">=</span> <span class="nx">instance</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;value&#39;</span><span class="p">);</span>

				<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">currentValue</span><span class="p">)</span> <span class="p">{</span>
					<span class="kd">var</span> <span class="nx">defaultValue</span> <span class="o">=</span> <span class="nx">instance</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;defaultValue&#39;</span><span class="p">);</span>

					<span class="nx">instance</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s1">&#39;value&#39;</span><span class="p">,</span> <span class="nx">instance</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;defaultValue&#39;</span><span class="p">));</span>
				<span class="p">}</span>

				<span class="nx">Textfield</span><span class="p">.</span><span class="nx">superclass</span><span class="p">.</span><span class="nx">syncUI</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">instance</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">);</span>
			<span class="p">},</span>

			<span class="nx">_filterInputText</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
				<span class="kd">var</span> <span class="nx">instance</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>

				<span class="kd">var</span> <span class="nx">allowOnly</span> <span class="o">=</span> <span class="nx">instance</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;allowOnly&#39;</span><span class="p">);</span>

				<span class="kd">var</span> <span class="nx">inputChar</span> <span class="o">=</span> <span class="nb">String</span><span class="p">.</span><span class="nx">fromCharCode</span><span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">charCode</span><span class="p">);</span>

				<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">allowOnly</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">inputChar</span><span class="p">))</span> <span class="p">{</span>
					<span class="nx">event</span><span class="p">.</span><span class="nx">halt</span><span class="p">();</span>
				<span class="p">}</span>
			<span class="p">},</span>

			<span class="nx">_checkDefaultValue</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
				<span class="kd">var</span> <span class="nx">instance</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>

				<span class="kd">var</span> <span class="nx">defaultValue</span> <span class="o">=</span> <span class="nx">instance</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;defaultValue&#39;</span><span class="p">);</span>
				<span class="kd">var</span> <span class="nx">node</span> <span class="o">=</span> <span class="nx">instance</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;node&#39;</span><span class="p">);</span>
				<span class="kd">var</span> <span class="nx">currentValue</span> <span class="o">=</span> <span class="nx">Lang</span><span class="p">.</span><span class="nx">trim</span><span class="p">(</span><span class="nx">instance</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;value&#39;</span><span class="p">));</span>
				<span class="kd">var</span> <span class="nx">eventType</span> <span class="o">=</span> <span class="nx">event</span><span class="p">.</span><span class="nx">type</span><span class="p">;</span>

				<span class="kd">var</span> <span class="nx">focus</span> <span class="o">=</span> <span class="p">(</span><span class="nx">eventType</span> <span class="o">==</span> <span class="s1">&#39;focus&#39;</span> <span class="o">||</span> <span class="nx">eventType</span> <span class="o">==</span> <span class="s1">&#39;focusin&#39;</span><span class="p">);</span>

				<span class="k">if</span> <span class="p">(</span><span class="nx">defaultValue</span><span class="p">)</span> <span class="p">{</span>
					<span class="kd">var</span> <span class="nx">value</span> <span class="o">=</span> <span class="nx">currentValue</span><span class="p">;</span>

					<span class="k">if</span> <span class="p">(</span><span class="nx">focus</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">currentValue</span> <span class="o">==</span> <span class="nx">defaultValue</span><span class="p">))</span> <span class="p">{</span>
						<span class="nx">value</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>
					<span class="p">}</span>
					<span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">focus</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">currentValue</span><span class="p">)</span> <span class="p">{</span>
						<span class="nx">value</span> <span class="o">=</span> <span class="nx">defaultValue</span><span class="p">;</span>
					<span class="p">}</span>

					<span class="nx">instance</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s1">&#39;value&#39;</span><span class="p">,</span> <span class="nx">value</span><span class="p">);</span>
				<span class="p">}</span>
			<span class="p">},</span>

			<span class="nx">_selectInputText</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
				<span class="kd">var</span> <span class="nx">instance</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>

				<span class="nx">event</span><span class="p">.</span><span class="nx">currentTarget</span><span class="p">.</span><span class="nx">select</span><span class="p">();</span>
			<span class="p">}</span>
		<span class="p">}</span>
	<span class="p">}</span>
<span class="p">);</span>

<span class="nx">A</span><span class="p">.</span><span class="nx">Textfield</span> <span class="o">=</span> <span class="nx">Textfield</span><span class="p">;</span>

<span class="p">},</span> <span class="s1">&#39;@VERSION@&#39;</span> <span class="p">,{</span><span class="nx">requires</span><span class="o">:</span><span class="p">[</span><span class="s1">&#39;aui-form-field&#39;</span><span class="p">]});</span>
<span class="nx">AUI</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="s1">&#39;aui-form-validator&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">A</span><span class="p">)</span> <span class="p">{</span>
<span class="c1">// API inspired on the amazing jQuery Form Validation - http://jquery.bassistance.de/validate/</span>

<span class="kd">var</span> <span class="nx">L</span> <span class="o">=</span> <span class="nx">A</span><span class="p">.</span><span class="nx">Lang</span><span class="p">,</span>
	<span class="nx">O</span> <span class="o">=</span> <span class="nx">A</span><span class="p">.</span><span class="nb">Object</span><span class="p">,</span>
	<span class="nx">isBoolean</span> <span class="o">=</span> <span class="nx">L</span><span class="p">.</span><span class="nx">isBoolean</span><span class="p">,</span>
	<span class="nx">isDate</span> <span class="o">=</span> <span class="nx">L</span><span class="p">.</span><span class="nx">isDate</span><span class="p">,</span>
	<span class="nx">isEmpty</span> <span class="o">=</span> <span class="nx">O</span><span class="p">.</span><span class="nx">isEmpty</span><span class="p">,</span>
	<span class="nx">isFunction</span> <span class="o">=</span> <span class="nx">L</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">,</span>
	<span class="nx">isObject</span> <span class="o">=</span> <span class="nx">L</span><span class="p">.</span><span class="nx">isObject</span><span class="p">,</span>
	<span class="nx">isString</span> <span class="o">=</span> <span class="nx">L</span><span class="p">.</span><span class="nx">isString</span><span class="p">,</span>
	<span class="nx">trim</span> <span class="o">=</span> <span class="nx">L</span><span class="p">.</span><span class="nx">trim</span><span class="p">,</span>

	<span class="nx">DASH</span> <span class="o">=</span> <span class="s1">&#39;-&#39;</span><span class="p">,</span>
	<span class="nx">DOT</span> <span class="o">=</span> <span class="s1">&#39;.&#39;</span><span class="p">,</span>
	<span class="nx">EMPTY_STRING</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
	<span class="nx">FORM_VALIDATOR</span> <span class="o">=</span> <span class="s1">&#39;form-validator&#39;</span><span class="p">,</span>
	<span class="nx">INVALID_DATE</span> <span class="o">=</span> <span class="s1">&#39;Invalid Date&#39;</span><span class="p">,</span>
	<span class="nx">PIPE</span> <span class="o">=</span> <span class="s1">&#39;|&#39;</span><span class="p">,</span>

	<span class="nx">BLUR_HANDLERS</span> <span class="o">=</span> <span class="s1">&#39;blurHandlers&#39;</span><span class="p">,</span>
	<span class="nx">CHECKBOX</span> <span class="o">=</span> <span class="s1">&#39;checkbox&#39;</span><span class="p">,</span>
	<span class="nx">CONTAINER</span> <span class="o">=</span> <span class="s1">&#39;container&#39;</span><span class="p">,</span>
	<span class="nx">CONTAINER_ERROR_CLASS</span> <span class="o">=</span> <span class="s1">&#39;containerErrorClass&#39;</span><span class="p">,</span>
	<span class="nx">CONTAINER_VALID_CLASS</span> <span class="o">=</span> <span class="s1">&#39;containerValidClass&#39;</span><span class="p">,</span>
	<span class="nx">CONTENT_BOX</span> <span class="o">=</span> <span class="s1">&#39;contentBox&#39;</span><span class="p">,</span>
	<span class="nx">ERROR</span> <span class="o">=</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span>
	<span class="nx">ERROR_CLASS</span> <span class="o">=</span> <span class="s1">&#39;errorClass&#39;</span><span class="p">,</span>
	<span class="nx">EXTRACT_CSS_PREFIX</span> <span class="o">=</span> <span class="s1">&#39;extractCssPrefix&#39;</span><span class="p">,</span>
	<span class="nx">EXTRACT_RULES</span> <span class="o">=</span> <span class="s1">&#39;extractRules&#39;</span><span class="p">,</span>
	<span class="nx">FIELD</span> <span class="o">=</span> <span class="s1">&#39;field&#39;</span><span class="p">,</span>
	<span class="nx">FIELD_CONTAINER</span> <span class="o">=</span> <span class="s1">&#39;fieldContainer&#39;</span><span class="p">,</span>
	<span class="nx">FIELD_STRINGS</span> <span class="o">=</span> <span class="s1">&#39;fieldStrings&#39;</span><span class="p">,</span>
	<span class="nx">INPUT_HANDLERS</span> <span class="o">=</span> <span class="s1">&#39;inputHandlers&#39;</span><span class="p">,</span>
	<span class="nx">MESSAGE</span> <span class="o">=</span> <span class="s1">&#39;message&#39;</span><span class="p">,</span>
	<span class="nx">MESSAGE_CONTAINER</span> <span class="o">=</span> <span class="s1">&#39;messageContainer&#39;</span><span class="p">,</span>
	<span class="nx">NAME</span> <span class="o">=</span> <span class="s1">&#39;name&#39;</span><span class="p">,</span>
	<span class="nx">RADIO</span> <span class="o">=</span> <span class="s1">&#39;radio&#39;</span><span class="p">,</span>
	<span class="nx">RULES</span> <span class="o">=</span> <span class="s1">&#39;rules&#39;</span><span class="p">,</span>
	<span class="nx">SELECT_TEXT</span> <span class="o">=</span> <span class="s1">&#39;selectText&#39;</span><span class="p">,</span>
	<span class="nx">SHOW_ALL_MESSAGES</span> <span class="o">=</span> <span class="s1">&#39;showAllMessages&#39;</span><span class="p">,</span>
	<span class="nx">SHOW_MESSAGES</span> <span class="o">=</span> <span class="s1">&#39;showMessages&#39;</span><span class="p">,</span>
	<span class="nx">STACK</span> <span class="o">=</span> <span class="s1">&#39;stack&#39;</span><span class="p">,</span>
	<span class="nx">STACK_ERROR_CONTAINER</span> <span class="o">=</span> <span class="s1">&#39;stackErrorContainer&#39;</span><span class="p">,</span>
	<span class="nx">TYPE</span> <span class="o">=</span> <span class="s1">&#39;type&#39;</span><span class="p">,</span>
	<span class="nx">VALID</span> <span class="o">=</span> <span class="s1">&#39;valid&#39;</span><span class="p">,</span>
	<span class="nx">VALIDATE_ON_BLUR</span> <span class="o">=</span> <span class="s1">&#39;validateOnBlur&#39;</span><span class="p">,</span>
	<span class="nx">VALIDATE_ON_INPUT</span> <span class="o">=</span> <span class="s1">&#39;validateOnInput&#39;</span><span class="p">,</span>
	<span class="nx">VALID_CLASS</span> <span class="o">=</span> <span class="s1">&#39;validClass&#39;</span><span class="p">,</span>

	<span class="nx">EV_BLUR</span> <span class="o">=</span> <span class="s1">&#39;blur&#39;</span><span class="p">,</span>
	<span class="nx">EV_ERROR_FIELD</span> <span class="o">=</span> <span class="s1">&#39;errorField&#39;</span><span class="p">,</span>
	<span class="nx">EV_INPUT</span> <span class="o">=</span> <span class="s1">&#39;input&#39;</span><span class="p">,</span>
	<span class="nx">EV_RESET</span> <span class="o">=</span> <span class="s1">&#39;reset&#39;</span><span class="p">,</span>
	<span class="nx">EV_SUBMIT</span> <span class="o">=</span> <span class="s1">&#39;submit&#39;</span><span class="p">,</span>
	<span class="nx">EV_SUBMIT_ERROR</span> <span class="o">=</span> <span class="s1">&#39;submitError&#39;</span><span class="p">,</span>
	<span class="nx">EV_VALIDATE_FIELD</span> <span class="o">=</span> <span class="s1">&#39;validateField&#39;</span><span class="p">,</span>
	<span class="nx">EV_VALID_FIELD</span> <span class="o">=</span> <span class="s1">&#39;validField&#39;</span><span class="p">,</span>

	<span class="nx">getCN</span> <span class="o">=</span> <span class="nx">A</span><span class="p">.</span><span class="nx">ClassNameManager</span><span class="p">.</span><span class="nx">getClassName</span><span class="p">,</span>

	<span class="nx">CSS_ERROR</span> <span class="o">=</span> <span class="nx">getCN</span><span class="p">(</span><span class="nx">FORM_VALIDATOR</span><span class="p">,</span> <span class="nx">ERROR</span><span class="p">),</span>
	<span class="nx">CSS_ERROR_CONTAINER</span> <span class="o">=</span> <span class="nx">getCN</span><span class="p">(</span><span class="nx">FORM_VALIDATOR</span><span class="p">,</span> <span class="nx">ERROR</span><span class="p">,</span> <span class="nx">CONTAINER</span><span class="p">),</span>
	<span class="nx">CSS_VALID</span> <span class="o">=</span> <span class="nx">getCN</span><span class="p">(</span><span class="nx">FORM_VALIDATOR</span><span class="p">,</span> <span class="nx">VALID</span><span class="p">),</span>
	<span class="nx">CSS_VALID_CONTAINER</span> <span class="o">=</span> <span class="nx">getCN</span><span class="p">(</span><span class="nx">FORM_VALIDATOR</span><span class="p">,</span> <span class="nx">VALID</span><span class="p">,</span> <span class="nx">CONTAINER</span><span class="p">),</span>

	<span class="nx">CSS_FIELD</span> <span class="o">=</span> <span class="nx">getCN</span><span class="p">(</span><span class="nx">FIELD</span><span class="p">),</span>
	<span class="nx">CSS_MESSAGE</span> <span class="o">=</span> <span class="nx">getCN</span><span class="p">(</span><span class="nx">FORM_VALIDATOR</span><span class="p">,</span> <span class="nx">MESSAGE</span><span class="p">),</span>
	<span class="nx">CSS_STACK_ERROR</span> <span class="o">=</span> <span class="nx">getCN</span><span class="p">(</span><span class="nx">FORM_VALIDATOR</span><span class="p">,</span> <span class="nx">STACK</span><span class="p">,</span> <span class="nx">ERROR</span><span class="p">),</span>

	<span class="nx">TPL_MESSAGE</span> <span class="o">=</span> <span class="s1">&#39;&lt;div class=&quot;&#39;</span><span class="o">+</span><span class="nx">CSS_MESSAGE</span><span class="o">+</span><span class="s1">&#39;&quot;&gt;&lt;/div&gt;&#39;</span><span class="p">,</span>
	<span class="nx">TPL_STACK_ERROR</span> <span class="o">=</span> <span class="s1">&#39;&lt;label class=&quot;&#39;</span><span class="o">+</span><span class="nx">CSS_STACK_ERROR</span><span class="o">+</span><span class="s1">&#39;&quot;&gt;&lt;/label&gt;&#39;</span><span class="p">,</span>

	<span class="nx">UI_ATTRS</span> <span class="o">=</span> <span class="p">[</span> <span class="nx">EXTRACT_RULES</span><span class="p">,</span> <span class="nx">VALIDATE_ON_BLUR</span><span class="p">,</span> <span class="nx">VALIDATE_ON_INPUT</span> <span class="p">];</span>

<span class="nx">YUI</span><span class="p">.</span><span class="nx">AUI</span><span class="p">.</span><span class="nx">defaults</span><span class="p">.</span><span class="nx">FormValidator</span> <span class="o">=</span> <span class="p">{</span>
	<span class="nx">STRINGS</span><span class="o">:</span> <span class="p">{</span>
		<span class="nx">DEFAULT</span><span class="o">:</span> <span class="s1">&#39;Please fix this field.&#39;</span><span class="p">,</span>
		<span class="nx">acceptFiles</span><span class="o">:</span> <span class="s1">&#39;Please enter a value with a valid extension ({0}).&#39;</span><span class="p">,</span>
		<span class="nx">alpha</span><span class="o">:</span> <span class="s1">&#39;Please enter only apha characters.&#39;</span><span class="p">,</span>
		<span class="nx">alphanum</span><span class="o">:</span> <span class="s1">&#39;Please enter only aphanumeric characters.&#39;</span><span class="p">,</span>
		<span class="nx">date</span><span class="o">:</span> <span class="s1">&#39;Please enter a valid date.&#39;</span><span class="p">,</span>
		<span class="nx">digits</span><span class="o">:</span> <span class="s1">&#39;Please enter only digits.&#39;</span><span class="p">,</span>
		<span class="nx">email</span><span class="o">:</span> <span class="s1">&#39;Please enter a valid email address.&#39;</span><span class="p">,</span>
		<span class="nx">equalTo</span><span class="o">:</span> <span class="s1">&#39;Please enter the same value again.&#39;</span><span class="p">,</span>
		<span class="nx">max</span><span class="o">:</span> <span class="s1">&#39;Please enter a value less than or equal to {0}.&#39;</span><span class="p">,</span>
		<span class="nx">maxLength</span><span class="o">:</span> <span class="s1">&#39;Please enter no more than {0} characters.&#39;</span><span class="p">,</span>
		<span class="nx">min</span><span class="o">:</span> <span class="s1">&#39;Please enter a value greater than or equal to {0}.&#39;</span><span class="p">,</span>
		<span class="nx">minLength</span><span class="o">:</span> <span class="s1">&#39;Please enter at least {0} characters.&#39;</span><span class="p">,</span>
		<span class="nx">number</span><span class="o">:</span> <span class="s1">&#39;Please enter a valid number.&#39;</span><span class="p">,</span>
		<span class="nx">range</span><span class="o">:</span> <span class="s1">&#39;Please enter a value between {0} and {1}.&#39;</span><span class="p">,</span>
		<span class="nx">rangeLength</span><span class="o">:</span> <span class="s1">&#39;Please enter a value between {0} and {1} characters long.&#39;</span><span class="p">,</span>
		<span class="nx">required</span><span class="o">:</span> <span class="s1">&#39;This field is required.&#39;</span><span class="p">,</span>
		<span class="nx">url</span><span class="o">:</span> <span class="s1">&#39;Please enter a valid URL.&#39;</span>
	<span class="p">},</span>

	<span class="nx">REGEX</span><span class="o">:</span> <span class="p">{</span>
		<span class="nx">alpha</span><span class="o">:</span> <span class="sr">/^[a-z_]+$/i</span><span class="p">,</span>

		<span class="nx">alphanum</span><span class="o">:</span> <span class="sr">/^\w+$/</span><span class="p">,</span>

		<span class="nx">digits</span><span class="o">:</span> <span class="sr">/^\d+$/</span><span class="p">,</span>

		<span class="nx">number</span><span class="o">:</span> <span class="sr">/^[+\-]?(\d+([.,]\d+)?)+$/</span><span class="p">,</span>

		<span class="c1">// Regex from Scott Gonzalez Email Address Validation: http://projects.scottsplayground.com/email_address_validation/</span>
		<span class="nx">email</span><span class="o">:</span> <span class="sr">/^((([a-z]|\d|[!#\$%&amp;&#39;\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&amp;&#39;\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i</span><span class="p">,</span>

		<span class="c1">// Regex from Scott Gonzalez IRI: http://projects.scottsplayground.com/iri/</span>
		<span class="nx">url</span><span class="o">:</span> <span class="sr">/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&amp;&#39;\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&amp;&#39;\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&amp;&#39;\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&amp;&#39;\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&amp;&#39;\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i</span>
	<span class="p">},</span>

	<span class="nx">RULES</span><span class="o">:</span> <span class="p">{</span>
		<span class="nx">acceptFiles</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">val</span><span class="p">,</span> <span class="nx">node</span><span class="p">,</span> <span class="nx">ruleValue</span><span class="p">)</span> <span class="p">{</span>
			<span class="kd">var</span> <span class="nx">regex</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>

			<span class="k">if</span> <span class="p">(</span><span class="nx">isString</span><span class="p">(</span><span class="nx">ruleValue</span><span class="p">))</span> <span class="p">{</span>
				<span class="c1">// convert syntax (jpg, png) or (jpg png) to regex syntax (jpg|png)</span>
				<span class="kd">var</span> <span class="nx">extensions</span> <span class="o">=</span> <span class="nx">ruleValue</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="sr">/,\s*|\b\s*/</span><span class="p">).</span><span class="nx">join</span><span class="p">(</span><span class="nx">PIPE</span><span class="p">);</span>

				<span class="nx">regex</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">RegExp</span><span class="p">(</span><span class="s1">&#39;[.](&#39;</span> <span class="o">+</span> <span class="nx">extensions</span> <span class="o">+</span> <span class="s1">&#39;)$&#39;</span><span class="p">,</span> <span class="s1">&#39;i&#39;</span><span class="p">);</span>
			<span class="p">}</span>

			<span class="k">return</span> <span class="nx">regex</span> <span class="o">&amp;&amp;</span> <span class="nx">regex</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">val</span><span class="p">);</span>
		<span class="p">},</span>

		<span class="nx">date</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">val</span><span class="p">,</span> <span class="nx">node</span><span class="p">,</span> <span class="nx">ruleValue</span><span class="p">)</span> <span class="p">{</span>
			<span class="kd">var</span> <span class="nx">date</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="nx">val</span><span class="p">);</span>

			<span class="k">return</span> <span class="p">(</span><span class="nx">isDate</span><span class="p">(</span><span class="nx">date</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">date</span> <span class="o">!=</span> <span class="nx">INVALID_DATE</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nb">isNaN</span><span class="p">(</span><span class="nx">date</span><span class="p">));</span>
		<span class="p">},</span>

		<span class="nx">equalTo</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">val</span><span class="p">,</span> <span class="nx">node</span><span class="p">,</span> <span class="nx">ruleValue</span><span class="p">)</span> <span class="p">{</span>
			<span class="kd">var</span> <span class="nx">comparator</span> <span class="o">=</span> <span class="nx">A</span><span class="p">.</span><span class="nx">one</span><span class="p">(</span><span class="nx">ruleValue</span><span class="p">);</span>

			<span class="k">return</span> <span class="nx">comparator</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">trim</span><span class="p">(</span><span class="nx">comparator</span><span class="p">.</span><span class="nx">val</span><span class="p">())</span> <span class="o">==</span> <span class="nx">val</span><span class="p">);</span>
		<span class="p">},</span>

		<span class="nx">max</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">val</span><span class="p">,</span> <span class="nx">node</span><span class="p">,</span> <span class="nx">ruleValue</span><span class="p">)</span> <span class="p">{</span>
			<span class="k">return</span> <span class="p">(</span><span class="nx">FormValidator</span><span class="p">.</span><span class="nx">toNumber</span><span class="p">(</span><span class="nx">val</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="nx">ruleValue</span><span class="p">);</span>
		<span class="p">},</span>

		<span class="nx">maxLength</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">val</span><span class="p">,</span> <span class="nx">node</span><span class="p">,</span> <span class="nx">ruleValue</span><span class="p">)</span> <span class="p">{</span>
			<span class="k">return</span> <span class="p">(</span><span class="nx">val</span><span class="p">.</span><span class="nx">length</span> <span class="o">&lt;=</span> <span class="nx">ruleValue</span><span class="p">);</span>
		<span class="p">},</span>

		<span class="nx">min</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">val</span><span class="p">,</span> <span class="nx">node</span><span class="p">,</span> <span class="nx">ruleValue</span><span class="p">)</span> <span class="p">{</span>
			<span class="k">return</span> <span class="p">(</span><span class="nx">FormValidator</span><span class="p">.</span><span class="nx">toNumber</span><span class="p">(</span><span class="nx">val</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="nx">ruleValue</span><span class="p">);</span>
		<span class="p">},</span>

		<span class="nx">minLength</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">val</span><span class="p">,</span> <span class="nx">node</span><span class="p">,</span> <span class="nx">ruleValue</span><span class="p">)</span> <span class="p">{</span>
			<span class="k">return</span> <span class="p">(</span><span class="nx">val</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;=</span> <span class="nx">ruleValue</span><span class="p">);</span>
		<span class="p">},</span>

		<span class="nx">range</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">val</span><span class="p">,</span> <span class="nx">node</span><span class="p">,</span> <span class="nx">ruleValue</span><span class="p">)</span> <span class="p">{</span>
			<span class="kd">var</span> <span class="nx">num</span> <span class="o">=</span> <span class="nx">FormValidator</span><span class="p">.</span><span class="nx">toNumber</span><span class="p">(</span><span class="nx">val</span><span class="p">);</span>

			<span class="k">return</span> <span class="p">(</span><span class="nx">num</span> <span class="o">&gt;=</span> <span class="nx">ruleValue</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">num</span> <span class="o">&lt;=</span> <span class="nx">ruleValue</span><span class="p">[</span><span class="mi">1</span><span class="p">]);</span>
		<span class="p">},</span>

		<span class="nx">rangeLength</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">val</span><span class="p">,</span> <span class="nx">node</span><span class="p">,</span> <span class="nx">ruleValue</span><span class="p">)</span> <span class="p">{</span>
			<span class="kd">var</span> <span class="nx">length</span> <span class="o">=</span> <span class="nx">val</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>

			<span class="k">return</span> <span class="p">(</span><span class="nx">length</span> <span class="o">&gt;=</span> <span class="nx">ruleValue</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">length</span> <span class="o">&lt;=</span> <span class="nx">ruleValue</span><span class="p">[</span><span class="mi">1</span><span class="p">]);</span>
		<span class="p">},</span>

		<span class="nx">required</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">val</span><span class="p">,</span> <span class="nx">node</span><span class="p">,</span> <span class="nx">ruleValue</span><span class="p">)</span> <span class="p">{</span>
			<span class="kd">var</span> <span class="nx">instance</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>

			<span class="k">if</span> <span class="p">(</span><span class="nx">A</span><span class="p">.</span><span class="nx">FormValidator</span><span class="p">.</span><span class="nx">isCheckable</span><span class="p">(</span><span class="nx">node</span><span class="p">))</span> <span class="p">{</span>
				<span class="kd">var</span> <span class="nx">name</span> <span class="o">=</span> <span class="nx">node</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">NAME</span><span class="p">);</span>
				<span class="kd">var</span> <span class="nx">elements</span> <span class="o">=</span> <span class="nx">instance</span><span class="p">.</span><span class="nx">getElementsByName</span><span class="p">(</span><span class="nx">name</span><span class="p">);</span>

				<span class="k">return</span> <span class="p">(</span><span class="nx">elements</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="s1">&#39;:checked&#39;</span><span class="p">).</span><span class="nx">size</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">);</span>
			<span class="p">}</span>
			<span class="k">else</span> <span class="p">{</span>
				<span class="k">return</span> <span class="o">!!</span><span class="nx">val</span><span class="p">;</span>
			<span class="p">}</span>
		<span class="p">}</span>
	<span class="p">}</span>
<span class="p">};</span>

<span class="kd">var</span> <span class="nx">FormValidator</span> <span class="o">=</span> <span class="nx">A</span><span class="p">.</span><span class="nx">Component</span><span class="p">.</span><span class="nx">create</span><span class="p">({</span>
	<span class="nx">NAME</span><span class="o">:</span> <span class="nx">FORM_VALIDATOR</span><span class="p">,</span>

	<span class="nx">ATTRS</span><span class="o">:</span> <span class="p">{</span>
		<span class="nx">containerErrorClass</span><span class="o">:</span> <span class="p">{</span>
			<span class="nx">value</span><span class="o">:</span> <span class="nx">CSS_ERROR_CONTAINER</span><span class="p">,</span>
			<span class="nx">validator</span><span class="o">:</span> <span class="nx">isString</span>
		<span class="p">},</span>

		<span class="nx">containerValidClass</span><span class="o">:</span> <span class="p">{</span>
			<span class="nx">value</span><span class="o">:</span> <span class="nx">CSS_VALID_CONTAINER</span><span class="p">,</span>
			<span class="nx">validator</span><span class="o">:</span> <span class="nx">isString</span>
		<span class="p">},</span>

		<span class="nx">errorClass</span><span class="o">:</span> <span class="p">{</span>
			<span class="nx">value</span><span class="o">:</span> <span class="nx">CSS_ERROR</span><span class="p">,</span>
			<span class="nx">validator</span><span class="o">:</span> <span class="nx">isString</span>
		<span class="p">},</span>

		<span class="nx">extractCssPrefix</span><span class="o">:</span> <span class="p">{</span>
			<span class="nx">value</span><span class="o">:</span> <span class="nx">CSS_FIELD</span><span class="o">+</span><span class="nx">DASH</span><span class="p">,</span>
			<span class="nx">validator</span><span class="o">:</span> <span class="nx">isString</span>
		<span class="p">},</span>

		<span class="nx">extractRules</span><span class="o">:</span> <span class="p">{</span>
			<span class="nx">value</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
			<span class="nx">validator</span><span class="o">:</span> <span class="nx">isBoolean</span>
		<span class="p">},</span>

		<span class="nx">fieldContainer</span><span class="o">:</span> <span class="p">{</span>
			<span class="nx">value</span><span class="o">:</span> <span class="nx">DOT</span><span class="o">+</span><span class="nx">CSS_FIELD</span>
		<span class="p">},</span>

		<span class="nx">fieldStrings</span><span class="o">:</span> <span class="p">{</span>
			<span class="nx">value</span><span class="o">:</span> <span class="p">{},</span>
			<span class="nx">validator</span><span class="o">:</span> <span class="nx">isObject</span>
		<span class="p">},</span>

		<span class="nx">messageContainer</span><span class="o">:</span> <span class="p">{</span>
			<span class="nx">getter</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">val</span><span class="p">)</span> <span class="p">{</span>
				<span class="k">return</span> <span class="nx">A</span><span class="p">.</span><span class="nx">Node</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="nx">val</span><span class="p">).</span><span class="nx">clone</span><span class="p">();</span>
			<span class="p">},</span>
			<span class="nx">value</span><span class="o">:</span> <span class="nx">TPL_MESSAGE</span>
		<span class="p">},</span>

		<span class="nx">render</span><span class="o">:</span> <span class="p">{</span>
			<span class="nx">value</span><span class="o">:</span> <span class="kc">true</span>
		<span class="p">},</span>

		<span class="nx">strings</span><span class="o">:</span> <span class="p">{</span>
			<span class="nx">valueFn</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
				<span class="k">return</span> <span class="nx">YUI</span><span class="p">.</span><span class="nx">AUI</span><span class="p">.</span><span class="nx">defaults</span><span class="p">.</span><span class="nx">FormValidator</span><span class="p">.</span><span class="nx">STRINGS</span><span class="p">;</span>
			<span class="p">}</span>
		<span class="p">},</span>

		<span class="nx">rules</span><span class="o">:</span> <span class="p">{</span>
			<span class="nx">validator</span><span class="o">:</span> <span class="nx">isObject</span><span class="p">,</span>
			<span class="nx">value</span><span class="o">:</span> <span class="p">{}</span>
		<span class="p">},</span>

		<span class="nx">selectText</span><span class="o">:</span> <span class="p">{</span>
			<span class="nx">value</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
			<span class="nx">validator</span><span class="o">:</span> <span class="nx">isBoolean</span>
		<span class="p">},</span>

		<span class="nx">showMessages</span><span class="o">:</span> <span class="p">{</span>
			<span class="nx">value</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
			<span class="nx">validator</span><span class="o">:</span> <span class="nx">isBoolean</span>
		<span class="p">},</span>

		<span class="nx">showAllMessages</span><span class="o">:</span> <span class="p">{</span>
			<span class="nx">value</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
			<span class="nx">validator</span><span class="o">:</span> <span class="nx">isBoolean</span>
		<span class="p">},</span>

		<span class="nx">stackErrorContainer</span><span class="o">:</span> <span class="p">{</span>
			<span class="nx">getter</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">val</span><span class="p">)</span> <span class="p">{</span>
				<span class="k">return</span> <span class="nx">A</span><span class="p">.</span><span class="nx">Node</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="nx">val</span><span class="p">).</span><span class="nx">clone</span><span class="p">();</span>
			<span class="p">},</span>
			<span class="nx">value</span><span class="o">:</span> <span class="nx">TPL_STACK_ERROR</span>
		<span class="p">},</span>

		<span class="nx">validateOnBlur</span><span class="o">:</span> <span class="p">{</span>
			<span class="nx">value</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
			<span class="nx">validator</span><span class="o">:</span> <span class="nx">isBoolean</span>
		<span class="p">},</span>

		<span class="nx">validateOnInput</span><span class="o">:</span> <span class="p">{</span>
			<span class="nx">value</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
			<span class="nx">validator</span><span class="o">:</span> <span class="nx">isBoolean</span>
		<span class="p">},</span>

		<span class="nx">validClass</span><span class="o">:</span> <span class="p">{</span>
			<span class="nx">value</span><span class="o">:</span> <span class="nx">CSS_VALID</span><span class="p">,</span>
			<span class="nx">validator</span><span class="o">:</span> <span class="nx">isString</span>
		<span class="p">}</span>
	<span class="p">},</span>

	<span class="nx">isCheckable</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">node</span><span class="p">)</span> <span class="p">{</span>
		<span class="kd">var</span> <span class="nx">nodeType</span> <span class="o">=</span> <span class="nx">node</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">TYPE</span><span class="p">).</span><span class="nx">toLowerCase</span><span class="p">();</span>

		<span class="k">return</span> <span class="p">(</span><span class="nx">nodeType</span> <span class="o">==</span> <span class="nx">CHECKBOX</span> <span class="o">||</span> <span class="nx">nodeType</span> <span class="o">==</span> <span class="nx">RADIO</span><span class="p">);</span>
	<span class="p">},</span>

	<span class="nx">toNumber</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">val</span><span class="p">)</span> <span class="p">{</span>
		<span class="k">return</span> <span class="nb">parseFloat</span><span class="p">(</span><span class="nx">val</span><span class="p">)</span> <span class="o">||</span> <span class="mi">0</span><span class="p">;</span>
	<span class="p">},</span>

	<span class="nx">EXTENDS</span><span class="o">:</span> <span class="nx">A</span><span class="p">.</span><span class="nx">Widget</span><span class="p">,</span>

	<span class="nx">UI_ATTRS</span><span class="o">:</span> <span class="nx">UI_ATTRS</span><span class="p">,</span>

	<span class="nx">prototype</span><span class="o">:</span> <span class="p">{</span>
		<span class="nx">CONTENT_TEMPLATE</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
		<span class="nx">UI_EVENTS</span><span class="o">:</span> <span class="p">{},</span>

		<span class="nx">initializer</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
			<span class="kd">var</span> <span class="nx">instance</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>

			<span class="nx">instance</span><span class="p">.</span><span class="nx">blurHandlers</span> <span class="o">=</span> <span class="p">[];</span>
			<span class="nx">instance</span><span class="p">.</span><span class="nx">errors</span> <span class="o">=</span> <span class="p">{};</span>
			<span class="nx">instance</span><span class="p">.</span><span class="nx">inputHandlers</span> <span class="o">=</span> <span class="p">[];</span>
			<span class="nx">instance</span><span class="p">.</span><span class="nx">stackErrorContainers</span> <span class="o">=</span> <span class="p">{};</span>
		<span class="p">},</span>

		<span class="nx">bindUI</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
			<span class="kd">var</span> <span class="nx">instance</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>

			<span class="nx">instance</span><span class="p">.</span><span class="nx">_createEvents</span><span class="p">();</span>
			<span class="nx">instance</span><span class="p">.</span><span class="nx">_bindValidation</span><span class="p">();</span>
		<span class="p">},</span>

		<span class="nx">addFieldError</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">field</span><span class="p">,</span> <span class="nx">ruleName</span><span class="p">)</span> <span class="p">{</span>
			<span class="kd">var</span> <span class="nx">instance</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
			<span class="kd">var</span> <span class="nx">errors</span> <span class="o">=</span> <span class="nx">instance</span><span class="p">.</span><span class="nx">errors</span><span class="p">;</span>
			<span class="kd">var</span> <span class="nx">name</span> <span class="o">=</span> <span class="nx">field</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">NAME</span><span class="p">);</span>

			<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">errors</span><span class="p">[</span><span class="nx">name</span><span class="p">])</span> <span class="p">{</span>
				<span class="nx">errors</span><span class="p">[</span><span class="nx">name</span><span class="p">]</span> <span class="o">=</span> <span class="p">[];</span>
			<span class="p">}</span>

			<span class="nx">errors</span><span class="p">[</span><span class="nx">name</span><span class="p">].</span><span class="nx">push</span><span class="p">(</span><span class="nx">ruleName</span><span class="p">);</span>
		<span class="p">},</span>

		<span class="nx">clearFieldError</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">field</span><span class="p">)</span> <span class="p">{</span>
			<span class="kd">var</span> <span class="nx">instance</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>

			<span class="k">delete</span> <span class="nx">instance</span><span class="p">.</span><span class="nx">errors</span><span class="p">[</span><span class="nx">field</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">NAME</span><span class="p">)];</span>
		<span class="p">},</span>

		<span class="nx">eachRule</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">fn</span><span class="p">)</span> <span class="p">{</span>
			<span class="kd">var</span> <span class="nx">instance</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>

			<span class="nx">A</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span>
				<span class="nx">instance</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">RULES</span><span class="p">),</span>
				<span class="kd">function</span><span class="p">(</span><span class="nx">rule</span><span class="p">,</span> <span class="nx">fieldName</span><span class="p">)</span> <span class="p">{</span>
					<span class="k">if</span> <span class="p">(</span><span class="nx">isFunction</span><span class="p">(</span><span class="nx">fn</span><span class="p">))</span> <span class="p">{</span>
						<span class="nx">fn</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">instance</span><span class="p">,</span> <span class="p">[</span><span class="nx">rule</span><span class="p">,</span> <span class="nx">fieldName</span><span class="p">]);</span>
					<span class="p">}</span>
				<span class="p">}</span>
			<span class="p">);</span>
		<span class="p">},</span>

		<span class="nx">findFieldContainer</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">field</span><span class="p">)</span> <span class="p">{</span>
			<span class="kd">var</span> <span class="nx">instance</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
			<span class="kd">var</span> <span class="nx">fieldContainer</span> <span class="o">=</span> <span class="nx">instance</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">FIELD_CONTAINER</span><span class="p">);</span>

			<span class="k">if</span> <span class="p">(</span><span class="nx">fieldContainer</span><span class="p">)</span> <span class="p">{</span>
				<span class="k">return</span> <span class="nx">field</span><span class="p">.</span><span class="nx">ancestor</span><span class="p">(</span><span class="nx">fieldContainer</span><span class="p">);</span>
			<span class="p">}</span>
		<span class="p">},</span>

		<span class="nx">focusInvalidField</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
			<span class="kd">var</span> <span class="nx">instance</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
			<span class="kd">var</span> <span class="nx">contentBox</span> <span class="o">=</span> <span class="nx">instance</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">CONTENT_BOX</span><span class="p">);</span>
			<span class="kd">var</span> <span class="nx">field</span> <span class="o">=</span> <span class="nx">contentBox</span><span class="p">.</span><span class="nx">one</span><span class="p">(</span><span class="nx">DOT</span><span class="o">+</span><span class="nx">CSS_ERROR</span><span class="p">);</span>

			<span class="k">if</span> <span class="p">(</span><span class="nx">field</span><span class="p">)</span> <span class="p">{</span>
				<span class="k">if</span> <span class="p">(</span><span class="nx">instance</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">SELECT_TEXT</span><span class="p">))</span> <span class="p">{</span>
					<span class="nx">field</span><span class="p">.</span><span class="nx">selectText</span><span class="p">();</span>
				<span class="p">}</span>

				<span class="nx">field</span><span class="p">.</span><span class="nx">focus</span><span class="p">();</span>
			<span class="p">}</span>
		<span class="p">},</span>

		<span class="nx">getElementsByName</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">name</span><span class="p">)</span> <span class="p">{</span>
			<span class="kd">var</span> <span class="nx">instance</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>

			<span class="k">return</span> <span class="nx">instance</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">CONTENT_BOX</span><span class="p">).</span><span class="nx">all</span><span class="p">(</span><span class="s1">&#39;[name=&quot;&#39;</span> <span class="o">+</span> <span class="nx">name</span> <span class="o">+</span> <span class="s1">&#39;&quot;]&#39;</span><span class="p">);</span>
		<span class="p">},</span>

		<span class="nx">getField</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">field</span><span class="p">)</span> <span class="p">{</span>
			<span class="kd">var</span> <span class="nx">instance</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>

			<span class="k">if</span> <span class="p">(</span><span class="nx">isString</span><span class="p">(</span><span class="nx">field</span><span class="p">))</span> <span class="p">{</span>
				<span class="nx">field</span> <span class="o">=</span> <span class="nx">instance</span><span class="p">.</span><span class="nx">getElementsByName</span><span class="p">(</span><span class="nx">field</span><span class="p">).</span><span class="nx">item</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
			<span class="p">}</span>

			<span class="k">return</span> <span class="nx">field</span><span class="p">;</span>
		<span class="p">},</span>

		<span class="nx">getFieldError</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">field</span><span class="p">)</span> <span class="p">{</span>
			<span class="kd">var</span> <span class="nx">instance</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>

			<span class="k">return</span> <span class="nx">instance</span><span class="p">.</span><span class="nx">errors</span><span class="p">[</span><span class="nx">field</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">NAME</span><span class="p">)];</span>
		<span class="p">},</span>

		<span class="nx">getFieldStackErrorContainer</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">field</span><span class="p">)</span> <span class="p">{</span>
			<span class="kd">var</span> <span class="nx">instance</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
			<span class="kd">var</span> <span class="nx">name</span> <span class="o">=</span> <span class="nx">field</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">NAME</span><span class="p">);</span>
			<span class="kd">var</span> <span class="nx">stackContainers</span> <span class="o">=</span> <span class="nx">instance</span><span class="p">.</span><span class="nx">stackErrorContainers</span><span class="p">;</span>

			<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">stackContainers</span><span class="p">[</span><span class="nx">name</span><span class="p">])</span> <span class="p">{</span>
				<span class="nx">stackContainers</span><span class="p">[</span><span class="nx">name</span><span class="p">]</span> <span class="o">=</span> <span class="nx">instance</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">STACK_ERROR_CONTAINER</span><span class="p">);</span>
			<span class="p">}</span>

			<span class="k">return</span> <span class="nx">stackContainers</span><span class="p">[</span><span class="nx">name</span><span class="p">];</span>
		<span class="p">},</span>

		<span class="nx">getFieldErrorMessage</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">field</span><span class="p">,</span> <span class="nx">rule</span><span class="p">)</span> <span class="p">{</span>
			<span class="kd">var</span> <span class="nx">instance</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
			<span class="kd">var</span> <span class="nx">fieldName</span> <span class="o">=</span> <span class="nx">field</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">NAME</span><span class="p">);</span>
			<span class="kd">var</span> <span class="nx">fieldStrings</span> <span class="o">=</span> <span class="nx">instance</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">FIELD_STRINGS</span><span class="p">)[</span><span class="nx">fieldName</span><span class="p">]</span> <span class="o">||</span> <span class="p">{};</span>
			<span class="kd">var</span> <span class="nx">fieldRules</span> <span class="o">=</span> <span class="nx">instance</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">RULES</span><span class="p">)[</span><span class="nx">fieldName</span><span class="p">];</span>

			<span class="kd">var</span> <span class="nx">strings</span> <span class="o">=</span> <span class="nx">instance</span><span class="p">.</span><span class="nx">getStrings</span><span class="p">();</span>
			<span class="kd">var</span> <span class="nx">substituteRulesMap</span> <span class="o">=</span> <span class="p">{};</span>

			<span class="k">if</span> <span class="p">(</span><span class="nx">rule</span> <span class="k">in</span> <span class="nx">fieldRules</span><span class="p">)</span> <span class="p">{</span>
				<span class="kd">var</span> <span class="nx">ruleValue</span> <span class="o">=</span> <span class="nx">A</span><span class="p">.</span><span class="nb">Array</span><span class="p">(</span><span class="nx">fieldRules</span><span class="p">[</span><span class="nx">rule</span><span class="p">]);</span>

				<span class="nx">A</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span>
					<span class="nx">ruleValue</span><span class="p">,</span>
					<span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">,</span> <span class="nx">index</span><span class="p">)</span> <span class="p">{</span>
						<span class="nx">substituteRulesMap</span><span class="p">[</span><span class="nx">index</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="nx">value</span><span class="p">].</span><span class="nx">join</span><span class="p">(</span><span class="nx">EMPTY_STRING</span><span class="p">);</span>
					<span class="p">}</span>
				<span class="p">);</span>
			<span class="p">}</span>

			<span class="kd">var</span> <span class="nx">message</span> <span class="o">=</span> <span class="p">(</span><span class="nx">fieldStrings</span><span class="p">[</span><span class="nx">rule</span><span class="p">]</span> <span class="o">||</span> <span class="nx">strings</span><span class="p">[</span><span class="nx">rule</span><span class="p">]</span> <span class="o">||</span> <span class="nx">strings</span><span class="p">.</span><span class="nx">DEFAULT</span><span class="p">);</span>

			<span class="k">return</span> <span class="nx">A</span><span class="p">.</span><span class="nx">substitute</span><span class="p">(</span><span class="nx">message</span><span class="p">,</span> <span class="nx">substituteRulesMap</span><span class="p">);</span>
		<span class="p">},</span>

		<span class="nx">hasErrors</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
			<span class="kd">var</span> <span class="nx">instance</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>

			<span class="k">return</span> <span class="o">!</span><span class="nx">isEmpty</span><span class="p">(</span><span class="nx">instance</span><span class="p">.</span><span class="nx">errors</span><span class="p">);</span>
		<span class="p">},</span>

		<span class="nx">highlight</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">field</span><span class="p">,</span> <span class="nx">valid</span><span class="p">)</span> <span class="p">{</span>
			<span class="kd">var</span> <span class="nx">instance</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
			<span class="kd">var</span> <span class="nx">fieldContainer</span> <span class="o">=</span> <span class="nx">instance</span><span class="p">.</span><span class="nx">findFieldContainer</span><span class="p">(</span><span class="nx">field</span><span class="p">);</span>

			<span class="nx">instance</span><span class="p">.</span><span class="nx">_highlightHelper</span><span class="p">(</span>
				<span class="nx">field</span><span class="p">,</span>
				<span class="nx">instance</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">ERROR_CLASS</span><span class="p">),</span>
				<span class="nx">instance</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">VALID_CLASS</span><span class="p">),</span>
				<span class="nx">valid</span>
			<span class="p">);</span>

			<span class="nx">instance</span><span class="p">.</span><span class="nx">_highlightHelper</span><span class="p">(</span>
				<span class="nx">fieldContainer</span><span class="p">,</span>
				<span class="nx">instance</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">CONTAINER_ERROR_CLASS</span><span class="p">),</span>
				<span class="nx">instance</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">CONTAINER_VALID_CLASS</span><span class="p">),</span>
				<span class="nx">valid</span>
			<span class="p">);</span>
		<span class="p">},</span>

		<span class="nx">unhighlight</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">field</span><span class="p">)</span> <span class="p">{</span>
			<span class="kd">var</span> <span class="nx">instance</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>

			<span class="nx">instance</span><span class="p">.</span><span class="nx">highlight</span><span class="p">(</span><span class="nx">field</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
		<span class="p">},</span>

		<span class="nx">printStackError</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">field</span><span class="p">,</span> <span class="nx">container</span><span class="p">,</span> <span class="nx">errors</span><span class="p">)</span> <span class="p">{</span>
			<span class="kd">var</span> <span class="nx">instance</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>

			<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">instance</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">SHOW_ALL_MESSAGES</span><span class="p">))</span> <span class="p">{</span>
				<span class="nx">errors</span> <span class="o">=</span> <span class="nx">errors</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
			<span class="p">}</span>

			<span class="nx">container</span><span class="p">.</span><span class="nx">empty</span><span class="p">();</span>

			<span class="nx">A</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span>
				<span class="nx">errors</span><span class="p">,</span>
				<span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">index</span><span class="p">)</span> <span class="p">{</span>
					<span class="kd">var</span> <span class="nx">message</span> <span class="o">=</span> <span class="nx">instance</span><span class="p">.</span><span class="nx">getFieldErrorMessage</span><span class="p">(</span><span class="nx">field</span><span class="p">,</span> <span class="nx">error</span><span class="p">);</span>
					<span class="kd">var</span> <span class="nx">messageEl</span> <span class="o">=</span> <span class="nx">instance</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">MESSAGE_CONTAINER</span><span class="p">).</span><span class="nx">addClass</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>

					<span class="nx">container</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span>
						<span class="nx">messageEl</span><span class="p">.</span><span class="nx">html</span><span class="p">(</span><span class="nx">message</span><span class="p">)</span>
					<span class="p">);</span>
				<span class="p">}</span>
			<span class="p">);</span>
		<span class="p">},</span>

		<span class="nx">resetAllFields</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
			<span class="kd">var</span> <span class="nx">instance</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>

			<span class="nx">instance</span><span class="p">.</span><span class="nx">eachRule</span><span class="p">(</span>
				<span class="kd">function</span><span class="p">(</span><span class="nx">rule</span><span class="p">,</span> <span class="nx">fieldName</span><span class="p">)</span> <span class="p">{</span>
					<span class="kd">var</span> <span class="nx">field</span> <span class="o">=</span> <span class="nx">instance</span><span class="p">.</span><span class="nx">getField</span><span class="p">(</span><span class="nx">fieldName</span><span class="p">);</span>

					<span class="nx">instance</span><span class="p">.</span><span class="nx">resetField</span><span class="p">(</span><span class="nx">field</span><span class="p">);</span>
				<span class="p">}</span>
			<span class="p">);</span>
		<span class="p">},</span>

		<span class="nx">resetField</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">field</span><span class="p">)</span> <span class="p">{</span>
			<span class="kd">var</span> <span class="nx">instance</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
			<span class="kd">var</span> <span class="nx">stackContainer</span> <span class="o">=</span> <span class="nx">instance</span><span class="p">.</span><span class="nx">getFieldStackErrorContainer</span><span class="p">(</span><span class="nx">field</span><span class="p">);</span>

			<span class="nx">stackContainer</span><span class="p">.</span><span class="nx">remove</span><span class="p">();</span>

			<span class="nx">instance</span><span class="p">.</span><span class="nx">resetFieldCss</span><span class="p">(</span><span class="nx">field</span><span class="p">);</span>

			<span class="nx">instance</span><span class="p">.</span><span class="nx">clearFieldError</span><span class="p">(</span><span class="nx">field</span><span class="p">);</span>
		<span class="p">},</span>

		<span class="nx">resetFieldCss</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">field</span><span class="p">)</span> <span class="p">{</span>
			<span class="kd">var</span> <span class="nx">instance</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
			<span class="kd">var</span> <span class="nx">fieldContainer</span> <span class="o">=</span> <span class="nx">instance</span><span class="p">.</span><span class="nx">findFieldContainer</span><span class="p">(</span><span class="nx">field</span><span class="p">);</span>

			<span class="kd">var</span> <span class="nx">removeClasses</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">elem</span><span class="p">,</span> <span class="nx">classAttrs</span><span class="p">)</span> <span class="p">{</span>
				<span class="k">if</span> <span class="p">(</span><span class="nx">elem</span><span class="p">)</span> <span class="p">{</span>
					<span class="nx">A</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">classAttrs</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">attrName</span><span class="p">)</span> <span class="p">{</span>
						<span class="nx">elem</span><span class="p">.</span><span class="nx">removeClass</span><span class="p">(</span>
							<span class="nx">instance</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">attrName</span><span class="p">)</span>
						<span class="p">);</span>
					<span class="p">});</span>
				<span class="p">}</span>
			<span class="p">};</span>

			<span class="nx">removeClasses</span><span class="p">(</span><span class="nx">field</span><span class="p">,</span> <span class="p">[</span><span class="nx">VALID_CLASS</span><span class="p">,</span> <span class="nx">ERROR_CLASS</span><span class="p">]);</span>
			<span class="nx">removeClasses</span><span class="p">(</span><span class="nx">fieldContainer</span><span class="p">,</span> <span class="p">[</span><span class="nx">CONTAINER_VALID_CLASS</span><span class="p">,</span> <span class="nx">CONTAINER_ERROR_CLASS</span><span class="p">]);</span>
		<span class="p">},</span>

		<span class="nx">validatable</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">field</span><span class="p">)</span> <span class="p">{</span>
			<span class="kd">var</span> <span class="nx">instance</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
			<span class="kd">var</span> <span class="nx">fieldRules</span> <span class="o">=</span> <span class="nx">instance</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">RULES</span><span class="p">)[</span><span class="nx">field</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">NAME</span><span class="p">)];</span>

			<span class="kd">var</span> <span class="nx">required</span> <span class="o">=</span> <span class="nx">fieldRules</span><span class="p">.</span><span class="nx">required</span><span class="p">;</span>
			<span class="kd">var</span> <span class="nx">hasValue</span> <span class="o">=</span> <span class="nx">YUI</span><span class="p">.</span><span class="nx">AUI</span><span class="p">.</span><span class="nx">defaults</span><span class="p">.</span><span class="nx">FormValidator</span><span class="p">.</span><span class="nx">RULES</span><span class="p">.</span><span class="nx">required</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">instance</span><span class="p">,</span> <span class="p">[</span><span class="nx">field</span><span class="p">.</span><span class="nx">val</span><span class="p">(),</span> <span class="nx">field</span><span class="p">]);</span>

			<span class="k">return</span> <span class="p">(</span><span class="nx">required</span> <span class="o">||</span> <span class="p">(</span><span class="o">!</span><span class="nx">required</span> <span class="o">&amp;&amp;</span> <span class="nx">hasValue</span><span class="p">));</span>
		<span class="p">},</span>

		<span class="nx">validate</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
			<span class="kd">var</span> <span class="nx">instance</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>

			<span class="nx">instance</span><span class="p">.</span><span class="nx">eachRule</span><span class="p">(</span>
				<span class="kd">function</span><span class="p">(</span><span class="nx">rule</span><span class="p">,</span> <span class="nx">fieldName</span><span class="p">)</span> <span class="p">{</span>
					<span class="nx">instance</span><span class="p">.</span><span class="nx">validateField</span><span class="p">(</span><span class="nx">fieldName</span><span class="p">);</span>
				<span class="p">}</span>
			<span class="p">);</span>

			<span class="nx">instance</span><span class="p">.</span><span class="nx">focusInvalidField</span><span class="p">();</span>
		<span class="p">},</span>

		<span class="nx">validateField</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">field</span><span class="p">)</span> <span class="p">{</span>
			<span class="kd">var</span> <span class="nx">instance</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
			<span class="kd">var</span> <span class="nx">fieldNode</span> <span class="o">=</span> <span class="nx">instance</span><span class="p">.</span><span class="nx">getField</span><span class="p">(</span><span class="nx">field</span><span class="p">);</span>

			<span class="k">if</span> <span class="p">(</span><span class="nx">fieldNode</span><span class="p">)</span> <span class="p">{</span>
				<span class="kd">var</span> <span class="nx">validatable</span> <span class="o">=</span> <span class="nx">instance</span><span class="p">.</span><span class="nx">validatable</span><span class="p">(</span><span class="nx">fieldNode</span><span class="p">);</span>

				<span class="nx">instance</span><span class="p">.</span><span class="nx">resetField</span><span class="p">(</span><span class="nx">fieldNode</span><span class="p">);</span>

				<span class="k">if</span> <span class="p">(</span><span class="nx">validatable</span><span class="p">)</span> <span class="p">{</span>
					<span class="nx">instance</span><span class="p">.</span><span class="nx">fire</span><span class="p">(</span><span class="nx">EV_VALIDATE_FIELD</span><span class="p">,</span> <span class="p">{</span>
						<span class="nx">validator</span><span class="o">:</span> <span class="p">{</span>
							<span class="nx">field</span><span class="o">:</span> <span class="nx">fieldNode</span>
						<span class="p">}</span>
					<span class="p">});</span>
				<span class="p">}</span>
			<span class="p">}</span>
		<span class="p">},</span>

		<span class="nx">_bindValidation</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
			<span class="kd">var</span> <span class="nx">instance</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
			<span class="kd">var</span> <span class="nx">form</span> <span class="o">=</span> <span class="nx">instance</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">CONTENT_BOX</span><span class="p">);</span>

			<span class="nx">form</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="nx">EV_RESET</span><span class="p">,</span> <span class="nx">A</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="nx">instance</span><span class="p">.</span><span class="nx">_onFormReset</span><span class="p">,</span> <span class="nx">instance</span><span class="p">));</span>
			<span class="nx">form</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="nx">EV_SUBMIT</span><span class="p">,</span> <span class="nx">A</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="nx">instance</span><span class="p">.</span><span class="nx">_onFormSubmit</span><span class="p">,</span> <span class="nx">instance</span><span class="p">));</span>
		<span class="p">},</span>

		<span class="nx">_createEvents</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
			<span class="kd">var</span> <span class="nx">instance</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>

			<span class="c1">// create publish function for kweight optimization</span>
			<span class="kd">var</span> <span class="nx">publish</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">fn</span><span class="p">)</span> <span class="p">{</span>
				<span class="nx">instance</span><span class="p">.</span><span class="nx">publish</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="p">{</span>
		            <span class="nx">defaultFn</span><span class="o">:</span> <span class="nx">fn</span>
		        <span class="p">});</span>
			<span class="p">};</span>

			<span class="nx">publish</span><span class="p">(</span>
				<span class="nx">EV_ERROR_FIELD</span><span class="p">,</span>
				<span class="nx">instance</span><span class="p">.</span><span class="nx">_defErrorFieldFn</span>
			<span class="p">);</span>

			<span class="nx">publish</span><span class="p">(</span>
				<span class="nx">EV_VALID_FIELD</span><span class="p">,</span>
				<span class="nx">instance</span><span class="p">.</span><span class="nx">_defValidFieldFn</span>
			<span class="p">);</span>

			<span class="nx">publish</span><span class="p">(</span>
				<span class="nx">EV_VALIDATE_FIELD</span><span class="p">,</span>
				<span class="nx">instance</span><span class="p">.</span><span class="nx">_defValidateFieldFn</span>
			<span class="p">);</span>
		<span class="p">},</span>

		<span class="nx">_defErrorFieldFn</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
			<span class="kd">var</span> <span class="nx">instance</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
			<span class="kd">var</span> <span class="nx">validator</span> <span class="o">=</span> <span class="nx">event</span><span class="p">.</span><span class="nx">validator</span><span class="p">;</span>
			<span class="kd">var</span> <span class="nx">field</span> <span class="o">=</span> <span class="nx">validator</span><span class="p">.</span><span class="nx">field</span><span class="p">;</span>

			<span class="nx">instance</span><span class="p">.</span><span class="nx">highlight</span><span class="p">(</span><span class="nx">field</span><span class="p">);</span>

			<span class="k">if</span> <span class="p">(</span><span class="nx">instance</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">SHOW_MESSAGES</span><span class="p">))</span> <span class="p">{</span>
				<span class="kd">var</span> <span class="nx">stackContainer</span> <span class="o">=</span> <span class="nx">instance</span><span class="p">.</span><span class="nx">getFieldStackErrorContainer</span><span class="p">(</span><span class="nx">field</span><span class="p">);</span>

				<span class="nx">field</span><span class="p">.</span><span class="nx">placeBefore</span><span class="p">(</span><span class="nx">stackContainer</span><span class="p">);</span>

				<span class="nx">instance</span><span class="p">.</span><span class="nx">printStackError</span><span class="p">(</span>
					<span class="nx">field</span><span class="p">,</span>
					<span class="nx">stackContainer</span><span class="p">,</span>
					<span class="nx">validator</span><span class="p">.</span><span class="nx">errors</span>
				<span class="p">);</span>
			<span class="p">}</span>
		<span class="p">},</span>

		<span class="nx">_defValidFieldFn</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
			<span class="kd">var</span> <span class="nx">instance</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
			<span class="kd">var</span> <span class="nx">field</span> <span class="o">=</span> <span class="nx">event</span><span class="p">.</span><span class="nx">validator</span><span class="p">.</span><span class="nx">field</span><span class="p">;</span>

			<span class="nx">instance</span><span class="p">.</span><span class="nx">unhighlight</span><span class="p">(</span><span class="nx">field</span><span class="p">);</span>
		<span class="p">},</span>

		<span class="nx">_defValidateFieldFn</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
			<span class="kd">var</span> <span class="nx">instance</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
			<span class="kd">var</span> <span class="nx">field</span> <span class="o">=</span> <span class="nx">event</span><span class="p">.</span><span class="nx">validator</span><span class="p">.</span><span class="nx">field</span><span class="p">;</span>
			<span class="kd">var</span> <span class="nx">fieldRules</span> <span class="o">=</span> <span class="nx">instance</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">RULES</span><span class="p">)[</span><span class="nx">field</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">NAME</span><span class="p">)];</span>

			<span class="nx">A</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span>
				<span class="nx">fieldRules</span><span class="p">,</span>
				<span class="kd">function</span><span class="p">(</span><span class="nx">ruleValue</span><span class="p">,</span> <span class="nx">ruleName</span><span class="p">)</span> <span class="p">{</span>
					<span class="kd">var</span> <span class="nx">rule</span> <span class="o">=</span> <span class="nx">YUI</span><span class="p">.</span><span class="nx">AUI</span><span class="p">.</span><span class="nx">defaults</span><span class="p">.</span><span class="nx">FormValidator</span><span class="p">.</span><span class="nx">RULES</span><span class="p">[</span><span class="nx">ruleName</span><span class="p">];</span>
					<span class="kd">var</span> <span class="nx">fieldValue</span> <span class="o">=</span> <span class="nx">trim</span><span class="p">(</span><span class="nx">field</span><span class="p">.</span><span class="nx">val</span><span class="p">());</span>

					<span class="k">if</span> <span class="p">(</span><span class="nx">isFunction</span><span class="p">(</span><span class="nx">rule</span><span class="p">)</span> <span class="o">&amp;&amp;</span>
						<span class="o">!</span><span class="nx">rule</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">instance</span><span class="p">,</span> <span class="p">[</span><span class="nx">fieldValue</span><span class="p">,</span> <span class="nx">field</span><span class="p">,</span> <span class="nx">ruleValue</span><span class="p">]))</span> <span class="p">{</span>

						<span class="nx">instance</span><span class="p">.</span><span class="nx">addFieldError</span><span class="p">(</span><span class="nx">field</span><span class="p">,</span> <span class="nx">ruleName</span><span class="p">);</span>
					<span class="p">}</span>
				<span class="p">}</span>
			<span class="p">);</span>

			<span class="kd">var</span> <span class="nx">fieldErrors</span> <span class="o">=</span> <span class="nx">instance</span><span class="p">.</span><span class="nx">getFieldError</span><span class="p">(</span><span class="nx">field</span><span class="p">);</span>

			<span class="k">if</span> <span class="p">(</span><span class="nx">fieldErrors</span><span class="p">)</span> <span class="p">{</span>
				<span class="nx">instance</span><span class="p">.</span><span class="nx">fire</span><span class="p">(</span><span class="nx">EV_ERROR_FIELD</span><span class="p">,</span> <span class="p">{</span>
					<span class="nx">validator</span><span class="o">:</span> <span class="p">{</span>
						<span class="nx">field</span><span class="o">:</span> <span class="nx">field</span><span class="p">,</span>
						<span class="nx">errors</span><span class="o">:</span> <span class="nx">fieldErrors</span>
					<span class="p">}</span>
				<span class="p">});</span>
			<span class="p">}</span>
			<span class="k">else</span> <span class="p">{</span>
				<span class="nx">instance</span><span class="p">.</span><span class="nx">fire</span><span class="p">(</span><span class="nx">EV_VALID_FIELD</span><span class="p">,</span> <span class="p">{</span>
					<span class="nx">validator</span><span class="o">:</span> <span class="p">{</span>
						<span class="nx">field</span><span class="o">:</span> <span class="nx">field</span>
					<span class="p">}</span>
				<span class="p">});</span>
			<span class="p">}</span>
		<span class="p">},</span>

		<span class="nx">_highlightHelper</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">field</span><span class="p">,</span> <span class="nx">errorClass</span><span class="p">,</span> <span class="nx">validClass</span><span class="p">,</span> <span class="nx">valid</span><span class="p">)</span> <span class="p">{</span>
			<span class="k">if</span> <span class="p">(</span><span class="nx">field</span><span class="p">)</span> <span class="p">{</span>
				<span class="k">if</span> <span class="p">(</span><span class="nx">valid</span><span class="p">)</span> <span class="p">{</span>
					<span class="nx">field</span><span class="p">.</span><span class="nx">removeClass</span><span class="p">(</span><span class="nx">errorClass</span><span class="p">).</span><span class="nx">addClass</span><span class="p">(</span><span class="nx">validClass</span><span class="p">);</span>
				<span class="p">}</span>
				<span class="k">else</span> <span class="p">{</span>
					<span class="nx">field</span><span class="p">.</span><span class="nx">removeClass</span><span class="p">(</span><span class="nx">validClass</span><span class="p">).</span><span class="nx">addClass</span><span class="p">(</span><span class="nx">errorClass</span><span class="p">);</span>
				<span class="p">}</span>
			<span class="p">}</span>
		<span class="p">},</span>

		<span class="nx">_onBlurField</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
			<span class="kd">var</span> <span class="nx">instance</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
			<span class="kd">var</span> <span class="nx">fieldName</span> <span class="o">=</span> <span class="nx">event</span><span class="p">.</span><span class="nx">currentTarget</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">NAME</span><span class="p">);</span>

			<span class="nx">instance</span><span class="p">.</span><span class="nx">validateField</span><span class="p">(</span><span class="nx">fieldName</span><span class="p">);</span>
		<span class="p">},</span>

		<span class="nx">_onFieldInputChange</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
			<span class="kd">var</span> <span class="nx">instance</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>

			<span class="nx">instance</span><span class="p">.</span><span class="nx">validateField</span><span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">currentTarget</span><span class="p">);</span>
		<span class="p">},</span>

		<span class="nx">_onFormSubmit</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
			<span class="kd">var</span> <span class="nx">instance</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>

			<span class="kd">var</span> <span class="nx">data</span> <span class="o">=</span> <span class="p">{</span>
				<span class="nx">validator</span><span class="o">:</span> <span class="p">{</span>
					<span class="nx">formEvent</span><span class="o">:</span> <span class="nx">event</span>
				<span class="p">}</span>
			<span class="p">};</span>

			<span class="nx">instance</span><span class="p">.</span><span class="nx">validate</span><span class="p">();</span>

			<span class="k">if</span> <span class="p">(</span><span class="nx">instance</span><span class="p">.</span><span class="nx">hasErrors</span><span class="p">())</span> <span class="p">{</span>
				<span class="nx">data</span><span class="p">.</span><span class="nx">validator</span><span class="p">.</span><span class="nx">errors</span> <span class="o">=</span> <span class="nx">instance</span><span class="p">.</span><span class="nx">errors</span><span class="p">;</span>

				<span class="nx">instance</span><span class="p">.</span><span class="nx">fire</span><span class="p">(</span><span class="nx">EV_SUBMIT_ERROR</span><span class="p">,</span> <span class="nx">data</span><span class="p">);</span>

				<span class="nx">event</span><span class="p">.</span><span class="nx">halt</span><span class="p">();</span>
			<span class="p">}</span>
			<span class="k">else</span> <span class="p">{</span>
				<span class="nx">instance</span><span class="p">.</span><span class="nx">fire</span><span class="p">(</span><span class="nx">EV_SUBMIT</span><span class="p">,</span> <span class="nx">data</span><span class="p">);</span>
			<span class="p">}</span>
		<span class="p">},</span>

		<span class="nx">_onFormReset</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
			<span class="kd">var</span> <span class="nx">instance</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>

			<span class="nx">instance</span><span class="p">.</span><span class="nx">resetAllFields</span><span class="p">();</span>
		<span class="p">},</span>

		<span class="c1">// helper method for k-weight optimizations</span>
		<span class="nx">_bindValidateHelper</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">bind</span><span class="p">,</span> <span class="nx">evType</span><span class="p">,</span> <span class="nx">fn</span><span class="p">,</span> <span class="nx">handler</span><span class="p">)</span> <span class="p">{</span>
			<span class="kd">var</span> <span class="nx">instance</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>

			<span class="nx">instance</span><span class="p">.</span><span class="nx">_unbindHandlers</span><span class="p">(</span><span class="nx">handler</span><span class="p">);</span>

			<span class="k">if</span> <span class="p">(</span><span class="nx">bind</span><span class="p">)</span> <span class="p">{</span>
				<span class="nx">instance</span><span class="p">.</span><span class="nx">eachRule</span><span class="p">(</span>
					<span class="kd">function</span><span class="p">(</span><span class="nx">rule</span><span class="p">,</span> <span class="nx">fieldName</span><span class="p">)</span> <span class="p">{</span>
						<span class="kd">var</span> <span class="nx">field</span> <span class="o">=</span> <span class="nx">instance</span><span class="p">.</span><span class="nx">getElementsByName</span><span class="p">(</span><span class="nx">fieldName</span><span class="p">);</span>

						<span class="nx">instance</span><span class="p">[</span><span class="nx">handler</span><span class="p">].</span><span class="nx">push</span><span class="p">(</span>
							<span class="nx">field</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="nx">evType</span><span class="p">,</span> <span class="nx">A</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="nx">fn</span><span class="p">,</span> <span class="nx">instance</span><span class="p">))</span>
						<span class="p">);</span>
					<span class="p">}</span>
				<span class="p">);</span>
			<span class="p">}</span>
		<span class="p">},</span>

		<span class="nx">_uiSetExtractRules</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">val</span><span class="p">)</span> <span class="p">{</span>
			<span class="kd">var</span> <span class="nx">instance</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>

			<span class="k">if</span> <span class="p">(</span><span class="nx">val</span><span class="p">)</span> <span class="p">{</span>
				<span class="kd">var</span> <span class="nx">form</span> <span class="o">=</span> <span class="nx">instance</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">CONTENT_BOX</span><span class="p">);</span>
				<span class="kd">var</span> <span class="nx">rules</span> <span class="o">=</span> <span class="nx">instance</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">RULES</span><span class="p">);</span>
				<span class="kd">var</span> <span class="nx">extractCssPrefix</span> <span class="o">=</span> <span class="nx">instance</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">EXTRACT_CSS_PREFIX</span><span class="p">);</span>

				<span class="nx">A</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span>
					<span class="nx">YUI</span><span class="p">.</span><span class="nx">AUI</span><span class="p">.</span><span class="nx">defaults</span><span class="p">.</span><span class="nx">FormValidator</span><span class="p">.</span><span class="nx">RULES</span><span class="p">,</span>
					<span class="kd">function</span><span class="p">(</span><span class="nx">ruleValue</span><span class="p">,</span> <span class="nx">ruleName</span><span class="p">)</span> <span class="p">{</span>
						<span class="kd">var</span> <span class="nx">query</span> <span class="o">=</span> <span class="p">[</span><span class="nx">DOT</span><span class="p">,</span> <span class="nx">extractCssPrefix</span><span class="p">,</span> <span class="nx">ruleName</span><span class="p">].</span><span class="nx">join</span><span class="p">(</span><span class="nx">EMPTY_STRING</span><span class="p">);</span>

						<span class="nx">form</span><span class="p">.</span><span class="nx">all</span><span class="p">(</span><span class="nx">query</span><span class="p">).</span><span class="nx">each</span><span class="p">(</span>
							<span class="kd">function</span><span class="p">(</span><span class="nx">node</span><span class="p">)</span> <span class="p">{</span>
								<span class="k">if</span> <span class="p">(</span><span class="nx">node</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">TYPE</span><span class="p">))</span> <span class="p">{</span>
									<span class="kd">var</span> <span class="nx">fieldName</span> <span class="o">=</span> <span class="nx">node</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">NAME</span><span class="p">);</span>

									<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">rules</span><span class="p">[</span><span class="nx">fieldName</span><span class="p">])</span> <span class="p">{</span>
										<span class="nx">rules</span><span class="p">[</span><span class="nx">fieldName</span><span class="p">]</span> <span class="o">=</span> <span class="p">{};</span>
									<span class="p">}</span>

									<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="p">(</span><span class="nx">ruleName</span> <span class="k">in</span> <span class="nx">rules</span><span class="p">[</span><span class="nx">fieldName</span><span class="p">]))</span> <span class="p">{</span>
										<span class="nx">rules</span><span class="p">[</span><span class="nx">fieldName</span><span class="p">][</span><span class="nx">ruleName</span><span class="p">]</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
									<span class="p">}</span>
								<span class="p">}</span>
							<span class="p">}</span>
						<span class="p">);</span>
					<span class="p">}</span>
				<span class="p">);</span>
			<span class="p">}</span>
		<span class="p">},</span>

		<span class="nx">_uiSetValidateOnInput</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">bind</span><span class="p">)</span> <span class="p">{</span>
			<span class="kd">var</span> <span class="nx">instance</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>

			<span class="nx">instance</span><span class="p">.</span><span class="nx">_bindValidateHelper</span><span class="p">(</span><span class="nx">bind</span><span class="p">,</span> <span class="nx">EV_INPUT</span><span class="p">,</span> <span class="nx">instance</span><span class="p">.</span><span class="nx">_onFieldInputChange</span><span class="p">,</span> <span class="nx">INPUT_HANDLERS</span><span class="p">);</span>
		<span class="p">},</span>

		<span class="nx">_uiSetValidateOnBlur</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">bind</span><span class="p">)</span> <span class="p">{</span>
			<span class="kd">var</span> <span class="nx">instance</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>

			<span class="nx">instance</span><span class="p">.</span><span class="nx">_bindValidateHelper</span><span class="p">(</span><span class="nx">bind</span><span class="p">,</span> <span class="nx">EV_BLUR</span><span class="p">,</span> <span class="nx">instance</span><span class="p">.</span><span class="nx">_onBlurField</span><span class="p">,</span> <span class="nx">BLUR_HANDLERS</span><span class="p">);</span>
		<span class="p">},</span>

		<span class="nx">_unbindHandlers</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">handler</span><span class="p">)</span> <span class="p">{</span>
			<span class="kd">var</span> <span class="nx">instance</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>

			<span class="nx">A</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span>
				<span class="nx">instance</span><span class="p">[</span><span class="nx">handler</span><span class="p">],</span>
				<span class="kd">function</span><span class="p">(</span><span class="nx">handler</span><span class="p">)</span> <span class="p">{</span>
					<span class="nx">handler</span><span class="p">.</span><span class="nx">detach</span><span class="p">();</span>
				<span class="p">}</span>
			<span class="p">);</span>

			<span class="nx">instance</span><span class="p">[</span><span class="nx">handler</span><span class="p">]</span> <span class="o">=</span> <span class="p">[];</span>
		<span class="p">}</span>
	<span class="p">}</span>
<span class="p">});</span>

<span class="nx">A</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span>
	<span class="nx">YUI</span><span class="p">.</span><span class="nx">AUI</span><span class="p">.</span><span class="nx">defaults</span><span class="p">.</span><span class="nx">FormValidator</span><span class="p">.</span><span class="nx">REGEX</span><span class="p">,</span>
	<span class="kd">function</span><span class="p">(</span><span class="nx">regex</span><span class="p">,</span> <span class="nx">key</span><span class="p">)</span> <span class="p">{</span>
		<span class="nx">YUI</span><span class="p">.</span><span class="nx">AUI</span><span class="p">.</span><span class="nx">defaults</span><span class="p">.</span><span class="nx">FormValidator</span><span class="p">.</span><span class="nx">RULES</span><span class="p">[</span><span class="nx">key</span><span class="p">]</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">val</span><span class="p">,</span> <span class="nx">node</span><span class="p">,</span> <span class="nx">ruleValue</span><span class="p">)</span> <span class="p">{</span>
			<span class="k">return</span> <span class="nx">YUI</span><span class="p">.</span><span class="nx">AUI</span><span class="p">.</span><span class="nx">defaults</span><span class="p">.</span><span class="nx">FormValidator</span><span class="p">.</span><span class="nx">REGEX</span><span class="p">[</span><span class="nx">key</span><span class="p">].</span><span class="nx">test</span><span class="p">(</span><span class="nx">val</span><span class="p">);</span>
		<span class="p">};</span>
	<span class="p">}</span>
<span class="p">);</span>

<span class="nx">A</span><span class="p">.</span><span class="nx">FormValidator</span> <span class="o">=</span> <span class="nx">FormValidator</span><span class="p">;</span>

<span class="p">},</span> <span class="s1">&#39;@VERSION@&#39;</span> <span class="p">,{</span><span class="nx">requires</span><span class="o">:</span><span class="p">[</span><span class="s1">&#39;aui-base&#39;</span><span class="p">,</span><span class="s1">&#39;aui-event-input&#39;</span><span class="p">,</span><span class="s1">&#39;selector-css3&#39;</span><span class="p">,</span><span class="s1">&#39;substitute&#39;</span><span class="p">]});</span>


<span class="nx">AUI</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="s1">&#39;aui-form&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">A</span><span class="p">){},</span> <span class="s1">&#39;@VERSION@&#39;</span> <span class="p">,{</span><span class="nx">use</span><span class="o">:</span><span class="p">[</span><span class="s1">&#39;aui-form-base&#39;</span><span class="p">,</span><span class="s1">&#39;aui-form-combobox&#39;</span><span class="p">,</span><span class="s1">&#39;aui-form-field&#39;</span><span class="p">,</span><span class="s1">&#39;aui-form-textarea&#39;</span><span class="p">,</span><span class="s1">&#39;aui-form-textfield&#39;</span><span class="p">,</span><span class="s1">&#39;aui-form-validator&#39;</span><span class="p">],</span> <span class="nx">skinnable</span><span class="o">:</span><span class="kc">false</span><span class="p">});</span>
</pre></div>

							</div>
						<!-- /End/Start -->
					</div>
				</div>
			</div>
		</div>
	</div>

	<div class="aui-footer">
		Copyright &copy; 2010 Yahoo! Inc. All rights reserved.
	</div>
</div>

<script type="text/javascript">

    var ALL_YUI_PROPS = [{"url": "AUI~event~input.html#property_A.Node.DOM_EVENTS.input", "access": "", "host": "AUI~event~input", "type": "property", "name": "A.Node.DOM_EVENTS.input"}, {"url": "AUI~event~input.html#event_input", "access": "", "host": "AUI~event~input", "type": "event", "name": "input"}, {"url": "AUI~event~input.html#method_void();", "access": "", "host": "AUI~event~input", "type": "method", "name": "void();"}];
</script>
</body>
</html>
