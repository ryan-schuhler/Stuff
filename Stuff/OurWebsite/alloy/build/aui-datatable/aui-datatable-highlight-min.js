AUI.add("aui-datatable-highlight",function(s){var d=s.Lang,n=d.isArray,o=d.isString,m=d.isBoolean,h="active",u="activeBorderWidth",k="activeCell",b="activeRow",a="activeRowChange",v="border",j="cell",y="cells",f="children",B="highlight",r="highlightRange",z="host",l="overlay",g="overlayActiveNode",x="overlayNode",c="rangeBorderWidth",t="region",w="rows",i="selectionChange",p="type",C=" ",q=function(F){var D=this,E=0,A;if(o(F)){F=d.trim(F).replace(/\s+/g," ").split(C);}else{if(!n(F)){F=s.Array(F);}}for(A=4-F.length;E<A;E++){F.push(F[E]);}return s.Array.map(F,parseFloat);};var e=s.Base.create("datatable-highlight",s.Plugin.Base,[],{CLASS_NAMES:null,TPL_FRAME:'<div class="{overlay}">'+'<div class="{border}"></div>'+'<div class="{border}"></div>'+'<div class="{border}"></div>'+'<div class="{border}"></div>'+"</div>",_nodes:null,initializer:function(){var A=this,D=A.get(z);A.CLASS_NAMES={active:D.getClassName(h),border:D.getClassName(B,v),highlight:D.getClassName(B),overlay:D.getClassName(B,l),overlayActive:D.getClassName(B,l,h)};A.afterHostEvent(a,A._afterActiveRowChange);A.afterHostEvent(i,A._afterSelectionChange);},clear:function(){var A=this,E=A.get(z),D=E.get(k);if(D){D.removeClass(A.CLASS_NAMES.active);}A._clearBorders();A._clearHighlights();},getActiveRegion:function(){var A=this,E=A.get(z),D=A.get(p),F=null,G;if(D===w){G=E.get(b);}else{G=E.get(k);}if(G){F=G.get(t);}return F;},getSelectionRegion:function(){var A=this,F=A._nodes,E=F[0].get(t),D=F[F.length-1].get(t);return{0:E.top,1:E.left,bottom:D.bottom,height:D.bottom-E.top,left:E.left,right:D.right,top:E.top,width:D.right-E.left};},_afterActiveRowChange:function(F){var A=this,E=A.get(u),D=A.get(g),G=A.CLASS_NAMES;if(!A.get(p)){return;}A.clear();if(F.prevVal){F.prevVal.removeClass(G.active);}if(F.newVal){A._alignBorder(D,A.getActiveRegion(),E);F.newVal.addClass(G.active);}},_afterSelectionChange:function(F){var A=this,D,H=A.get(r),E=A.get(x),G=A.get(c);if(!A.get(p)){return;}A._clearHighlights();D=A._collectNodes(F.newVal);if(H&&D&&(D.length>1)){A._alignBorder(E,A.getSelectionRegion(),G);s.Array.each(D,function(I){I.addClass(A.CLASS_NAMES.highlight);});}},_alignBorder:function(L,H,D){var I=this,J=I.get(z);J._tableNode.appendChild(L);if(H){var F=L.get(f),K=F.item(0),A=F.item(1),G=F.item(2),E=F.item(3);L.setXY([H.left,H.top]);K.sizeTo(H.width,D[0]);E.sizeTo(D[3],H.height-D[2]);G.sizeTo(H.width,D[2]);A.sizeTo(D[1],H.height-D[2]);K.setXY([H.left,H.top]);E.setXY([H.left,H.top]);G.setXY([H.left,H.bottom-D[2]]);A.setXY([H.right-D[1],H.top]);}},_collectNodes:function(E){var A=this,D=A.get(p);if(!D||!E){return null;}return(A._nodes=E[D]);},_clearBorders:function(){var A=this;A.get(x).remove();A.get(g).remove();},_clearHighlights:function(){var A=this;s.Array.each(A._nodes,function(D){D.removeClass(A.CLASS_NAMES.highlight);});},_validateType:function(A){return(A===y||A===w||A===null);}},{NS:B,NAME:"datatable-highlight",ATTRS:{activeBorderWidth:{setter:q,value:2},overlayActiveNode:{setter:function(E){var A=this,D=A.CLASS_NAMES;if(!E){E=s.Node.create(d.sub(A.TPL_FRAME,D));E.addClass(D.overlayActive);}return E;},value:null},overlayNode:{setter:function(D){var A=this;if(!D){D=s.Node.create(d.sub(A.TPL_FRAME,A.CLASS_NAMES));}return D;},value:null},highlightRange:{validator:m,value:true},rangeBorderWidth:{setter:q,value:1},type:{validator:"_validateType",value:y}}});s.namespace("Plugin").DataTableHighlight=e;},"@VERSION@",{skinnable:true,requires:["aui-datatable-selection"]});