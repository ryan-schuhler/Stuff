AUI.add("aui-node-html5-print",function(m){var i=m.config,F=i.doc,k=i.win,C=m.UA,t=C.ie,x=function(){return k.AUI_HTML5_IE===false;};if(!t||t>=9||x()){return;}var R=[],w="aui-printfix",s="aui-printfix-",p=k.location,P=p.protocol+"//"+p.host,e=YUI.AUI,Q=F.documentElement,G=e.HTML5_ELEMENTS,q=G.length,y=G.join("|"),J=new RegExp("<(/?):("+y+")","gi"),u=new RegExp("("+y+")","gi"),c=new RegExp("\\b("+y+")\\b","i"),M=/print|all/,N=new RegExp("(^|[^\\n{}]*?\\s)("+y+").*?{([^}]*)}","gim"),o=new RegExp("<(/*)("+y+")","gi"),K="."+s+"$1",T="all",z=" ",j="",d="{",L="}",a="checkbox",b="checked",f="https",n="INPUT",S="OPTION",O="radio",v="selected",l="*",H="url(",I=H+P,r="<$1$2",h="<$1font";var B=e.html5shiv,E=function(A){return A&&(A+j!==undefined);},g=function(U,A,W){var V=A[W];if(V){U.setAttribute(W,V);}else{U.removeAttribute(W);}};B(F);var D=function(){var V=function(){if(x()){U();}else{D.onAfterPrint();}};var A=function(){if(x()){U();}else{D.onBeforePrint();}};var U=function(){k.detachEvent("onafterprint",V);k.detachEvent("onbeforeprint",A);};var W=function(){k.attachEvent("onafterprint",V);k.attachEvent("onbeforeprint",A);};W();D.destroy=U;D.init=W;};m.mix(D,{onAfterPrint:function(){var A=this;A.restoreHTML();var U=A._getStyleSheet();U.styleSheet.cssText=j;},onBeforePrint:function(){var A=this;var V=A._getStyleSheet();var U=A._getAllCSSText();V.styleSheet.cssText=A.parseCSS(U);A.writeHTML();},parseCSS:function(V){var A=this;var U=j;var W=V.match(N);if(W){U=W.join("\n").replace(u,K);}return U;},restoreHTML:function(){var A=this;var V=A._getBodyClone();var U=A._getBodyEl();V.innerHTML=j;Q.removeChild(V);Q.appendChild(U);},writeHTML:function(){var an=this;var am=-1;var al;var ag=an._getBodyEl();var ac;var ae;var ao;var ab;var ah;var aj=[];while(++am<q){ac=G[am];ao=F.getElementsByTagName(ac);ab=ao.length;al=-1;while(++al<ab){ah=ao[al];ae=ah.className;if(ae.indexOf(s)==-1){aj[0]=s+ac;aj[1]=ae;ah.className=aj.join(z);}}}var A=an._getDocFrag();var X=an._getBodyClone();A.appendChild(ag);Q.appendChild(X);X.className=ag.className;X.id=ag.id;var ap=ag.getElementsByTagName(l);var aa=ap.length;if(C.secure){var Z=ag.style;var ak;var V;Z.display="none";for(am=0;am<aa;am++){ak=ap[am].style;V=ak.backgroundImage;if(V&&V.indexOf(H)>-1&&V.indexOf(f)==-1){ak.backgroundImage=V.replace(H,I);}}Z.display=j;}var ad=ag.cloneNode(true);var af=ad.getElementsByTagName(l);if(aa==af.length){while(aa--){var U=af[aa];var ai=U.nodeName;if(ai==n||ai==S){var W=ap[aa];var ar=W.nodeName;if(ar==ai){var Y=null;if(ai==S){Y=v;}else{if(ai==n&&(U.type==a||U.type==O)){Y=b;}}if(Y!==null){g(U,W,Y);}}}}}var aq=ad.innerHTML;aq=aq.replace(J,r).replace(o,h);X.innerHTML=aq;},_getAllCSSText:function(){var aa=this;var W=[];var Z=aa._getAllStyleSheets(F.styleSheets,T);var Y;var U;for(var X=0;styleSheet=Z[X];X++){var ab=styleSheet.rules;if(ab&&ab.length){for(var V=0,A=ab.length;V<A;V++){Y=ab[V];if(!Y.href){U=aa._getCSSTextFromRule(Y);W.push(U);}}}}return W.join(z);},_getCSSTextFromRule:function(Y){var A=this;var V=j;var X=Y.style;var W;var U;if(X&&(W=X.cssText)&&(U=Y.selectorText)&&c.test(U)){R.length=0;R.push(U,d,W,L);V=R.join(z);}return V;},_getAllStyleSheets:function(Z,ac,U,W){var aa=this;U=U||1;W=W||[];var X;if(E(Z)){var A=Z.imports;ac=Z.mediaType||ac;if(M.test(ac)){var V;if(U<=3&&E(A)&&A.length){for(X=0,V=A.length;X<V;X++){aa._getAllStyleSheets(A[X],ac,U+1,W);}}else{if(Z.length){for(X=0,V=Z.length;X<V;X++){aa._getAllStyleSheets(Z[X],ac,U,W);}}else{var ab=Z.rules;var Y;if(ab&&ab.length){for(X=0,V=ab.length;X<V;X++){Y=ab[X].styleSheet;if(Y){aa._getAllStyleSheets(Y,ac,U,W);}}}}}if(!Z.disabled&&Z.rules){W.push(Z);}}}ac=T;return W;},_getBodyEl:function(){var A=this;var U=A._bodyEl;if(!U){U=F.body;A._bodyEl=U;}return U;},_getBodyClone:function(){var A=this;var U=A._bodyClone;if(!U){U=F.createElement("body");A._bodyClone=U;}return U;},_getDocFrag:function(){var A=this;var U=A._docFrag;if(!U){U=F.createDocumentFragment();B(U);A._docFrag=U;}return U;},_getStyleSheet:function(){var A=this;var V=A._styleSheet;if(!V){V=F.createElement("style");var U=F.documentElement.firstChild;U.insertBefore(V,U.firstChild);V.media="print";V.className=w;A._styleSheet=V;}return V;}});m.namespace("HTML5").PrintFix=D;D();},"@VERSION@",{requires:["aui-node-html5"]});